<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
<link rel="apple-touch-icon" href="icon-192.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWRPG Datapad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Dark Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ –∫—É–±–∏–∫–æ–≤ */
        .dice-icon {
            height: 1.1em; /* –ß—É—Ç—å –±–æ–ª—å—à–µ –≤—ã—Å–æ—Ç—ã —à—Ä–∏—Ñ—Ç–∞ */
            width: auto;
            vertical-align: text-bottom; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ç–µ–∫—Å—Ç—É */
            display: inline-block;
            margin: 0 1px;
        }
        /* Custom Shapes */
        .shape-hex { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
        .shape-rhombus { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); transform: scale(1.15); }
        
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        
        .rank-box { transition: all 0.1s ease; }
        .rank-box:hover { transform: scale(1.2); z-index: 10; border-color: #fbbf24; }
        .stat-card { transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-2px); }
        .mini-btn { @apply w-5 h-5 flex items-center justify-center rounded bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-bold leading-none border border-slate-600 transition cursor-pointer active:scale-95; }
        .compact-select { @apply bg-slate-900 border-none text-xs font-bold text-yellow-500 focus:ring-0 cursor-pointer hover:bg-slate-800 rounded px-2 py-1 transition w-full sm:w-auto; appearance: none; text-align-last: center; sm:text-align-last: right; }

        /* Section Divider */
        .section-divider { @apply relative flex py-2 items-center; }
        .section-divider::before, .section-divider::after { content: ''; @apply flex-grow border-t border-slate-800; }
        .section-title { @apply mx-2 sm:mx-4 text-[10px] uppercase tracking-widest font-bold text-slate-400 bg-slate-950 px-2 font-mono flex items-center gap-2 whitespace-nowrap; }
/* === –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –¶–í–ï–¢–û–í SELECT === */
        
.compact-select {
    background-color: #0f172a !important; /* bg-slate-900 */
    color: #eab308 !important;            /* text-yellow-500 */
    border: 1px solid #1e293b !important; /* border-slate-800 */
    border-radius: 4px;
    padding: 2px 4px;
    font-size: 11px; /* –ß—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
    font-weight: bold;
    cursor: pointer;
}
.compact-select option {
    background-color: #0f172a;
    color: #eab308;
}
input[type="text"], input[type="number"] {
            transition: all 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus {
            background-color: #1e293b; /* bg-slate-800 */
            border-color: #eab308; /* yellow-500 */
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-300 font-sans min-h-screen flex flex-col selection:bg-yellow-900 selection:text-white">

    <!-- HEADER & CONFIG -->
    <header class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50 shadow-lg backdrop-blur-md bg-opacity-90">
        <div class="max-w-7xl mx-auto px-2 sm:px-4 py-2">
            
            <!-- Top Row: Logo & Tabs -->
            <div class="flex justify-between items-center mb-2">
                <div class="flex items-center gap-2 sm:gap-3">
                    <div class="w-1.5 h-5 sm:w-2 sm:h-6 bg-yellow-500 skew-x-[-12deg] shadow-[0_0_10px_rgba(234,179,8,0.5)]"></div>
                    <h1 class="text-xs sm:text-sm font-bold uppercase tracking-[0.1em] sm:tracking-[0.2em] text-white">
                        Star Wars <span class="text-yellow-500 opacity-80 block sm:inline text-xs sm:text-sm leading-none sm:leading-normal">Datapad</span>
                    </h1>
                </div>
                <div class="flex bg-slate-800 rounded-md p-0.5">
                    <button onclick="switchTab('generator')" id="btn-generator" class="px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-bold transition-all bg-slate-700 text-white shadow">–õ–∏—Å—Ç</button>
<button onclick="switchTab('talents')" id="btn-talents" class="px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-bold transition-all hover:bg-slate-700 text-slate-400">–¢–∞–ª–∞–Ω—Ç—ã</button>
                    <button onclick="switchTab('editor')" id="btn-editor" class="px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-bold transition-all hover:bg-slate-700 text-slate-400">–ë–∞–∑–∞</button>
                </div>
            </div>
            
            <!-- Config Bar (Responsive Grid/Flex) -->
            <div id="config-bar" class="flex flex-col sm:flex-row flex-wrap items-stretch sm:items-center gap-2 bg-slate-950/50 p-2 sm:p-1.5 rounded border border-slate-800 text-xs">
                
                <div class="relative group w-10 h-10 sm:w-12 sm:h-12 flex-shrink-0 mx-auto sm:mx-0 z-20">
                    <div id="avatar-display" onclick="handleAvatarClick(event)" 
                         class="w-full h-full rounded-full border border-slate-700 bg-slate-900 bg-cover bg-center cursor-pointer overflow-hidden flex items-center justify-center hover:border-yellow-500 transition shadow-lg shadow-black/50 relative z-0">
                        <svg id="avatar-placeholder" class="text-slate-700 w-1/2 h-1/2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    
                    <input type="file" id="avatar-input" class="hidden" accept="image/*" onchange="uploadAvatar(this)">
                    
                    <div id="avatar-menu" class="hidden absolute top-full mt-2 left-0 bg-slate-900 border border-slate-700 rounded shadow-xl flex flex-col overflow-hidden min-w-[120px] z-50 fade-in">
                        <button onclick="actionReplace()" class="px-3 py-2 text-[10px] text-slate-300 hover:text-white hover:bg-slate-800 text-left border-b border-slate-800 transition w-full flex items-center gap-2">
                            <span>‚Üª</span> –ó–∞–º–µ–Ω–∏—Ç—å
                        </button>
                        <button onclick="actionDelete()" class="px-3 py-2 text-[10px] text-red-400 hover:text-red-300 hover:bg-slate-800 text-left transition w-full flex items-center gap-2">
                            <span>√ó</span> –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>

                <div class="flex-grow w-full sm:w-auto min-w-[150px] relative group">
                    <input type="text" id="char-name" value="–ò–º—è –ü–µ—Ä—Å–æ–Ω–∞–∂–∞" class="w-full bg-transparent border-none text-white font-bold text-lg px-1 sm:px-2 focus:ring-0 placeholder-slate-600 focus:text-yellow-400 transition-colors text-center sm:text-left">
                    <div class="absolute bottom-0 left-2 right-2 h-[1px] bg-slate-700 group-hover:bg-slate-500 transition-colors"></div>
                </div>
                
                <div class="flex flex-wrap items-center gap-2 w-full sm:w-auto">
                    <div class="flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-slate-900 rounded px-1 sm:px-2 py-1 border border-slate-800">
                        <label class="uppercase font-bold text-[10px] sm:text-xs text-slate-400">–†–∞—Å–∞</label>
                        <select id="gen-race" class="compact-select"></select>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-slate-900 rounded px-1 sm:px-2 py-1 border border-slate-800">
                        <label class="uppercase font-bold text-[10px] sm:text-xs text-slate-400">–ö–ª–∞—Å—Å</label>
                        <select id="gen-career" class="compact-select w-24"></select>
                        <select id="gen-spec" class="compact-select w-24 border-l border-slate-700 pl-2"></select>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-slate-900 rounded px-1 sm:px-2 py-1 border border-blue-900/30">
                        <label class="uppercase font-bold text-[10px] sm:text-xs text-blue-500">–°–∏–ª—ã</label>
                        <select id="force-p1" class="compact-select w-20" onchange="saveSession(); updateForceTabs()"></select>
                        <select id="force-p2" class="compact-select w-20 border-l border-slate-700 pl-2" onchange="saveSession(); updateForceTabs()"></select>
                    </div>
                </div>

                <div class="flex flex-wrap items-center justify-between sm:justify-end gap-2 w-full sm:w-auto mt-1 sm:mt-0">
                    
                    <div class="flex items-center gap-2 bg-slate-900 rounded px-2 py-1 border border-slate-800 flex-grow sm:flex-grow-0 min-w-[120px]">
                        <div class="flex flex-col gap-0.5 w-full">
                            <div class="flex justify-between items-end w-full">
                                <label class="uppercase font-bold text-[10px] sm:text-xs text-slate-400 leading-none">–ú–æ—Ä–∞–ª—å</label>
                                <span id="morality-status" class="text-[10px] uppercase font-bold text-slate-400 leading-none truncate max-w-[80px]">–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="number" id="morality-val" value="50" min="1" max="100" class="w-6 sm:w-8 bg-transparent text-xs text-center font-bold outline-none text-white border-b border-slate-700 focus:border-white transition-colors" onchange="updateMorality(this.value)">
                                <div class="w-full h-1.5 sm:h-2 bg-gradient-to-r from-red-950 via-red-900 to-red-700 rounded-full overflow-hidden border border-slate-700 relative shadow-inner shadow-red-950/50">
                                    <div class="absolute top-0 bottom-0 w-px bg-white/20 z-10" style="left: 30%"></div>
                                    <div class="absolute top-0 bottom-0 w-px bg-white/20 z-10" style="left: 70%"></div>
                                    <div id="morality-bar" class="h-full w-1/2 transition-all duration-500 ease-out bg-gradient-to-r from-blue-100 to-white shadow-[0_0_10px_rgba(255,255,255,0.7)]"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col justify-between bg-slate-900 rounded px-2 py-1 border border-slate-800 h-full min-w-[40px]">
                        <label class="uppercase font-bold text-[10px] sm:text-xs text-blue-400 leading-none text-center">–°–∏–ª–∞</label>
                        <div class="relative flex items-center justify-center h-full">
                             <svg class="absolute w-6 h-6 text-blue-500/20 pointer-events-none" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z"/></svg>
                             <input type="number" id="force-rating" value="1" min="0" max="10" class="relative z-10 w-8 bg-transparent text-center font-black text-white text-sm outline-none border-b border-transparent focus:border-blue-500 transition-colors" onchange="updateForce(this.value)">
                        </div>
                    </div>

                    <div class="flex items-center gap-2 bg-slate-900 rounded px-2 py-1 border border-slate-800 shadow-lg h-full relative group sm:ml-auto">
                        <div class="flex flex-col items-end mr-1 justify-center cursor-help relative">
                            <span class="text-[10px] uppercase font-bold text-slate-400 leading-none border-b border-dotted border-slate-600">XP</span>
                            <span class="text-[10px] text-slate-600 font-mono leading-none mt-0.5">–í—Å–µ–≥–æ: <span id="xp-total-display" class="text-slate-400">0</span></span>
                            <div id="xp-log-tooltip" class="hidden group-hover:block absolute top-full right-0 mt-2 w-32 bg-slate-950 border border-slate-700 rounded shadow-xl p-1 z-50 pointer-events-none sm:pointer-events-auto">
                                <div class="text-[10px] uppercase text-slate-400 font-bold mb-1 text-center border-b border-slate-800 pb-1">–ò—Å—Ç–æ—Ä–∏—è</div>
                                <ul id="xp-log-list" class="space-y-0.5 max-h-32 overflow-hidden"></ul>
                            </div>
                        </div>
                        <div class="text-2xl font-black text-yellow-500 leading-none drop-shadow-md" id="xp-avail-display">0</div>
                        <div class="flex items-center gap-1 bg-slate-950 rounded border border-slate-700 p-0.5 h-full">
                            <input type="number" id="xp-amount-input" class="w-8 bg-transparent text-center text-xs font-bold text-white outline-none placeholder-slate-700 h-full" placeholder="0">
                            <div class="flex flex-col justify-between h-full gap-px">
                                <button onclick="applyXP('add')" class="w-4 flex-1 bg-green-900/30 hover:bg-green-600 text-green-500 hover:text-white rounded-[1px] flex items-center justify-center text-[10px] leading-none transition" title="–ù–∞—á–∏—Å–ª–∏—Ç—å">+</button>
                                <button onclick="applyXP('spend')" class="w-4 flex-1 bg-red-900/30 hover:bg-red-600 text-red-500 hover:text-white rounded-[1px] flex items-center justify-center text-[10px] leading-none transition" title="–ü–æ—Ç—Ä–∞—Ç–∏—Ç—å">-</button>
                            </div>
                        </div>
                        <button onclick="undoLastXP()" id="btn-xp-undo" class="text-slate-600 hover:text-white transition disabled:opacity-20 ml-1 h-full flex items-center" disabled title="–û—Ç–º–µ–Ω–∏—Ç—å">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                        </button>
                    </div>

                    <div class="relative ml-auto pl-2 border-l border-slate-800 flex items-center">
    <button id="menu-btn" onclick="toggleSystemMenu(event)" 
            class="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white px-3 py-1.5 rounded border border-slate-700 transition shadow-sm active:scale-95 group">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
        <span class="text-[10px] font-bold uppercase hidden sm:inline group-hover:text-yellow-500 transition-colors">–ú–µ–Ω—é</span>
    </button>
    
    <div id="system-menu" class="hidden absolute right-0 top-full mt-2 w-48 bg-slate-900 border border-slate-700 rounded shadow-xl z-50 overflow-hidden fade-in ring-1 ring-black ring-opacity-5">
        
        <button onclick="saveCharacter(); closeSystemMenu()" class="w-full text-left px-4 py-3 text-[10px] uppercase font-bold text-slate-300 hover:text-white hover:bg-slate-800 border-b border-slate-800 flex items-center gap-3 transition-colors">
            <span class="text-green-500 text-sm">üíæ</span> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
        </button>
        
        <label class="w-full text-left px-4 py-3 text-[10px] uppercase font-bold text-slate-300 hover:text-white hover:bg-slate-800 border-b border-slate-800 flex items-center gap-3 cursor-pointer transition-colors">
            <span class="text-blue-500 text-sm">üìÇ</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
            <input type="file" onchange="loadCharacter(this); closeSystemMenu()" class="hidden" accept=".json">
        </label>
        
        <button onclick="window.print(); closeSystemMenu()" class="w-full text-left px-4 py-3 text-[10px] uppercase font-bold text-slate-300 hover:text-white hover:bg-slate-800 border-b border-slate-800 flex items-center gap-3 transition-colors">
            <span class="text-slate-400 text-sm">üñ®Ô∏è</span> –ü–µ—á–∞—Ç—å –ª–∏—Å—Ç–∞
        </button>
        
        <button onclick="resetDatabase(); closeSystemMenu()" class="w-full text-left px-4 py-3 text-[10px] uppercase font-bold text-red-400 hover:text-red-300 hover:bg-red-900/20 flex items-center gap-3 transition-colors">
            <span class="text-red-500 text-sm">‚ö†Ô∏è</span> –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
        </button>
    </div>
</div>

<script>
// === –õ–û–ì–ò–ö–ê –í–´–ë–û–†–ê 3-–• –ö–ê–†–¨–ï–†–ù–´–• –ù–ê–í–´–ö–û–í ===
        
    function toggleSystemMenu(e) {
        e.stopPropagation(); // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–ø–ª—ã—Ç–∏–µ –∫–ª–∏–∫–∞
        const menu = document.getElementById('system-menu');
        menu.classList.toggle('hidden');
    }

    function closeSystemMenu() {
        document.getElementById('system-menu').classList.add('hidden');
    }

    // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ —ç–∫—Ä–∞–Ω–∞
    window.addEventListener('click', (e) => {
        const menu = document.getElementById('system-menu');
        const btn = document.getElementById('menu-btn');
        
        // –ï—Å–ª–∏ –º–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ –ò –∫–ª–∏–∫ –±—ã–ª –ù–ï –ø–æ –º–µ–Ω—é –ò –ù–ï –ø–æ –∫–Ω–æ–ø–∫–µ –æ—Ç–∫—Ä—ã—Ç–∏—è
        if (!menu.classList.contains('hidden') && !menu.contains(e.target) && !btn.contains(e.target)) {
            closeSystemMenu();
        }
    });
</script>
                           
                </div>
            </div>
            
            <div class="flex justify-center sm:justify-between items-center px-1 mt-1">
                <div id="gen-race-info" class="text-xs text-yellow-500/70 truncate max-w-full sm:max-w-md text-center sm:text-left"></div>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-7xl mx-auto w-full p-2 sm:p-4 relative space-y-6 sm:space-y-8">
        
        <div id="tab-talents" class="hidden fade-in space-y-4">
            
            <details class="bg-slate-900 border border-slate-800 rounded px-2 py-1 cursor-pointer group select-none">
                <summary class="text-[10px] font-bold text-slate-400 uppercase tracking-widest hover:text-yellow-500 transition flex items-center gap-2">
                    <svg class="w-3 h-3 transition-transform group-open:rotate-90" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    –°–ø—Ä–∞–≤–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª–∞–º
                </summary>
                <div class="mt-2 grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs border-t border-slate-800 pt-2 pb-1">
                    <div class="flex items-center gap-1.5"><img src="icons/boost.svg" class="dice-icon"> <span class="text-slate-400">–£—Å–∏–ª–µ–Ω–∏–µ (Boost)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/setback.svg" class="dice-icon"> <span class="text-slate-400">–ù–µ—É–¥–∞—á–∞ (Setback)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/ability.svg" class="dice-icon"> <span class="text-slate-400">–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (Ability)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/difficulty.svg" class="dice-icon"> <span class="text-slate-400">–°–ª–æ–∂–Ω–æ—Å—Ç—å (Diff)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/prof.svg" class="dice-icon"> <span class="text-slate-400">–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ (Prof)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/challenge.svg" class="dice-icon"> <span class="text-slate-400">–í—ã–∑–æ–≤ (Challenge)</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/force.svg" class="dice-icon"> <span class="text-slate-400">–ö—É–± –°–∏–ª—ã</span></div>
                    
                    <div class="col-span-2 sm:col-span-4 h-px bg-slate-800 my-1"></div>
                    
                    <div class="flex items-center gap-1.5"><img src="icons/success.svg" class="dice-icon"> <span class="text-slate-400">–£—Å–ø–µ—Ö</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/advantage.svg" class="dice-icon"> <span class="text-slate-400">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/triumph.svg" class="dice-icon"> <span class="text-slate-400">–¢—Ä–∏—É–º—Ñ</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/failure.svg" class="dice-icon"> <span class="text-slate-400">–ü—Ä–æ–≤–∞–ª</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/threat.svg" class="dice-icon"> <span class="text-slate-400">–£–≥—Ä–æ–∑–∞</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/despair.svg" class="dice-icon"> <span class="text-slate-400">–û—Ç—á–∞—è–Ω–∏–µ</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/light.svg" class="dice-icon"> <span class="text-slate-400">–°–≤–µ—Ç–ª–∞—è —Å—Ç–æ—Ä–æ–Ω–∞</span></div>
                    <div class="flex items-center gap-1.5"><img src="icons/dark.svg" class="dice-icon"> <span class="text-slate-400">–¢—ë–º–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞</span></div>
                </div>
            </details>
                        <div class="flex justify-between items-center bg-slate-900 p-2 rounded border border-slate-800">
                <h2 id="talent-tree-title" class="text-xs uppercase font-bold text-slate-400 tracking-widest">–î–µ—Ä–µ–≤–æ —Ç–∞–ª–∞–Ω—Ç–æ–≤</h2>
                <div class="text-[10px] text-slate-400">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ XP: <span id="talent-xp-spent" class="text-white font-bold">0</span></div>
            </div>
<div class="flex justify-center gap-2 mb-2" id="tree-switch-container">
                <button onclick="switchTreeMode('spec')" id="btn-tree-spec" class="px-4 py-1.5 rounded text-[10px] font-bold uppercase transition bg-yellow-600 text-white shadow-lg border border-yellow-500">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</button>
                <button onclick="switchTreeMode('force1')" id="btn-tree-f1" class="hidden px-4 py-1.5 rounded text-[10px] font-bold uppercase transition bg-slate-800 text-slate-400 border border-slate-700 hover:bg-slate-700 hover:text-white">–°–∏–ª–∞ 1</button>
                <button onclick="switchTreeMode('force2')" id="btn-tree-f2" class="hidden px-4 py-1.5 rounded text-[10px] font-bold uppercase transition bg-slate-800 text-slate-400 border border-slate-700 hover:bg-slate-700 hover:text-white">–°–∏–ª–∞ 2</button>
            </div>
            <div class="overflow-x-auto pb-4">
                <div id="talent-tree-container" class="grid grid-cols-4 gap-4 min-w-[600px] mx-auto max-w-4xl relative p-4"></div>
            </div>
        </div>

        <div id="tab-generator" class="fade-in space-y-6 sm:space-y-8">
            
            <div>
                <div class="section-divider"><span class="section-title">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</span></div>
                <div id="gen-stats-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3"></div>
            </div>

            <div>
                <div class="section-divider"><span class="section-title">–°–æ—Å—Ç–æ—è–Ω–∏–µ</span></div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                    <div id="card-wounds" class="bg-slate-900 p-3 rounded border border-red-900/30 flex flex-col justify-between h-36 sm:h-40 relative overflow-hidden shadow-lg shadow-black/20"></div>
                    <div id="card-strain" class="bg-slate-900 p-3 rounded border border-blue-900/30 flex flex-col justify-between h-36 sm:h-40 relative overflow-hidden shadow-lg shadow-black/20"></div>
                    <div class="bg-slate-900 p-2 rounded border border-slate-700 shadow-lg shadow-black/20 h-36 sm:h-40 grid grid-cols-5 gap-2 relative overflow-hidden">
                        <div class="col-span-2 flex flex-col justify-between border-r border-slate-800 pr-2">
                            <div class="flex justify-between items-start">
                                <div class="text-xs uppercase font-bold text-slate-400 tracking-wider leading-tight">–ü–æ–≥–ª–æ—â–µ–Ω–∏–µ</div>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-600"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                            </div>
                            <div class="flex-grow flex items-center justify-center">
                                 <div class="text-4xl sm:text-5xl font-black text-white" id="val-soak">0</div>
                            </div>
                            <div class="text-center">
                                <label class="text-[10px] uppercase font-bold text-slate-400 block mb-0.5">–ë—Ä–æ–Ω—è</label>
                                <input type="number" id="val-armor" value="0" min="0" class="w-full bg-slate-950 border border-slate-600 rounded p-0.5 text-center text-xs text-white focus:border-yellow-500 outline-none transition-colors">
                            </div>
                        </div>
                        <div class="col-span-3 flex flex-col h-full relative">
                            <div class="flex justify-between items-center mb-1">
                                <div class="text-xs uppercase font-bold text-red-500 tracking-wider">–ö—Ä–∏—Ç. –†–∞–Ω—ã</div>
                                <button onclick="addCrit()" class="w-4 h-4 bg-red-900/30 hover:bg-red-500 text-red-500 hover:text-white rounded flex items-center justify-center text-[10px] transition font-bold" title="–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–Ω—É">+</button>
                            </div>
                            <div id="crit-list" class="flex-col gap-1 overflow-y-auto custom-scrollbar h-full pr-1 space-y-1"></div>
                            <div id="crit-empty" class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-20">
                                <svg class="w-10 h-10 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <div class="section-divider">
                    <span class="section-title">–ù–∞–≤—ã–∫–∏ 
                        <span class="text-[10px] text-slate-600 ml-2 font-normal font-sans border border-slate-800 px-1 rounded bg-slate-900/50">
                            –†–∞–Ω–≥–æ–≤: <span id="total-ranks-display" class="text-yellow-500 font-bold">0</span>
                        </span>
                    </span>
                </div>
                
                <div id="skill-mobile-tabs" class="flex lg:hidden bg-slate-900 rounded p-1 border border-slate-800 mb-2">
                    <button onclick="toggleMobileSkills('gen')" id="tab-btn-gen" class="flex-1 py-1.5 text-[10px] font-bold uppercase rounded bg-slate-700 text-white shadow transition">–û–±—â–∏–µ</button>
                    <button onclick="toggleMobileSkills('com')" id="tab-btn-com" class="flex-1 py-1.5 text-[10px] font-bold uppercase rounded hover:bg-slate-800 text-slate-400 transition">–ë–æ–µ–≤—ã–µ</button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 h-auto min-h-[600px] lg:h-[calc(100vh-500px)]">
                    <div id="view-skills-gen" class="lg:col-span-2 bg-slate-900 rounded border border-slate-800 flex flex-col overflow-hidden shadow-lg shadow-black/20 h-[400px] lg:h-auto block lg:flex">
                        <div class="bg-slate-950 border-b border-slate-800 flex items-center text-[10px] uppercase font-bold text-slate-400 sticky top-0 z-10 h-9 pr-2">
                            <div class="w-6 text-center flex-shrink-0"></div> <div class="flex-grow px-2 flex items-center gap-3">
                                <span class="text-slate-400 text-[10px] tracking-widest">–û–±—â–∏–µ</span>
                                <div class="flex gap-2 opacity-50 font-normal">
                                    <span class="text-green-500 flex items-center gap-0.5"><span class="border border-green-900 bg-green-900/20 w-3 h-3 flex items-center justify-center rounded-[1px] text-[6px]">–ö</span></span>
                                    <span class="text-blue-400 flex items-center gap-0.5"><span class="border border-blue-900 bg-blue-900/20 w-3 h-3 flex items-center justify-center rounded-[1px] text-[6px]">–°</span></span>
                                </div>
                            </div>
                            <div class="w-20 pl-2 flex-shrink-0">–†–∞–Ω–≥</div>
                            <div class="w-24 text-right pr-4 flex-shrink-0">–ü—É–ª</div>
                        </div>
                        <div class="overflow-y-auto flex-grow custom-scrollbar">
                            <table class="w-full text-xs text-left border-collapse">
                                <tbody id="gen-skills-general-body" class="divide-y divide-slate-800/50"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="view-skills-com" class="bg-slate-900 rounded border border-slate-800 flex flex-col overflow-hidden shadow-lg shadow-black/20 h-auto lg:h-auto hidden lg:flex">
                        <div class="bg-red-950/20 border-b border-red-900/20 flex items-center text-[10px] uppercase font-bold text-red-400/70 sticky top-0 z-10 h-9 pr-2">
                            <div class="w-6 text-center flex-shrink-0"></div>
                            <div class="flex-grow px-2 flex items-center gap-2">
                                <span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span>
                                <span class="tracking-widest text-[10px] text-red-400">–ë–æ–µ–≤—ã–µ</span>
                            </div>
                            <div class="w-20 pl-2 flex-shrink-0">–†–∞–Ω–≥</div>
                            <div class="w-24 text-right pr-4 flex-shrink-0">–ü—É–ª</div>
                        </div>
                        <div class="overflow-y-auto flex-grow custom-scrollbar">
                            <table class="w-full text-xs text-left border-collapse">
                                <tbody id="gen-skills-combat-body" class="divide-y divide-slate-800/50"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div> </div> <div id="tab-editor" class="hidden fade-in h-full">
            <div class="flex flex-col sm:flex-row justify-between items-center bg-slate-900 p-2 rounded border border-slate-800 mb-4 gap-2">
                <div class="flex gap-2 w-full sm:w-auto">
                    <button onclick="setEditorMode('races')" id="btn-edit-races" class="flex-1 sm:flex-none px-3 py-1 text-xs font-bold uppercase rounded bg-yellow-600 text-white">–†–∞—Å—ã</button>
                    <button onclick="setEditorMode('careers')" id="btn-edit-careers" class="flex-1 sm:flex-none px-3 py-1 text-xs font-bold uppercase rounded bg-slate-800 hover:bg-slate-700 text-slate-300">–ö–∞—Ä—å–µ—Ä—ã</button>
                </div>
                <div class="flex gap-2 w-full sm:w-auto justify-end">
                    <button onclick="resetDatabase()" class="text-[10px] text-red-500 hover:text-red-400 underline px-2">–°–ë–†–û–° –ë–ê–ó–´</button>
                    <button onclick="exportData()" class="px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded text-[10px] text-white border border-slate-700">–°–∫–∞—á–∞—Ç—å</button>
                    <label class="px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded text-[10px] text-white border border-slate-700 cursor-pointer">–ó–∞–≥—Ä—É–∑–∏—Ç—å <input type="file" onchange="importData(this)" class="hidden" accept=".json"></label>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 h-[calc(100vh-200px)]">
                <div class="bg-slate-900 border border-slate-800 rounded flex flex-col h-[300px] lg:h-auto">
                    <div class="p-2 border-b border-slate-800 flex justify-between items-center bg-slate-950">
                        <h3 class="text-xs font-bold uppercase text-slate-400" id="editor-list-title">–°–ø–∏—Å–æ–∫</h3>
                        <button onclick="addNewItem()" class="w-5 h-5 bg-green-700 hover:bg-green-600 rounded text-white flex items-center justify-center font-bold text-xs">+</button>
                    </div>
                    <div id="editor-list" class="flex-grow overflow-y-auto p-2 space-y-1"></div>
                </div>
                <div class="lg:col-span-2 bg-slate-900 border border-slate-800 rounded p-4 overflow-y-auto relative h-auto">
                    <div id="editor-form-placeholder" class="h-full flex flex-col items-center justify-center text-slate-600 text-sm"><p>–í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç</p></div>
                    <form id="editor-form" class="hidden space-y-4" onsubmit="event.preventDefault(); saveCurrentItem();">
                        <input type="hidden" id="edit-id">
                        <div><label class="block text-[10px] uppercase font-bold text-slate-400">–ù–∞–∑–≤–∞–Ω–∏–µ</label><input type="text" id="edit-name" class="w-full bg-slate-950 border border-slate-700 rounded p-2 focus:border-yellow-500 outline-none text-sm text-white" required></div>
                        <div id="form-race-fields" class="hidden space-y-4">
                             <div class="grid grid-cols-3 sm:grid-cols-6 gap-2 text-center">
                                <div class="space-y-1"><label class="text-xs text-red-400 font-bold">–°–ò–õ</label><input type="number" min="1" max="6" id="edit-brawn" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                                <div class="space-y-1"><label class="text-xs text-green-400 font-bold">–õ–û–í</label><input type="number" min="1" max="6" id="edit-agility" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                                <div class="space-y-1"><label class="text-xs text-blue-400 font-bold">–ò–ù–¢</label><input type="number" min="1" max="6" id="edit-intellect" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                                <div class="space-y-1"><label class="text-xs text-yellow-400 font-bold">–°–ú–ö</label><input type="number" min="1" max="6" id="edit-cunning" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                                <div class="space-y-1"><label class="text-xs text-purple-400 font-bold">VOL</label><input type="number" min="1" max="6" id="edit-willpower" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                                <div class="space-y-1"><label class="text-xs text-pink-400 font-bold">HAR</label><input type="number" min="1" max="6" id="edit-presence" class="w-full bg-slate-950 border border-slate-700 p-1 text-center rounded text-sm"></div>
                            </div>
                            <div class="grid grid-cols-3 gap-2">
                                <div><label class="text-xs text-slate-400 block">–†–∞–Ω—ã</label><input type="number" id="edit-baseWounds" class="w-full bg-slate-950 border border-slate-700 p-1 rounded text-sm"></div>
                                <div><label class="text-xs text-slate-400 block">–£—Å—Ç–∞–ª–æ—Å—Ç—å</label><input type="number" id="edit-baseStrain" class="w-full bg-slate-950 border border-slate-700 p-1 rounded text-sm"></div>
                                <div><label class="text-xs text-slate-400 block">XP</label><input type="number" id="edit-startXP" class="w-full bg-slate-950 border border-slate-700 p-1 rounded text-sm"></div>
                            </div>
                            <div><label class="text-xs text-slate-400 block">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</label><textarea id="edit-special" class="w-full bg-slate-950 border border-slate-700 p-2 rounded h-16 text-xs"></textarea></div>
                        </div>
                        <div id="form-career-fields" class="hidden space-y-4">
                            <div><label class="block text-[10px] uppercase font-bold text-slate-400 mb-1">–ù–∞–≤—ã–∫–∏</label><div id="edit-career-skills-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-1 text-[10px] bg-slate-950 p-2 rounded border border-slate-800 max-h-32 overflow-y-auto"></div></div>
                            <div class="border-t border-slate-800 pt-2"><div class="flex justify-between items-center mb-1"><label class="block text-[10px] uppercase font-bold text-slate-300">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</label><button type="button" onclick="addSpecialization()" class="text-xs bg-blue-700 hover:bg-blue-600 px-2 py-0.5 rounded text-white">Add</button></div><div id="specs-container" class="space-y-2"></div></div>
                        </div>
                        <div class="flex justify-end pt-2 border-t border-slate-800 gap-2"><button type="button" onclick="deleteCurrentItem()" class="px-3 py-1 text-red-500 hover:text-red-400 text-xs">–£–¥–∞–ª–∏—Ç—å</button><button type="submit" class="px-4 py-1 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded text-xs">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button></div>
                    </form>
                </div>
            </div>
        </div>

    </main>

    <!-- JS LOGIC -->
    <script>
// === –ë–ê–ó–ê –î–ê–ù–ù–´–• –¢–ê–õ–ê–ù–¢–û–í (–° –¶–í–ï–¢–ù–´–ú–ò –ö–£–ë–ò–ö–ê–ú–ò) ===
const TALENTS_DB = {
    // === –ú–ò–°–¢–ò–ö: –ü–†–û–í–ò–î–ï–¶ (SEER) ===
    "seer": [
        // --- –†–Ø–î 1 ---
        { id: "seer_1_1", row: 1, col: 1, cost: 5, name: "Forage", passive: true, desc: "–£–±–∏—Ä–∞–µ—Ç [SE][SE] —Å –ø–æ–∏—Å–∫–∞ –µ–¥—ã/–≤–æ–¥—ã. –í—ã–∂–∏–≤–∞–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç -50% –≤—Ä–µ–º–µ–Ω–∏.", links: [] },
        { id: "seer_1_2", row: 1, col: 2, cost: 5, name: "Uncanny Reactions", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.", links: ["down"] },
        { id: "seer_1_3", row: 1, col: 3, cost: 5, name: "Grit", passive: true, desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", links: [] },
        { id: "seer_1_4", row: 1, col: 4, cost: 5, name: "Expert Tracker", passive: true, desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Å–ª–µ–¥–æ–≤. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", links: ["down"] },
        // --- –†–Ø–î 2 ---
        { id: "seer_2_1", row: 2, col: 1, cost: 10, name: "Rapid Reaction", passive: true, desc: "–ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ø–µ—Ö–∏ –∫ –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ (–º–∞–∫—Å = —Ä–∞–Ω–≥).", links: ["down", "right"] },
        { id: "seer_2_2", row: 2, col: 2, cost: 10, name: "Keen Eyed", passive: true, desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∏–∑ –í–Ω–∏–º–∞–Ω–∏—è/–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏. –ü–æ–∏—Å–∫ –∑–∞–Ω–∏–º–∞–µ—Ç -50% –≤—Ä–µ–º–µ–Ω–∏.", links: ["left", "down", "right"] },
        { id: "seer_2_3", row: 2, col: 3, cost: 10, name: "Uncanny Reactions", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.", links: ["left", "down"] },
        { id: "seer_2_4", row: 2, col: 4, cost: 10, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["down"] },
        // --- –†–Ø–î 3 ---
        { id: "seer_3_1", row: 3, col: 1, cost: 15, name: "Sense Danger", passive: false, desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é —É–±–µ—Ä–∏—Ç–µ [SE][SE] –∏–∑ –ª—é–±–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.", links: ["down", "right"] },
        { id: "seer_3_2", row: 3, col: 2, cost: 15, name: "Grit", passive: true, desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", links: ["left", "down", "right" ] },
        { id: "seer_3_3", row: 3, col: 3, cost: 15, name: "Forewarning", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –í—Å–µ —Å–æ—é–∑–Ω–∏–∫–∏ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –ø–æ–ª—É—á–∞—é—Ç –ó–∞—â–∏—Ç—É = –°–∏–ª–∞.", links: ["left", "down"] },
        { id: "seer_3_4", row: 3, col: 4, cost: 15, name: "Preemptive Avoidance", passive: false, desc: "–ú–æ–∂–µ—à—å –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å 1 –∂–µ—Ç–æ–Ω —Å—É–¥—å–±—ã –∏ –≤—ã–π—Ç–∏ –∏–∑ –±–æ—è —Å–≤–æ–±–æ–¥–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º.", links: ["down"] },
        // --- –†–Ø–î 4 ---
        { id: "seer_4_1", row: 4, col: 1, cost: 20, name: "Force Rating", passive: true, desc: "+1 –∫ —Ä–∞–Ω–≥—É –°–∏–ª—ã.", links: ["down", "right"] },
        { id: "seer_4_2", row: 4, col: 2, cost: 20, name: "Sense Advantage", passive: false, desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é –º–æ–∂–µ—à—å —É–±—Ä–∞—Ç—å [SE][SE] –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –°–∏–ª—ã –∫–∞–∫ –º–∞–Ω–µ–≤—Ä.", links: ["left", "down", "right"] },
        { id: "seer_4_3", row: 4, col: 3, cost: 20, name: "The Force Is My Ally", passive: false, desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ø–æ–ª—É—á–∏—Ç–µ 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –°–∏–ª—É –∫–∞–∫ –º–∞–Ω–µ–≤—Ä.", links: ["left", "down"] },
        { id: "seer_4_4", row: 4, col: 4, cost: 20, name: "Dodge", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ –∂–µ.", links: [] },
        // --- –†–Ø–î 5 ---
        { id: "seer_5_1", row: 5, col: 1, cost: 25, name: "Rapid Reaction", passive: true, desc: "–ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, –ø—Ä–∏–±–∞–≤—å—Ç–µ —Å—Ç–æ–ª—å–∫–æ –∂–µ —É—Å–ø–µ—Ö–æ–≤ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã.", links: ["right"] },
        { id: "seer_5_2", row: 5, col: 2, cost: 25, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["left", "right"] },
        { id: "seer_5_3", row: 5, col: 3, cost: 25, name: "Natural Mystic", passive: false, desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é –ø–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –°–∏–ª—ã.", links: ["left", "right"] },
        { id: "seer_5_4", row: 5, col: 4, cost: 25, name: "Force Rating", passive: true, desc: "+1 –∫ —Ä–∞–Ω–≥—É –°–∏–ª—ã.", links: [] }
    ],
// === –ò–©–ï–ô–ö–ê: –ê–¢–ê–†–£ (ATARU) ===
    "ataru": [
        // --- –†–Ø–î 1 ---
        { id: "ataru_1_1", row: 1, col: 1, cost: 5, name: "Conditioned", passive: true, desc: "–£–±–∏—Ä–∞–π—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ê—Ç–ª–µ—Ç–∏–∫–∏/–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–Ω/—É—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç –ø–∞–¥–µ–Ω–∏—è.", links: ["down"] },
        { id: "ataru_1_2", row: 1, col: 2, cost: 5, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        { id: "ataru_1_3", row: 1, col: 3, cost: 5, name: "Jump Up", passive: false, desc: "–†–∞–∑ –≤ —Ä–∞—É–Ω–¥: –í—Å—Ç–∞—Ç—å –∏–∑ –ø–æ–ª–æ–∂–µ–Ω–∏—è –ª–µ–∂–∞/–Ω–∏—á–∫–æ–º —Å–≤–æ–±–æ–¥–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º.", links: ["down"] },
        { id: "ataru_1_4", row: 1, col: 4, cost: 5, name: "Quick Draw", passive: false, desc: "–†–∞–∑ –≤ —Ä–∞—É–Ω–¥: –î–æ—Å—Ç–∞—Ç—å –æ—Ä—É–∂–∏–µ –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º.", links: ["down"] },
        // --- –†–Ø–î 2 ---
        { id: "ataru_2_1", row: 2, col: 1, cost: 10, name: "Dodge", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ö–æ–≥–¥–∞ —Ü–µ–ª—å –∞—Ç–∞–∫–∏ ‚Äî –ø–æ–ª—É—á–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ –∂–µ.", links: ["down"] },
        { id: "ataru_2_2", row: 2, col: 2, cost: 10, name: "Reflect", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "right"] },
        { id: "ataru_2_3", row: 2, col: 3, cost: 10, name: "Ataru Technique", passive: true, desc: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –õ–æ–≤–∫–æ—Å—Ç—å –≤–º–µ—Å—Ç–æ –§–∏–∑. —Å–∏–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞.", links: ["left", "down"] },
        { id: "ataru_2_4", row: 2, col: 4, cost: 10, name: "Quick Strike", passive: true, desc: "–î–æ–±–∞–≤—å [BO] –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ —Ö–æ–¥–∏–ª–∏ –≤ —ç—Ç–æ–π —Å—Ü–µ–Ω–µ.", links: [] },
        // --- –†–Ø–î 3 ---
        { id: "ataru_3_1", row: 3, col: 1, cost: 15, name: "Quick Strike", passive: true, desc: "–î–æ–±–∞–≤—å [BO] –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ —Ö–æ–¥–∏–ª–∏ –≤ —ç—Ç–æ–π —Å—Ü–µ–Ω–µ.", links: ["down"] },
        { id: "ataru_3_2", row: 3, col: 2, cost: 15, name: "Reflect", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "right"] },
        { id: "ataru_3_3", row: 3, col: 3, cost: 15, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down", "right"] },
        { id: "ataru_3_4", row: 3, col: 4, cost: 15, name: "Improved Parry", passive: true, desc: "–ü—Ä–∏ –ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞ –¥–∞–ª–∞ [DE] –∏–ª–∏ 3 [TH], –Ω–∞–Ω–µ—Å–∏ –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω) –ø–æ—Å–ª–µ –µ–≥–æ –∞—Ç–∞–∫–∏.", links: ["down"] },
        // --- –†–Ø–î 4 ---
        { id: "ataru_4_1", row: 4, col: 1, cost: 20, name: "Dodge", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —É–≤–µ–ª–∏—á—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥—è—â–µ–π –∞—Ç–∞–∫–∏ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ –∂–µ.", links: ["down"] },
        { id: "ataru_4_2", row: 4, col: 2, cost: 20, name: "Hawk Bat Swoop", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –ú–µ—á–æ–º. –î–æ–±–∞–≤—å –∫—É–±—ã –°–∏–ª—ã. –ó–∞ 1 [LS] –º–æ–∂–Ω–æ —Å–±–ª–∏–∑–∏—Ç—å—Å—è —Å —Ü–µ–ª—å—é –ø–µ—Ä–µ–¥ –∞—Ç–∞–∫–æ–π. –û—Å—Ç–∞–ª—å–Ω—ã–µ [LS] –¥–∞—é—Ç [AD].", links: ["down"] },
        { id: "ataru_4_3", row: 4, col: 3, cost: 20, name: "Saber Swarm", passive: false, desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å. –°–ª–µ–¥—É—é—â–∞—è –∞—Ç–∞–∫–∞ –ú–µ—á–æ–º –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ '–°–ø–∞—Ä–µ–Ω–Ω–æ–µ' (Linked) —Å —Ä–∞–Ω–≥–æ–º = —Ä–∞–Ω–≥ –°–∏–ª—ã.", links: ["down", "right"] },
        { id: "ataru_4_4", row: 4, col: 4, cost: 20, name: "Conditioned", passive: true, desc: "–£–±–∏—Ä–∞–π—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ê—Ç–ª–µ—Ç–∏–∫–∏/–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–Ω –æ—Ç –ø–∞–¥–µ–Ω–∏—è.", links: ["left", "down"] },
        // --- –†–Ø–î 5 ---
        { id: "ataru_5_1", row: 5, col: 1, cost: 25, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["right"] },
        { id: "ataru_5_2", row: 5, col: 2, cost: 25, name: "Dedication", passive: true, desc: "+1 –∫ –ª—é–±–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", links: ["left", "right"] },
        { id: "ataru_5_3", row: 5, col: 3, cost: 25, name: "Saber Throw", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –ú–µ—á–æ–º (—Å—Ä–µ–¥–Ω—è—è). –î–æ–±–∞–≤—å –∫—É–±—ã –°–∏–ª—ã –∫ —É—Ä–æ–Ω—É. –ó–∞ 1 [LS] –º–µ—á –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä—É–∫—É.", links: ["left"] },
        { id: "ataru_5_4", row: 5, col: 4, cost: 25, name: "Balance", passive: false, desc: "–ö–æ–Ω–µ—Ü —Å—Ü–µ–Ω—ã: –î–æ–±–∞–≤—å –∫—É–±—ã –°–∏–ª—ã –∫ –≤–æ—Å—Å—Ç. –£—Å—Ç–∞–ª–æ—Å—Ç–∏. –ö–∞–∂–¥—ã–π [LS] –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1 –¥–æ–ø. —É—Å—Ç–∞–ª–æ—Å—Ç—å.", links: [] },
    ],
"healer": [
        // --- –†–Ø–î 1 ---
        { id: "healer_1_1", row: 1, col: 1, cost: 5, name: "Surgeon", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–Ω, —Ü–µ–ª—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç +1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "healer_1_2", row: 1, col: 2, cost: 5, name: "Healing Trance", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π 1 –∫—É–±–∏–∫ –°–∏–ª—ã ([FO]). –í –∫–æ–Ω—Ü–µ —Å—Ü–µ–Ω—ã –≤–µ—Ä–Ω–∏ –µ–≥–æ –∏ –≤—ã–ª–µ—á–∏ 1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "healer_1_3", row: 1, col: 3, cost: 5, name: "Rapid Recovery", passive: true, desc: "–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã –ª–µ—á–∏—Ç–µ +1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "healer_1_4", row: 1, col: 4, cost: 5, name: "Physician", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –ª–µ—á–µ–Ω–∏—è —Ä–∞–Ω —Ü–µ–ª—å —Ç–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        // --- –†–Ø–î 2 ---
        { id: "healer_2_1", row: 2, col: 1, cost: 10, name: "Physician", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –ª–µ—á–µ–Ω–∏—è —Ä–∞–Ω —Ü–µ–ª—å —Ç–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "right"] },
        { id: "healer_2_2", row: 2, col: 2, cost: 10, name: "Physician", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –ª–µ—á–µ–Ω–∏—è —Ä–∞–Ω —Ü–µ–ª—å —Ç–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "left"] },
        { id: "healer_2_3", row: 2, col: 3, cost: 10, name: "Grit", passive: true, desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", links: ["right"] },
        { id: "healer_2_4", row: 2, col: 4, cost: 10, name: "Healing Trance", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π 1 –∫—É–±–∏–∫ –°–∏–ª—ã ([FO]). –í –∫–æ–Ω—Ü–µ —Å—Ü–µ–Ω—ã –≤–µ—Ä–Ω–∏ –µ–≥–æ –∏ –≤—ã–ª–µ—á–∏ 1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        // --- –†–Ø–î 3 ---
        { id: "healer_3_1", row: 3, col: 1, cost: 15, name: "Healing Trance", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π 1 –∫—É–±–∏–∫ –°–∏–ª—ã ([FO]). –í –∫–æ–Ω—Ü–µ —Å—Ü–µ–Ω—ã –≤–µ—Ä–Ω–∏ –µ–≥–æ –∏ –≤—ã–ª–µ—á–∏ 1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "right"] },
        { id: "healer_3_2", row: 3, col: 2, cost: 15, name: "Grit", passive: true, desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", links: ["left", "down", "right"] },
        { id: "healer_3_3", row: 3, col: 3, cost: 15, name: "Knowledgeable Healing", passive: false, desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –ü—Ä–∏ –ª–µ—á–µ–Ω–∏–∏ —Å–æ—é–∑–Ω–∏–∫–∞ –ø–µ—Ä–µ–≤–µ—Ä–Ω–∏ –û—á–∫–æ –°—É–¥—å–±—ã, —á—Ç–æ–±—ã –≤—ã–ª–µ—á–∏—Ç—å –¥–æ–ø. —Ä–∞–Ω—ã = —Ä–∞–Ω–≥ –ó–Ω–∞–Ω–∏—è (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è).", links: ["left", "down"] },
        { id: "healer_3_4", row: 3, col: 4, cost: 15, name: "Rapid Recovery", passive: true, desc: "–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã –ª–µ—á–∏—Ç–µ +1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        // --- –†–Ø–î 4 ---
        { id: "healer_4_1", row: 4, col: 1, cost: 20, name: "Surgeon", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–Ω, —Ü–µ–ª—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç +1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "healer_4_2", row: 4, col: 2, cost: 20, name: "Improved Healing Trance", passive: true, desc: "–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Healing Trance –º–æ–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –°—Ç–æ–π–∫–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã–ª–µ—á–∏—Ç—å –ö—Ä–∏—Ç. —Ä–∞–Ω—É.", links: [] },
        { id: "healer_4_3", row: 4, col: 3, cost: 20, name: "Calming Aura", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ö–æ–≥–¥–∞ –≤—Ä–∞–≥ —Ü–µ–ª–∏—Ç—Å—è –≤ –≤–∞—Å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –°–∏–ª—ã, —É–º–µ–Ω—å—à–∏—Ç–µ –µ–≥–æ –ø—É–ª –æ—á–∫–æ–≤ –°–∏–ª—ã –Ω–∞ 1.", links: ["down"] },
        { id: "healer_4_4", row: 4, col: 4, cost: 20, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: [] },
        // --- –†–Ø–î 5 ---
        { id: "healer_5_1", row: 5, col: 1, cost: 25, name: "Dedication", passive: true, desc: "–£–≤–µ–ª–∏—á—å—Ç–µ –æ–¥–Ω—É –∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –Ω–∞ 1 (–º–∞–∫—Å. 6).", links: ["right"] },
        { id: "healer_5_2", row: 5, col: 2, cost: 25, name: "Natural Doctor", passive: false, desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –≤ —Å–µ—Å—Å–∏—é –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –æ–¥–Ω—É –ø—Ä–æ–≤–µ—Ä–∫—É –ú–µ–¥–∏—Ü–∏–Ω—ã.", links: ["left", "right"] },
        { id: "healer_5_3", row: 5, col: 3, cost: 25, name: "Force Rating", passive: true, desc: "+1 –∫ —Ä–∞–Ω–≥—É –°–∏–ª—ã.", links: ["left", "right"] },
        { id: "healer_5_4", row: 5, col: 4, cost: 25, name: "Improved Calming Aura", passive: false, desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —á—Ç–æ–±—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å Calming Aura –Ω–∞ —Å–æ—é–∑–Ω–∏–∫–æ–≤ (–∫–æ–ª-–≤–æ = –í–æ–ª—è) –≤ –∫–æ—Ä. –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏.", links: ["left"] }
    ],
// === –ö–û–ù–°–£–õ: –£–ß–ï–ù–ò–ö –ù–ò–ú–ê–ù–ê (NIMAN) ===
    "niman": [
        // --- –†–Ø–î 1 ---
        { id: "niman_1_1", row: 1, col: 1, cost: 5, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        { id: "niman_1_2", row: 1, col: 2, cost: 5, name: "Nobody‚Äôs Fool", passive: true, desc: "–ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –û–±–∞—è–Ω–∏—è, –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –∏–ª–∏ –û–±–º–∞–Ω–∞ –ø—Ä–æ—Ç–∏–≤ –≤–∞—Å (1 —Ä–∞–∑ –∑–∞ —Ä–∞–Ω–≥).", links: ["down"] },
        { id: "niman_1_3", row: 1, col: 3, cost: 5, name: "Reflect", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "niman_1_4", row: 1, col: 4, cost: 5, name: "Grit", passive: true, desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", links: ["down"] },
        // --- –†–Ø–î 2 ---
        { id: "niman_2_1", row: 2, col: 1, cost: 10, name: "Defensive Training", passive: true, desc: "–°–≤–µ—Ç–æ–≤—ã–µ –º–µ—á–∏, –†—É–∫–æ–ø–∞—à–Ω–∞—è –∏ –•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ –ø–æ–ª—É—á–∞—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ –ó–∞—â–∏—Ç–Ω–æ–µ (—Ä–µ–π—Ç–∏–Ω–≥ = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞).", links: ["right", "down"] },
        { id: "niman_2_2", row: 2, col: 2, cost: 10, name: "Niman Technique", passive: true, desc: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–æ–ª—é –≤–º–µ—Å—Ç–æ –°–∏–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞.", links: ["left", "down"] },
        { id: "niman_2_3", row: 2, col: 3, cost: 10, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["down"] },
        { id: "niman_2_4", row: 2, col: 4, cost: 10, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        // --- –†–Ø–î 3 ---
        { id: "niman_3_1", row: 3, col: 1, cost: 15, name: "Parry", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down", "right"] },
        { id: "niman_3_2", row: 3, col: 2, cost: 15, name: "Sense Emotions", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫–æ –≤—Å–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º –û–±–∞—è–Ω–∏—è, –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –∏ –û–±–º–∞–Ω–∞.", links: ["left", "down", "right"] },
        { id: "niman_3_3", row: 3, col: 3, cost: 15, name: "Reflect", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down", "right"] },
        { id: "niman_3_4", row: 3, col: 4, cost: 15, name: "Defensive Training", passive: true, desc: "–°–≤–µ—Ç–æ–≤—ã–µ –º–µ—á–∏, –†—É–∫–æ–ø–∞—à–Ω–∞—è –∏ –•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ –ø–æ–ª—É—á–∞—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ –ó–∞—â–∏—Ç–Ω–æ–µ (—Ä–µ–π—Ç–∏–Ω–≥ = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞).", links: ["left", "down"] },
        // --- –†–Ø–î 4 ---
        { id: "niman_4_1", row: 4, col: 1, cost: 20, name: "Sum Djem", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞: –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ [TR] –∏–ª–∏ 2 [AD], —á—Ç–æ–±—ã –æ–±–µ–∑–æ—Ä—É–∂–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞.", links: ["down", "right"] },
        { id: "niman_4_2", row: 4, col: 2, cost: 20, name: "Reflect", passive: false, desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down", "right"] },
        { id: "niman_4_3", row: 4, col: 3, cost: 20, name: "Draw Closer", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º (—Å—Ä–µ–¥–Ω—è—è). –î–æ–±–∞–≤—å –∫—É–± –°–∏–ª—ã. –ó–∞ [LS] –ø—Ä–∏—Ç—è–Ω–∏ —Ü–µ–ª—å –∏–ª–∏ –¥–æ–±–∞–≤—å [SU].", links: ["left", "right"] },
        { id: "niman_4_4", row: 4, col: 4, cost: 20, name: "Center of Being", passive: false, desc: "–ú–∞–Ω–µ–≤—Ä: –î–æ —Å–ª–µ–¥. —Ö–æ–¥–∞ —É–≤–µ–ª–∏—á—å—Ç–µ –∫—Ä–∏—Ç. —Ä–µ–π—Ç–∏–Ω–≥ –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down"] },
        // --- –†–Ø–î 5 ---
        { id: "niman_5_1", row: 5, col: 1, cost: 25, name: "Dedication", passive: true, desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", links: ["right"] },
        { id: "niman_5_2", row: 5, col: 2, cost: 25, name: "Force Assault", passive: true, desc: "–ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º: –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ [TR] –∏–ª–∏ 3 [SU], —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –°–∏–ª—É Move –∫–∞–∫ –º–∞–Ω–µ–≤—Ä.", links: ["left"] },
        { id: "niman_5_3", row: 5, col: 3, cost: 25, name: "Force Rating", passive: true, desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", links: [] },
        { id: "niman_5_4", row: 5, col: 4, cost: 25, name: "Improved Center of Being", passive: true, desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Center of Being –∫–∞–∫ —Å–≤–æ–±–æ–¥–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.", links: ["left"] }
    ],
// === –ó–ê–©–ò–¢–ù–ò–ö: –ú–ò–†–û–¢–í–û–†–ï–¶ (PEACEKEEPER) ===
    "peacekeeper": [
        // --- –†–Ø–î 1 ---
        { id: "peacekeeper_1_1", row: 1, col: 1, cost: 5, name: "Command", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –õ–∏–¥–µ—Ä—Å—Ç–≤—É. –°–æ—é–∑–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç [BO] –∫ –î–∏—Å—Ü–∏–ø–ª–∏–Ω–µ –Ω–∞ 24 —á–∞—Å–∞.", links: ["down"] },
        { id: "peacekeeper_1_2", row: 1, col: 2, cost: 5, name: "Confidence", passive: true, desc: "–°–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–æ—Ç–∏–≤ —Å—Ç—Ä–∞—Ö–∞ –Ω–∞ 1 –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        { id: "peacekeeper_1_3", row: 1, col: 3, cost: 5, name: "Second Wind", passive: false, desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –∑–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å = —Ä–∞–Ω–≥—É —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        { id: "peacekeeper_1_4", row: 1, col: 4, cost: 5, name: "Commanding Presence", passive: true, desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –õ–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏ –•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏—è.", links: ["down"] },
        // --- –†–Ø–î 2 ---
        { id: "peacekeeper_2_1", row: 2, col: 1, cost: 10, name: "Commanding Presence", passive: true, desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –õ–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏ –•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏—è.", links: ["right"] },
        { id: "peacekeeper_2_2", row: 2, col: 2, cost: 10, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["left", "down", "right"] },
        { id: "peacekeeper_2_3", row: 2, col: 3, cost: 10, name: "Second Wind", passive: false, desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –∑–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å = —Ä–∞–Ω–≥—É —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down", "right"] },
        { id: "peacekeeper_2_4", row: 2, col: 4, cost: 10, name: "Confidence", passive: true, desc: "–°–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–æ—Ç–∏–≤ —Å—Ç—Ä–∞—Ö–∞ –Ω–∞ 1 –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left"] },
        // --- –†–Ø–î 3 ---
        { id: "peacekeeper_3_1", row: 3, col: 1, cost: 15, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["down", "right"] },
        { id: "peacekeeper_3_2", row: 3, col: 2, cost: 15, name: "Enhanced Leader", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –õ–∏–¥–µ—Ä—Å—Ç–≤—É (–º–∞–∫—Å = —Ä–µ–π—Ç–∏–Ω–≥ –°–∏–ª—ã). –¢—Ä–∞—Ç—å—Ç–µ –û—á–∫–∏ –°–∏–ª—ã –Ω–∞ [SU] –∏–ª–∏ [AD].", links: ["left", "right"] },
        { id: "peacekeeper_3_3", row: 3, col: 3, cost: 15, name: "Command", passive: true, desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –õ–∏–¥–µ—Ä—Å—Ç–≤—É. –°–æ—é–∑–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç [BO] –∫ –î–∏—Å—Ü–∏–ø–ª–∏–Ω–µ.", links: ["left", "right"] },
        { id: "peacekeeper_3_4", row: 3, col: 4, cost: 15, name: "Field Commander", passive: false, desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –õ–∏–¥–µ—Ä—Å—Ç–≤–∞ (–°–ª–æ–∂–Ω–æ—Å—Ç—å [DI][DI]). –°–æ—é–∑–Ω–∏–∫–∏ (–∫–æ–ª-–≤–æ = Presence) –ø–æ–ª—É—á–∞—é—Ç 1 —É—Å—Ç. –∏ –¥–µ–ª–∞—é—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –º–∞–Ω–µ–≤—Ä.", links: ["left", "down"] },
        // --- –†–Ø–î 4 ---
        { id: "peacekeeper_4_1", row: 4, col: 1, cost: 20, name: "Steely Nerves", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ –û—á–∫–æ –°—É–¥—å–±—ã: –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –í–æ–ª–∏/–•–∞—Ä–∏–∑–º—ã –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ü–µ–Ω—ã.", links: ["down", "right"] },
        { id: "peacekeeper_4_2", row: 4, col: 2, cost: 20, name: "Second Wind", passive: false, desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –∑–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å = —Ä–∞–Ω–≥—É —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["left", "down", "right"] },
        { id: "peacekeeper_4_3", row: 4, col: 3, cost: 20, name: "Toughened", passive: true, desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", links: ["left", "down", "right"] },
        { id: "peacekeeper_4_4", row: 4, col: 4, cost: 20, name: "Improved Field Commander", passive: true, desc: "Field Commander –≤–ª–∏—è–µ—Ç –Ω–∞ 2x Presence. –ó–∞ [TR]: —Å–æ—é–∑–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç 1 —É—Å—Ç. –∏ –¥–µ–ª–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –î–ï–ô–°–¢–í–ò–ï.", links: ["left", "down"] },
        // --- –†–Ø–î 5 ---
        { id: "peacekeeper_5_1", row: 5, col: 1, cost: 25, name: "Unity Assault", passive: false, desc: "–ï—Å–ª–∏ –∞—Ç–∞–∫–∞ –ø—Ä–æ–≤–∞–ª–µ–Ω–∞ —Å [DE] –∏–ª–∏ 3 [TH]: –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ [DE], —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –°–∏–ª—É –Ω–∞ —Å–æ—é–∑–Ω–∏–∫–æ–≤ –∫–∞–∫ –º–∞–Ω–µ–≤—Ä.", links: [] },
        { id: "peacekeeper_5_2", row: 5, col: 2, cost: 25, name: "Dedication", passive: true, desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", links: [] },
        { id: "peacekeeper_5_3", row: 5, col: 3, cost: 25, name: "Force Rating", passive: true, desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", links: [] },
        { id: "peacekeeper_5_4", row: 5, col: 4, cost: 25, name: "Natural Leader", passive: false, desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –õ–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏–ª–∏ –•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏—è.", links: [] }
    ],
"protector": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "protector_1_1", row: 1, col: 1, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: [] 
        },
        { 
            id: "protector_1_2", row: 1, col: 2, cost: 5, 
            name: "Body Guard", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ó–∞—â–∏—Ç–∏—Ç—å —Å–æ—é–∑–Ω–∏–∫–∞ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ –ø–æ –Ω–µ–º—É –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ.", 
            links: ["down"] 
        },
        { 
            id: "protector_1_3", row: 1, col: 3, cost: 5, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: [] 
        },
        { 
            id: "protector_1_4", row: 1, col: 4, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "protector_2_1", row: 2, col: 1, cost: 10, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down", "right"] 
        },
        { 
            id: "protector_2_2", row: 2, col: 2, cost: 10, 
            name: "Physician", passive: true, 
            desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ú–µ–¥–∏—Ü–∏–Ω—ã –¥–ª—è –ª–µ—á–µ–Ω–∏—è —Ä–∞–Ω —Ü–µ–ª—å —Ç–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "protector_2_3", row: 2, col: 3, cost: 10, 
            name: "Stimpack Specialization", passive: true, 
            desc: "–°—Ç–∏–º–ø–∞–∫–∏ –ª–µ—á–∞—Ç +1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "protector_2_4", row: 2, col: 4, cost: 10, 
            name: "Force Protection", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª-–≤–æ –∫—É–±–∏–∫–æ–≤.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "protector_3_1", row: 3, col: 1, cost: 15, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "protector_3_2", row: 3, col: 2, cost: 15, 
            name: "Stimpack Specialization", passive: true, 
            desc: "–°—Ç–∏–º–ø–∞–∫–∏ –ª–µ—á–∞—Ç +1 —Ä–∞–Ω—É –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down", "right"] 
        },
        { 
            id: "protector_3_3", row: 3, col: 3, cost: 15, 
            name: "Heightened Awareness", passive: true, 
            desc: "–°–æ—é–∑–Ω–∏–∫–∏ —Ä—è–¥–æ–º –ø–æ–ª—É—á–∞—é—Ç [BO] –∫ –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏/–ë–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–≤ —É–ø–æ—Ä ‚Äî [BO][BO]).", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "protector_3_4", row: 3, col: 4, cost: 15, 
            name: "Center of Being", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –î–æ —Å–ª–µ–¥. —Ö–æ–¥–∞ —É–≤–µ–ª–∏—á—å—Ç–µ –∫—Ä–∏—Ç. —Ä–µ–π—Ç–∏–Ω–≥ –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "protector_4_1", row: 4, col: 1, cost: 20, 
            name: "Circle of Shelter", passive: true, 
            desc: "–ö–æ–≥–¥–∞ —Å–æ—é–∑–Ω–∏–∫ —Ä—è–¥–æ–º –ø–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω, –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Parry/Reflect –∑–∞ –Ω–µ–≥–æ.", 
            links: ["right"] 
        },
        { 
            id: "protector_4_2", row: 4, col: 2, cost: 20, 
            name: "Force Protection", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ–≥–ª–æ—â–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª-–≤–æ –∫—É–±–∏–∫–æ–≤.", 
            links: ["right", "down"] 
        },
        { 
            id: "protector_4_3", row: 4, col: 3, cost: 20, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right"] 
        },
        { 
            id: "protector_4_4", row: 4, col: 4, cost: 20, 
            name: "Body Guard", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ó–∞—â–∏—Ç–∏—Ç—å —Å–æ—é–∑–Ω–∏–∫–∞ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ –ø–æ –Ω–µ–º—É –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "protector_5_1", row: 5, col: 1, cost: 25, 
            name: "Center of Being", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –î–æ —Å–ª–µ–¥. —Ö–æ–¥–∞ —É–≤–µ–ª–∏—á—å—Ç–µ –∫—Ä–∏—Ç. —Ä–µ–π—Ç–∏–Ω–≥ –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["right"] 
        },
        { 
            id: "protector_5_2", row: 5, col: 2, cost: 25, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", 
            links: ["left", "right"] 
        },
        { 
            id: "protector_5_3", row: 5, col: 3, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["left", "right"] 
        },
        { 
            id: "protector_5_4", row: 5, col: 4, cost: 25, 
            name: "Improved Bodyguard", passive: true, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü—Ä–∏–º–∏—Ç–µ —É—Ä–æ–Ω –≤–º–µ—Å—Ç–æ –∑–∞—â–∏—â–∞–µ–º–æ–≥–æ —Å–æ—é–∑–Ω–∏–∫–∞.", 
            links: ["left"] 
        },
    ],
"soresu": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "soresu_1_1", row: 1, col: 1, cost: 5, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "soresu_1_2", row: 1, col: 2, cost: 5, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: [] 
        },
        { 
            id: "soresu_1_3", row: 1, col: 3, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: [] 
        },
        { 
            id: "soresu_1_4", row: 1, col: 4, cost: 5, 
            name: "Defensive Stance", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥—è—â–∏—Ö –∞—Ç–∞–∫ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "soresu_2_1", row: 2, col: 1, cost: 10, 
            name: "Soresu Technique", passive: true, 
            desc: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤–º–µ—Å—Ç–æ –°–∏–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞.", 
            links: ["right", "down"] 
        },
        { 
            id: "soresu_2_2", row: 2, col: 2, cost: 10, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "soresu_2_3", row: 2, col: 3, cost: 10, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["left", "down"] 
        },
        { 
            id: "soresu_2_4", row: 2, col: 4, cost: 10, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "soresu_3_1", row: 3, col: 1, cost: 15, 
            name: "Confidence", passive: true, 
            desc: "–°–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –ø—Ä–æ—Ç–∏–≤ —Å—Ç—Ä–∞—Ö–∞ –Ω–∞ 1 –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["right", "down"] 
        },
        { 
            id: "soresu_3_2", row: 3, col: 2, cost: 15, 
            name: "Improved Parry", passive: true, 
            desc: "–ü—Ä–∏ –ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞ –¥–∞–ª–∞ [DE] –∏–ª–∏ 3 [TH], –Ω–∞–Ω–µ—Å–∏ –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω) –ø–æ—Å–ª–µ –µ–≥–æ –∞—Ç–∞–∫–∏.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "soresu_3_3", row: 3, col: 3, cost: 15, 
            name: "Defensive Circle", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞ (–°–ª–æ–∂–Ω. [DI][DI][DI]). [SU]: +1 –∑–∞—â–∏—Ç–∞ –≤–∞–º –∏ —Å–æ—é–∑–Ω–∏–∫—É. 2 [AD]: +1 –∑–∞—â–∏—Ç–∞.", 
            links: ["left", "down"] 
        },
        { 
            id: "soresu_3_4", row: 3, col: 4, cost: 15, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "soresu_4_1", row: 4, col: 1, cost: 20, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "soresu_4_2", row: 4, col: 2, cost: 20, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "right"] 
        },
        { 
            id: "soresu_4_3", row: 4, col: 3, cost: 20, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "soresu_4_4", row: 4, col: 4, cost: 20, 
            name: "Defensive Stance", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥—è—â–∏—Ö –∞—Ç–∞–∫ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ.", 
            links: ["left"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "soresu_5_1", row: 5, col: 1, cost: 25, 
            name: "Supreme Parry", passive: true, 
            desc: "–ï—Å–ª–∏ –≤—ã –Ω–µ –∞—Ç–∞–∫–æ–≤–∞–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–º —Ö–æ–¥—É, —Å—Ç–æ–∏–º–æ—Å—Ç—å Parry —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 1 —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right"] 
        },
        { 
            id: "soresu_5_2", row: 5, col: 2, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["left", "right"] 
        },
        { 
            id: "soresu_5_3", row: 5, col: 3, cost: 25, 
            name: "Improved Reflect", passive: true, 
            desc: "–ü—Ä–∏ –æ—Ç—Ä–∞–∂–µ–Ω–∏–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞ –¥–∞–ª–∞ [DE] –∏–ª–∏ 3 [TH], –Ω–∞–Ω–µ—Å–∏ –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω).", 
            links: ["left", "right"] 
        },
        { 
            id: "soresu_5_4", row: 5, col: 4, cost: 25, 
            name: "Strategic Form", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞ (–°–ª–æ–∂–Ω. [DI][DI][DI]). –£—Å–ø–µ—Ö: –≤—Ä–∞–≥ –∞—Ç–∞–∫—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∞—Å 1 —Ä–∞—É–Ω–¥. 2 [AD]: –ø—Ä–æ–¥–ª–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç.", 
            links: ["left"] 
        },
    ],
"pathfinder": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "pathfinder_1_1", row: 1, col: 1, cost: 5, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },
        { 
            id: "pathfinder_1_2", row: 1, col: 2, cost: 5, 
            name: "Keen Eyed", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –í–Ω–∏–º–∞–Ω–∏—è –∏ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏. –ü–æ–∏—Å–∫ –∑–∞–Ω–∏–º–∞–µ—Ç -50% –≤—Ä–µ–º–µ–Ω–∏.", 
            links: ["down"] 
        },
        { 
            id: "pathfinder_1_3", row: 1, col: 3, cost: 5, 
            name: "Forager", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE][SE] –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –ø–æ–∏—Å–∫ –µ–¥—ã, –≤–æ–¥—ã –∏–ª–∏ —É–∫—Ä—ã—Ç–∏—è. –ü–æ–∏—Å–∫ –∑–∞–Ω–∏–º–∞–µ—Ç -50% –≤—Ä–µ–º–µ–Ω–∏.", 
            links: ["down"] 
        },
        { 
            id: "pathfinder_1_4", row: 1, col: 4, cost: 5, 
            name: "Swift", passive: true, 
            desc: "–ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —à—Ç—Ä–∞—Ñ—ã –∑–∞ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Å–ª–æ–∂–Ω–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "pathfinder_2_1", row: 2, col: 1, cost: 10, 
            name: "Keen Eyed", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –í–æ—Å–ø—Ä–∏—è—Ç–∏—è/–ë–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ -50%.", 
            links: ["right", "down"] 
        },
        { 
            id: "pathfinder_2_2", row: 2, col: 2, cost: 10, 
            name: "Outdoorsman", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –í—ã–∂–∏–≤–∞–Ω–∏—è. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", 
            links: ["left", "right"] 
        },
        { 
            id: "pathfinder_2_3", row: 2, col: 3, cost: 10, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "pathfinder_2_4", row: 2, col: 4, cost: 10, 
            name: "Outdoorsman", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –í—ã–∂–∏–≤–∞–Ω–∏—è. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", 
            links: ["left"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "pathfinder_3_1", row: 3, col: 1, cost: 15, 
            name: "Animal Empathy", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥ –°–∏–ª—ã) –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –í—ã–∂–∏–≤–∞–Ω–∏—è —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏. [LS] –¥–∞–µ—Ç 1 —É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.", 
            links: ["down", "right"] 
        },
        { 
            id: "pathfinder_3_2", row: 3, col: 2, cost: 15, 
            name: "Animal Bond", passive: true, 
            desc: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —Å–≤—è–∑—å —Å –∂–∏–≤–æ—Ç–Ω—ã–º (–°–∏–ª—É—ç—Ç = 1/2 —Ä–µ–π—Ç–∏–Ω–≥–∞ –°–∏–ª—ã).", 
            links: ["left", "down"] 
        },
        { 
            id: "pathfinder_3_3", row: 3, col: 3, cost: 15, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down", "right"] 
        },
        { 
            id: "pathfinder_3_4", row: 3, col: 4, cost: 15, 
            name: "Sleight of Mind", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–µ–π, –Ω–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫ –°–∏–ª–µ.", 
            links: [] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "pathfinder_4_1", row: 4, col: 1, cost: 20, 
            name: "Mental Bond", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ 1 [FO]. –û–±—â–∞–π—Ç–µ—Å—å —Å –∂–∏–≤–æ—Ç–Ω—ã–º –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏, –≤–∏–¥—å—Ç–µ –µ–≥–æ –≥–ª–∞–∑–∞–º–∏.", 
            links: ["down"] 
        },
        { 
            id: "pathfinder_4_2", row: 4, col: 2, cost: 20, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", 
            links: ["left"] 
        },
        { 
            id: "pathfinder_4_3", row: 4, col: 3, cost: 20, 
            name: "Quick Movement", passive: false, 
            desc: "–°–≤–æ–±–æ–¥–Ω–æ–µ: 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏, –¥–æ–±–∞–≤—å—Ç–µ [FO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ò–ª–∏ –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ 2 [LS] –¥–ª—è –¥–æ–ø. –º–∞–Ω–µ–≤—Ä–∞ –¥–≤–∏–∂–µ–Ω–∏—è.", 
            links: ["down", "right"] 
        },
        { 
            id: "pathfinder_4_4", row: 4, col: 4, cost: 20, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: [] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "pathfinder_5_1", row: 5, col: 1, cost: 25, 
            name: "Share Pain", passive: false, 
            desc: "–°–≤–æ–±–æ–¥–Ω–æ–µ: –£–º–µ–Ω—å—à–∏—Ç–µ —É—Ä–æ–Ω –ø–æ –∂–∏–≤–æ—Ç–Ω–æ–º—É –≤–¥–≤–æ–µ, –Ω–æ –ø–æ–ª—É—á–∏—Ç–µ —Å—Ç–æ–ª—å–∫–æ –∂–µ —É—Ä–æ–Ω–∞ —Å–∞–º–∏.", 
            links: [] 
        },
        { 
            id: "pathfinder_5_2", row: 5, col: 2, cost: 25, 
            name: "Enduring", passive: true, 
            desc: "+1 –∫ –ü–æ–≥–ª–æ—â–µ–Ω–∏—é.", 
            links: [] 
        },
        { 
            id: "pathfinder_5_3", row: 5, col: 3, cost: 25, 
            name: "Natural Outdoorsman", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –í—ã–∂–∏–≤–∞–Ω–∏—è –∏–ª–∏ –°—Ç–æ–π–∫–æ—Å—Ç–∏.", 
            links: ["left", "right"] 
        },
        { 
            id: "pathfinder_5_4", row: 5, col: 4, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: [] 
        },
    ],
"hunter": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "hunter_1_1", row: 1, col: 1, cost: 5, 
            name: "Rapid Recovery", passive: true, 
            desc: "–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã –ª–µ—á–∏—Ç–µ +1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "hunter_1_2", row: 1, col: 2, cost: 5, 
            name: "Hunter", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∑–∞ —Ä–∞–Ω–≥ –ø—Ä–æ—Ç–∏–≤ –∑–≤–µ—Ä–µ–π. +10 –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫—Ä–∏—Ç. —Ä–∞–Ω—ã –ø—Ä–æ—Ç–∏–≤ –Ω–∏—Ö.", 
            links: ["down"] 
        },
        { 
            id: "hunter_1_3", row: 1, col: 3, cost: 5, 
            name: "Expert Tracker", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", 
            links: ["down"] 
        },
        { 
            id: "hunter_1_4", row: 1, col: 4, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: [] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "hunter_2_1", row: 2, col: 1, cost: 10, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["right"] 
        },
        { 
            id: "hunter_2_2", row: 2, col: 2, cost: 10, 
            name: "Expert Tracker", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤—ã—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", 
            links: ["left", "down"] 
        },
        { 
            id: "hunter_2_3", row: 2, col: 3, cost: 10, 
            name: "Hunter", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∑–∞ —Ä–∞–Ω–≥ –ø—Ä–æ—Ç–∏–≤ –∑–≤–µ—Ä–µ–π. +10 –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫—Ä–∏—Ç. —Ä–∞–Ω—ã –ø—Ä–æ—Ç–∏–≤ –Ω–∏—Ö.", 
            links: ["down", "right"] 
        },
        { 
            id: "hunter_2_4", row: 2, col: 4, cost: 10, 
            name: "Uncanny Senses", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∫ –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.", 
            links: [] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "hunter_3_1", row: 3, col: 1, cost: 15, 
            name: "Side Step", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–∞–ª—å–Ω–∏—Ö –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ –¥–æ —Å–ª–µ–¥. —Ä–∞—É–Ω–¥–∞.", 
            links: [] 
        },
        { 
            id: "hunter_3_2", row: 3, col: 2, cost: 15, 
            name: "Keen Eyed", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∏–∑ –í–Ω–∏–º–∞–Ω–∏—è/–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏. –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ -50%.", 
            links: ["right", "down"] 
        },
        { 
            id: "hunter_3_3", row: 3, col: 3, cost: 15, 
            name: "Natural Hunter", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.", 
            links: ["left", "right"] 
        },
        { 
            id: "hunter_3_4", row: 3, col: 4, cost: 15, 
            name: "Uncanny Reactions", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∫ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "hunter_4_1", row: 4, col: 1, cost: 20, 
            name: "Rapid Recovery", passive: true, 
            desc: "–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã –ª–µ—á–∏—Ç–µ +1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "hunter_4_2", row: 4, col: 2, cost: 20, 
            name: "Soft Spot", passive: false, 
            desc: "–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—Ç–∞–∫–∏: –ü–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–Ω, —Ä–∞–≤–Ω—ã–π –°–º–µ–∫–∞–ª–∫–µ.", 
            links: ["left", "down"] 
        },
        { 
            id: "hunter_4_3", row: 4, col: 3, cost: 20, 
            name: "Sixth Sense", passive: true, 
            desc: "+1 –∫ –ó–∞—â–∏—Ç–µ –æ—Ç –¥–∞–ª—å–Ω–∏—Ö –∞—Ç–∞–∫.", 
            links: ["left", "right"] 
        },
        { 
            id: "hunter_4_4", row: 4, col: 4, cost: 20, 
            name: "Rapid Recovery", passive: true, 
            desc: "–ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã –ª–µ—á–∏—Ç–µ +1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "hunter_5_1", row: 5, col: 1, cost: 25, 
            name: "Side Step", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–∞–ª—å–Ω–∏—Ö –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ –¥–æ —Å–ª–µ–¥. —Ä–∞—É–Ω–¥–∞.", 
            links: [] 
        },
        { 
            id: "hunter_5_2", row: 5, col: 2, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["right"] 
        },
        { 
            id: "hunter_5_3", row: 5, col: 3, cost: 25, 
            name: "Intuitive Shot", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥ –°–∏–ª—ã) –∫ –î–∞–ª—å–Ω–µ–π –∞—Ç–∞–∫–µ. –¢—Ä–∞—Ç—å—Ç–µ [LS] –Ω–∞ –£—Å–ø–µ—Ö –∏–ª–∏ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.", 
            links: ["left", "right"] 
        },
        { 
            id: "hunter_5_4", row: 5, col: 4, cost: 25, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–∞–Ω–≥—É –°–∏–ª—ã.", 
            links: ["left"] 
        },
    ],
"aggressor": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "aggressor_1_1", row: 1, col: 1, cost: 5, 
            name: "Intimidating", passive: false, 
            desc: "–ê–∫—Ç–∏–≤–Ω—ã–π: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥. –£—Å–∏–ª—å—Ç–µ (Upgrade) –ø—Ä–æ–≤–µ—Ä–∫—É –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –∏–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –µ—Å–ª–∏ –∑–∞–ø—É–≥–∏–≤–∞—é—Ç –≤–∞—Å.", 
            links: ["down"] 
        },
        { 
            id: "aggressor_1_2", row: 1, col: 2, cost: 5, 
            name: "Plausible Deniability", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –∏ –û–±–º–∞–Ω–∞.", 
            links: ["down"] 
        },
        { 
            id: "aggressor_1_3", row: 1, col: 3, cost: 5, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },
        { 
            id: "aggressor_1_4", row: 1, col: 4, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "aggressor_2_1", row: 2, col: 1, cost: 10, 
            name: "Fearsome", passive: true, 
            desc: "–ö–æ–≥–¥–∞ –≤—Ä–∞–≥ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –±–æ–π (Engaged): –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç—Ä–∞—Ö–∞ (–°–ª–æ–∂–Ω. = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞). –ü—Ä–æ–≤–∞–ª = —à—Ç—Ä–∞—Ñ—ã.", 
            links: ["right", "down"] 
        },
        { 
            id: "aggressor_2_2", row: 2, col: 2, cost: 10, 
            name: "Intimidating", passive: false, 
            desc: "–ê–∫—Ç–∏–≤–Ω—ã–π: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∑–∞ —Ä–∞–Ω–≥. –£—Å–∏–ª—å—Ç–µ (Upgrade) –ø—Ä–æ–≤–µ—Ä–∫—É –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è –∏–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞, –µ—Å–ª–∏ –∑–∞–ø—É–≥–∏–≤–∞—é—Ç –≤–∞—Å.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "aggressor_2_3", row: 2, col: 3, cost: 10, 
            name: "Prey on the Weak", passive: true, 
            desc: "+1 —É—Ä–æ–Ω –ø–æ –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ü–µ–ª—è–º –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down"] 
        },
        { 
            id: "aggressor_2_4", row: 2, col: 4, cost: 10, 
            name: "Sense Advantage", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –¥–æ–±–∞–≤—å—Ç–µ [SE][SE] –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ NPC.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "aggressor_3_1", row: 3, col: 1, cost: 15, 
            name: "Fearsome", passive: true, 
            desc: "–ö–æ–≥–¥–∞ –≤—Ä–∞–≥ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –±–æ–π (Engaged): –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç—Ä–∞—Ö–∞ (–°–ª–æ–∂–Ω. = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞). –ü—Ä–æ–≤–∞–ª = —à—Ç—Ä–∞—Ñ—ã.", 
            links: ["right", "down"] 
        },
        { 
            id: "aggressor_3_2", row: 3, col: 2, cost: 15, 
            name: "Terrify", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ó–∞–ø—É–≥–∏–≤–∞–Ω–∏—è (–°–ª–æ–∂–Ω. [DI][DI][DI]). –î–æ–±–∞–≤—å [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –£—Å–ø–µ—Ö: –î–µ–∑–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è (–°—Ä–µ–¥–Ω—è—è –¥–∏—Å—Ç). [LS]: –û–±–µ–∑–¥–≤–∏–∂–∏–≤–∞–Ω–∏–µ.", 
            links: ["left", "down"] 
        },
        { 
            id: "aggressor_3_3", row: 3, col: 3, cost: 15, 
            name: "Crippling Blow", passive: false, 
            desc: "–£–≤–µ–ª–∏—á—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –Ω–∞ 1. –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏: —Ü–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –¥–≤–∏–≥–∞–µ—Ç—Å—è.", 
            links: ["right", "down"] 
        },
        { 
            id: "aggressor_3_4", row: 3, col: 4, cost: 15, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "aggressor_4_1", row: 4, col: 1, cost: 20, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right", "down"] 
        },
        { 
            id: "aggressor_4_2", row: 4, col: 2, cost: 20, 
            name: "Improved Terrify", passive: true, 
            desc: "–°–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å Terrify –¥–æ –°—Ä–µ–¥–Ω–µ–π ([DI][DI]). [TR]: –û–≥–ª—É—à–µ–Ω–∏–µ.", 
            links: ["left", "down"] 
        },
        { 
            id: "aggressor_4_3", row: 4, col: 3, cost: 20, 
            name: "Prey on the Weak", passive: true, 
            desc: "+1 —É—Ä–æ–Ω –ø–æ –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ü–µ–ª—è–º –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "aggressor_4_4", row: 4, col: 4, cost: 20, 
            name: "Heroic Fortitude", passive: false, 
            desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ –û—á–∫–æ –°—É–¥—å–±—ã: –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ö—Ä–∏—Ç. —Ä–∞–Ω (–°–∏–ª–∞/–õ–æ–≤–∫–æ—Å—Ç—å) –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ü–µ–Ω—ã.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "aggressor_5_1", row: 5, col: 1, cost: 25, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", 
            links: ["right"] 
        },
        { 
            id: "aggressor_5_2", row: 5, col: 2, cost: 25, 
            name: "Fearsome", passive: true, 
            desc: "–ö–æ–≥–¥–∞ –≤—Ä–∞–≥ –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –±–æ–π (Engaged): –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç—Ä–∞—Ö–∞ (–°–ª–æ–∂–Ω. = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞). –ü—Ä–æ–≤–∞–ª = —à—Ç—Ä–∞—Ñ—ã.", 
            links: ["left", "right"] 
        },
        { 
            id: "aggressor_5_3", row: 5, col: 3, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["left"] 
        },
        { 
            id: "aggressor_5_4", row: 5, col: 4, cost: 25, 
            name: "Against All Odds", passive: false, 
            desc: "–ï—Å–ª–∏ –≤—ã–≤–µ–¥–µ–Ω—ã –∏–∑ —Å—Ç—Ä–æ—è: –ü—Ä–æ–≤–µ—Ä–∫–∞ –°—Ç–æ–π–∫–æ—Å—Ç–∏ ([DI][DI][DI]) + [FO]. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–Ω—ã = —É—Å–ø–µ—Ö–∏ + [LS].", 
            links: [] 
        },
    ],
"shicho": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "shicho_1_1", row: 1, col: 1, cost: 5, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "shicho_1_2", row: 1, col: 2, cost: 5, 
            name: "Second Wind", passive: false, 
            desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –∑–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å = —Ä–∞–Ω–≥—É —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "shicho_1_3", row: 1, col: 3, cost: 5, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["down"] 
        },
        { 
            id: "shicho_1_4", row: 1, col: 4, cost: 5, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "shicho_2_1", row: 2, col: 1, cost: 10, 
            name: "Second Wind", passive: false, 
            desc: "–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –†–∞–∑ –∑–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å = —Ä–∞–Ω–≥—É —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["right", "down"] 
        },
        { 
            id: "shicho_2_2", row: 2, col: 2, cost: 10, 
            name: "Conditioned", passive: true, 
            desc: "–£–±–∏—Ä–∞–π—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ê—Ç–ª–µ—Ç–∏–∫–∏/–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–Ω/—É—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç –ø–∞–¥–µ–Ω–∏—è.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "shicho_2_3", row: 2, col: 3, cost: 10, 
            name: "Multiple Opponents", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è, –µ—Å–ª–∏ —Å–≤—è–∑–∞–Ω—ã –±–æ–µ–º —Å 2+ –≤—Ä–∞–≥–∞–º–∏.", 
            links: ["left", "down"] 
        },
        { 
            id: "shicho_2_4", row: 2, col: 4, cost: 10, 
            name: "Durable", passive: true, 
            desc: "–í—ã—á–∏—Ç–∞–π—Ç–µ 10 –∏–∑ –ª—é–±–æ–≥–æ –±—Ä–æ—Å–∫–∞ –ö—Ä–∏—Ç. —Ä–∞–Ω—ã –ø–æ –≤–∞–º (–º–∏–Ω. 1).", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "shicho_3_1", row: 3, col: 1, cost: 15, 
            name: "Quick Draw", passive: false, 
            desc: "–†–∞–∑ –≤ —Ä–∞—É–Ω–¥: –î–æ—Å—Ç–∞—Ç—å –æ—Ä—É–∂–∏–µ –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏–µ–º.", 
            links: ["down"] 
        },
        { 
            id: "shicho_3_2", row: 3, col: 2, cost: 15, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["left", "down"] 
        },
        { 
            id: "shicho_3_3", row: 3, col: 3, cost: 15, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "shicho_3_4", row: 3, col: 4, cost: 15, 
            name: "Defensive Training", passive: true, 
            desc: "–û—Ä—É–∂–∏–µ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è –∏ –°–≤–µ—Ç–æ–≤—ã–µ –º–µ—á–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ –ó–∞—â–∏—Ç–Ω–æ–µ (—Ä–∞–Ω–≥ = —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞).", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "shicho_4_1", row: 4, col: 1, cost: 20, 
            name: "Natural Blademaster", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞, –î—Ä–∞–∫–∏ –∏–ª–∏ –•–æ–ª–æ–¥–Ω–æ–≥–æ –æ—Ä—É–∂–∏—è.", 
            links: ["right", "down"] 
        },
        { 
            id: "shicho_4_2", row: 4, col: 2, cost: 20, 
            name: "Sarlacc Sweep", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º (–°–ª–æ–∂–Ω. +1). –¢—Ä–∞—Ç—å—Ç–µ 2 [AD] –¥–ª—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ –¥–æ–ø. —Ü–µ–ª–∏ (–∏ —Ç.–¥.).", 
            links: ["left", "down"] 
        },
        { 
            id: "shicho_4_3", row: 4, col: 3, cost: 20, 
            name: "Improved Parry", passive: true, 
            desc: "–ü—Ä–∏ –ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞ –¥–∞–ª–∞ [DE] –∏–ª–∏ 3 [TH], –Ω–∞–Ω–µ—Å–∏ –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω) –ø–æ—Å–ª–µ –µ–≥–æ –∞—Ç–∞–∫–∏.", 
            links: ["right"] 
        },
        { 
            id: "shicho_4_4", row: 4, col: 4, cost: 20, 
            name: "Sum Djem", passive: true, 
            desc: "–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞: –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ [TR] –∏–ª–∏ 2 [AD], —á—Ç–æ–±—ã –æ–±–µ–∑–æ—Ä—É–∂–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞.", 
            links: ["left"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "shicho_5_1", row: 5, col: 1, cost: 25, 
            name: "Center of Being", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –î–æ —Å–ª–µ–¥. —Ö–æ–¥–∞ —É–≤–µ–ª–∏—á—å—Ç–µ –∫—Ä–∏—Ç. —Ä–µ–π—Ç–∏–Ω–≥ –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["right"] 
        },
        { 
            id: "shicho_5_2", row: 5, col: 2, cost: 25, 
            name: "Durable", passive: true, 
            desc: "–í—ã—á–∏—Ç–∞–π—Ç–µ 10 –∏–∑ –ª—é–±–æ–≥–æ –±—Ä–æ—Å–∫–∞ –ö—Ä–∏—Ç. —Ä–∞–Ω—ã –ø–æ –≤–∞–º (–º–∏–Ω. 1).", 
            links: ["left", "right"] 
        },
        { 
            id: "shicho_5_3", row: 5, col: 3, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["left", "right"] 
        },
        { 
            id: "shicho_5_4", row: 5, col: 4, cost: 25, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left"] 
        },
    ],
"starfighter": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "starfighter_1_1", row: 1, col: 1, cost: 5, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },
        { 
            id: "starfighter_1_2", row: 1, col: 2, cost: 5, 
            name: "Skilled Jockey", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.", 
            links: ["down"] 
        },
        { 
            id: "starfighter_1_3", row: 1, col: 3, cost: 5, 
            name: "Rapid Reaction", passive: false, 
            desc: "–ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª—å–∫–æ –∂–µ —É—Å–ø–µ—Ö–æ–≤ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã.", 
            links: ["down"] 
        },
        { 
            id: "starfighter_1_4", row: 1, col: 4, cost: 5, 
            name: "Solid Repairs", passive: true, 
            desc: "–ü—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ –∫–æ—Ä–ø—É—Å–∞ –∫–æ—Ä–∞–±–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ +1 –µ–¥. —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "starfighter_2_1", row: 2, col: 1, cost: 10, 
            name: "Intuitive Evasion", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –£—Å–∏–ª—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ –ø–æ –∫–æ—Ä–∞–±–ª—é –Ω–∞ –∫–æ–ª-–≤–æ –∫—É–±–∏–∫–æ–≤.", 
            links: ["down"] 
        },
        { 
            id: "starfighter_2_2", row: 2, col: 2, cost: 10, 
            name: "Conditioned", passive: true, 
            desc: "–£–±–∏—Ä–∞–π—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ê—Ç–ª–µ—Ç–∏–∫–∏/–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–Ω/—É—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç –ø–∞–¥–µ–Ω–∏—è.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "starfighter_2_3", row: 2, col: 3, cost: 10, 
            name: "Solid Repairs", passive: true, 
            desc: "–ü—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ –∫–æ—Ä–ø—É—Å–∞ –∫–æ—Ä–∞–±–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ +1 –µ–¥. —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "starfighter_2_4", row: 2, col: 4, cost: 10, 
            name: "Galaxy Mapper", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏–∏. –í—Ä–µ–º—è —Ä–∞—Å—á–µ—Ç–æ–≤ -50%.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "starfighter_3_1", row: 3, col: 1, cost: 15, 
            name: "Full Throttle", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ([DI][DI][DI]). –£—Å–ø–µ—Ö: +1 –∫ –°–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –∫–æ–ª-–≤–æ —Ä–∞—É–Ω–¥–æ–≤ = –°–º–µ–∫–∞–ª–∫–∞.", 
            links: [] 
        },
        { 
            id: "starfighter_3_2", row: 3, col: 2, cost: 15, 
            name: "Rapid Reaction", passive: false, 
            desc: "–ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª—å–∫–æ –∂–µ —É—Å–ø–µ—Ö–æ–≤ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã.", 
            links: ["left", "down"] 
        },
        { 
            id: "starfighter_3_3", row: 3, col: 3, cost: 15, 
            name: "Exhaust Port", passive: false, 
            desc: "–ü–µ—Ä–µ–¥ –∞—Ç–∞–∫–æ–π –∫–æ—Ä–∞–±–ª—è: –ü–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã, —á—Ç–æ–±—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ '–ú–∞—Å—Å–∏–≤–Ω—ã–π' —É —Ü–µ–ª–∏.", 
            links: [] 
        },
        { 
            id: "starfighter_3_4", row: 3, col: 4, cost: 15, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "starfighter_4_1", row: 4, col: 1, cost: 20, 
            name: "Intuitive Strike", passive: true, 
            desc: "–ü—Ä–∏ –∞—Ç–∞–∫–µ –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∞: –¥–æ–±–∞–≤—å—Ç–µ [FO]. –¢—Ä–∞—Ç—å—Ç–µ 2 [LS] –Ω–∞ 1 –£—Å–ø–µ—Ö –∏–ª–∏ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.", 
            links: ["down"] 
        },
        { 
            id: "starfighter_4_2", row: 4, col: 2, cost: 20, 
            name: "Touch of Fate", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –î–æ–±–∞–≤—å—Ç–µ [BO][BO] –∫ –ª—é–±–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "starfighter_4_3", row: 4, col: 3, cost: 20, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "starfighter_4_4", row: 4, col: 4, cost: 20, 
            name: "Skilled Jockey", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "starfighter_5_1", row: 5, col: 1, cost: 25, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", 
            links: [] 
        },
        { 
            id: "starfighter_5_2", row: 5, col: 2, cost: 25, 
            name: "Tricky Target", passive: true, 
            desc: "–ü—Ä–∏ —Å—Ç—Ä–µ–ª—å–±–µ –∏–∑ –∫–æ—Ä–∞–±–ª—è —Å—á–∏—Ç–∞–π—Ç–µ –µ–≥–æ —Å–∏–ª—É—ç—Ç –Ω–∞ 1 –º–µ–Ω—å—à–µ.", 
            links: ["right"] 
        },
        { 
            id: "starfighter_5_3", row: 5, col: 3, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["left", "right"] 
        },
        { 
            id: "starfighter_5_4", row: 5, col: 4, cost: 25, 
            name: "Intuitive Evasion", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –£—Å–∏–ª—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫ –ø–æ –∫–æ—Ä–∞–±–ª—é –Ω–∞ –∫–æ–ª-–≤–æ –∫—É–±–∏–∫–æ–≤.", 
            links: ["left"] 
        },
    ],
"artisan": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "artisan_1_1", row: 1, col: 1, cost: 5, 
            name: "Solid Repairs", passive: true, 
            desc: "–ü—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ –∫–æ—Ä–ø—É—Å–∞ –∫–æ—Ä–∞–±–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ +1 –µ–¥. —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "artisan_1_2", row: 1, col: 2, cost: 5, 
            name: "Fine Tuning", passive: true, 
            desc: "–£–º–µ–Ω—å—à–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É (System Strain) –∫–æ—Ä–∞–±–ª—è –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },
        { 
            id: "artisan_1_3", row: 1, col: 3, cost: 5, 
            name: "Mental Tools", passive: true, 
            desc: "–í—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞–µ—Ç–µ—Å—å –∏–º–µ—é—â–∏–º –Ω—É–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –ú–µ—Ö–∞–Ω–∏–∫–∏.", 
            links: ["down"] 
        },
        { 
            id: "artisan_1_4", row: 1, col: 4, cost: 5, 
            name: "Technical Aptitude", passive: true, 
            desc: "–°–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–∞ 25% –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "artisan_2_1", row: 2, col: 1, cost: 10, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right", "down"] 
        },
        { 
            id: "artisan_2_2", row: 2, col: 2, cost: 10, 
            name: "Solid Repairs", passive: true, 
            desc: "–ü—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ –∫–æ—Ä–ø—É—Å–∞ –∫–æ—Ä–∞–±–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ +1 –µ–¥. —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down", "right"] 
        },
        { 
            id: "artisan_2_3", row: 2, col: 3, cost: 10, 
            name: "Fine Tuning", passive: true, 
            desc: "–£–º–µ–Ω—å—à–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É (System Strain) –∫–æ—Ä–∞–±–ª—è –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "right"] 
        },
        { 
            id: "artisan_2_4", row: 2, col: 4, cost: 10, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "artisan_3_1", row: 3, col: 1, cost: 15, 
            name: "Inventor", passive: true, 
            desc: "–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤: –¥–æ–±–∞–≤—å—Ç–µ [BO] –∏–ª–∏ —É–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["right", "down"] 
        },
        { 
            id: "artisan_3_2", row: 3, col: 2, cost: 15, 
            name: "Imbue Item", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏ 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å, –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π [FO]. –ë–æ–Ω—É—Å –ø—Ä–µ–¥–º–µ—Ç—É: +1 —É—Ä–æ–Ω, +1 –∑–∞—â–∏—Ç–∞ –∏–ª–∏ -1 –∫—Ä–∏—Ç. –ü–æ–ª—É—á–∞–π 1 —É—Å—Ç–∞–ª–æ—Å—Ç—å –∫–∞–∂–¥—ã–π —Ö–æ–¥.", 
            links: ["left", "right"] 
        },
        { 
            id: "artisan_3_3", row: 3, col: 3, cost: 15, 
            name: "Natural Tinkerer", passive: false, 
            desc: "–†–∞–∑ –≤ —Å–µ—Å—Å–∏—é: –ü–µ—Ä–µ–±—Ä–æ—Å—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ú–µ—Ö–∞–Ω–∏–∫–∏.", 
            links: ["left", "right"] 
        },
        { 
            id: "artisan_3_4", row: 3, col: 4, cost: 15, 
            name: "Defensive Slicing", passive: true, 
            desc: "–ü—Ä–∏ –∑–∞—â–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: –¥–æ–±–∞–≤—å—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –≤—Ä–∞–≥–æ–≤.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "artisan_4_1", row: 4, col: 1, cost: 20, 
            name: "Solid Repairs", passive: true, 
            desc: "–ü—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ –∫–æ—Ä–ø—É—Å–∞ –∫–æ—Ä–∞–±–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ +1 –µ–¥. —É—Ä–æ–Ω–∞ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down", "right"] 
        },
        { 
            id: "artisan_4_2", row: 4, col: 2, cost: 20, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É –°–∏–ª—ã.", 
            links: ["left", "down"] 
        },
        { 
            id: "artisan_4_3", row: 4, col: 3, cost: 20, 
            name: "Defensive Slicing", passive: true, 
            desc: "–ü—Ä–∏ –∑–∞—â–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: –¥–æ–±–∞–≤—å—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –≤—Ä–∞–≥–æ–≤.", 
            links: ["right", "down"] 
        },
        { 
            id: "artisan_4_4", row: 4, col: 4, cost: 20, 
            name: "Mental Fortress", passive: false, 
            desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã: –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ö—Ä–∏—Ç. —Ä–∞–Ω (–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç/–°–º–µ–∫–∞–ª–∫–∞) –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ü–µ–Ω—ã.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "artisan_5_1", row: 5, col: 1, cost: 25, 
            name: "Master Artisan", passive: false, 
            desc: "–†–∞–∑ –≤ —Ä–∞—É–Ω–¥ (—Å–≤–æ–±–æ–¥–Ω–æ–µ): –ü–æ–ª—É—á–∏—Ç–µ 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —É–º–µ–Ω—å—à–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–ª–µ–¥. –ø—Ä–æ–≤–µ—Ä–∫–∏ –ú–µ—Ö–∞–Ω–∏–∫–∏ –Ω–∞ 1 (–º–∏–Ω [DI]).", 
            links: ["right"] 
        },
        { 
            id: "artisan_5_2", row: 5, col: 2, cost: 25, 
            name: "Intuitive Improvements", passive: true, 
            desc: "–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–º–æ–Ω—Ç–µ: –¥–æ–±–∞–≤—å—Ç–µ [FO] (–º–∞–∫—Å = —Ä–∞–Ω–≥). –¢—Ä–∞—Ç—å—Ç–µ 2 [LS], —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å Hard Points –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ 1 (–º–∞–∫—Å +2).", 
            links: ["left"] 
        },
        { 
            id: "artisan_5_3", row: 5, col: 3, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: ["right"] 
        },
        { 
            id: "artisan_5_4", row: 5, col: 4, cost: 25, 
            name: "Comprehend Technology", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ó–Ω–∞–Ω–∏–π ([DI][DI]). –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–∞–Ω–≥ –°–∏–ª—ã –≤–º–µ—Å—Ç–æ —Ä–∞–Ω–≥–∞ –Ω–∞–≤—ã–∫–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞.", 
            links: ["left"] 
        },
    ],
"shadow": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "shadow_1_1", row: 1, col: 1, cost: 5, 
            name: "Sleight of Mind", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–µ–π, –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤—ã—Ö –∫ –°–∏–ª–µ.", 
            links: ["down"] 
        },
        { 
            id: "shadow_1_2", row: 1, col: 2, cost: 5, 
            name: "Street Smarts", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –£–ª–∏—á–Ω–æ–≥–æ —á—É—Ç—å—è –∏–ª–∏ –ó–Ω–∞–Ω–∏—è (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä).", 
            links: ["down"] 
        },
        { 
            id: "shadow_1_3", row: 1, col: 3, cost: 5, 
            name: "Codebreaker", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤–∑–ª–æ–º–∞/–¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏. –°–Ω–∏–∑—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ 1.", 
            links: ["down"] 
        },
        { 
            id: "shadow_1_4", row: 1, col: 4, cost: 5, 
            name: "Indistinguishable", passive: true, 
            desc: "–£—Å–∏–ª—å—Ç–µ (Upgrade) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –æ–ø–æ–∑–Ω–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: [] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "shadow_2_1", row: 2, col: 1, cost: 10, 
            name: "Well Rounded", passive: true, 
            desc: "–í—ã–±–µ—Ä–∏—Ç–µ 2 –ª—é–±—ã—Ö –Ω–∞–≤—ã–∫–∞. –û–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–ª—è –≤–∞—Å –∫–∞—Ä—å–µ—Ä–Ω—ã–º–∏.", 
            links: ["down"] 
        },
        { 
            id: "shadow_2_2", row: 2, col: 2, cost: 10, 
            name: "Mental Fortress", passive: false, 
            desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã: –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ö—Ä–∏—Ç. —Ä–∞–Ω (–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç/–°–º–µ–∫–∞–ª–∫–∞) –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ü–µ–Ω—ã.", 
            links: ["down"] 
        },
        { 
            id: "shadow_2_3", row: 2, col: 3, cost: 10, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right", "down"] 
        },
        { 
            id: "shadow_2_4", row: 2, col: 4, cost: 10, 
            name: "Indistinguishable", passive: true, 
            desc: "–£—Å–∏–ª—å—Ç–µ (Upgrade) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –æ–ø–æ–∑–Ω–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—ã–π —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "shadow_3_1", row: 3, col: 1, cost: 15, 
            name: "Shroud", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã. –°—Ç–∞–Ω—å—Ç–µ –Ω–µ–≤–∏–¥–∏–º—ã–º –¥–ª—è –°–∏–ª—ã –∏ —Å–∫—Ä–æ–π—Ç–µ —Å–≤–æ–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –°–∏–ª—ã –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ü–µ–Ω—ã.", 
            links: [] 
        },
        { 
            id: "shadow_3_2", row: 3, col: 2, cost: 15, 
            name: "Dodge", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ –∂–µ.", 
            links: ["right", "down"] 
        },
        { 
            id: "shadow_3_3", row: 3, col: 3, cost: 15, 
            name: "Sleight of Mind", passive: true, 
            desc: "–î–æ–±–∞–≤—å—Ç–µ [BO] –∫ –ø—Ä–æ–≤–µ—Ä–∫–∞–º –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ —Ü–µ–ª–µ–π, –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤—ã—Ö –∫ –°–∏–ª–µ.", 
            links: ["left", "down"] 
        },
        { 
            id: "shadow_3_4", row: 3, col: 4, cost: 15, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "shadow_4_1", row: 4, col: 1, cost: 20, 
            name: "Slippery Minded", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ï—Å–ª–∏ –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º –°–∏–ª—ã, –ø—Ä–æ–π–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –û–±–º–∞–Ω–∞ ([DI][DI][DI]), —á—Ç–æ–±—ã –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç.", 
            links: [] 
        },
        { 
            id: "shadow_4_2", row: 4, col: 2, cost: 20, 
            name: "Codebreaker", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤–∑–ª–æ–º–∞. –°–Ω–∏–∑—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ 1.", 
            links: ["left", "right", "down"] 
        },
        { 
            id: "shadow_4_3", row: 4, col: 3, cost: 20, 
            name: "Now You See Me", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü—Ä–æ–≤–µ—Ä–∫–∞ –û–±–º–∞–Ω–∞ ([DI][DI][DI]). –£—Å–ø–µ—Ö: –í—Ä–∞–≥–∏ (–∫–æ–ª-–≤–æ = –°–º–µ–∫–∞–ª–∫–∞) –≤ —Å—Ä. –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –∑–∞–±—ã–≤–∞—é—Ç –æ –≤–∞—Å.", 
            links: ["left", "right", "down"] 
        },
        { 
            id: "shadow_4_4", row: 4, col: 4, cost: 20, 
            name: "Dodge", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥), —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ –∂–µ.", 
            links: ["left"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "shadow_5_1", row: 5, col: 1, cost: 25, 
            name: "Force Rating", passive: true, 
            desc: "+1 –∫ —Ä–∞–Ω–≥—É –°–∏–ª—ã.", 
            links: [] 
        },
        { 
            id: "shadow_5_2", row: 5, col: 2, cost: 25, 
            name: "Anatomy Lessons", passive: false, 
            desc: "–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—Ç–∞–∫–∏: –ü–µ—Ä–µ–≤–µ—Ä–Ω–∏—Ç–µ –ñ–µ—Ç–æ–Ω –°—É–¥—å–±—ã, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–Ω, —Ä–∞–≤–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É.", 
            links: ["left"] 
        },
        { 
            id: "shadow_5_3", row: 5, col: 3, cost: 25, 
            name: "Master of Shadows", passive: true, 
            desc: "–†–∞–∑ –≤ —Ä–∞—É–Ω–¥: –ü–æ–ª—É—á–∏—Ç–µ 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–ª–µ–¥. –ø—Ä–æ–≤–µ—Ä–∫–∏ –°–∫—Ä—ã—Ç–Ω–æ—Å—Ç–∏ –∏–ª–∏ –û–±–º–∞–Ω–∞ –Ω–∞ 1.", 
            links: ["right"] 
        },
        { 
            id: "shadow_5_4", row: 5, col: 4, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: [] 
        },
    ],
"shien": [
        // --- –†–Ø–î 1 (5 XP) ---
        { 
            id: "shien_1_1", row: 1, col: 1, cost: 5, 
            name: "Side Step", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–∞–ª—å–Ω–∏—Ö –∞—Ç–∞–∫ –ø–æ –≤–∞–º –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ –¥–æ —Å–ª–µ–¥. —Ä–∞—É–Ω–¥–∞.", 
            links: [] 
        },
        { 
            id: "shien_1_2", row: 1, col: 2, cost: 5, 
            name: "Conditioned", passive: true, 
            desc: "–£–±–∏—Ä–∞–π—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ê—Ç–ª–µ—Ç–∏–∫–∏/–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏. –°–Ω–∏–∂–∞–µ—Ç —É—Ä–æ–Ω/—É—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç –ø–∞–¥–µ–Ω–∏—è.", 
            links: ["down"] 
        },
        { 
            id: "shien_1_3", row: 1, col: 3, cost: 5, 
            name: "Street Smarts", passive: true, 
            desc: "–£–±–µ—Ä–∏—Ç–µ [SE] –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞ –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫ –£–ª–∏—á–Ω–æ–≥–æ —á—É—Ç—å—è –∏–ª–∏ –ó–Ω–∞–Ω–∏—è (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä).", 
            links: ["down"] 
        },
        { 
            id: "shien_1_4", row: 1, col: 4, cost: 5, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: [] 
        },

        // --- –†–Ø–î 2 (10 XP) ---
        { 
            id: "shien_2_1", row: 2, col: 1, cost: 10, 
            name: "Toughened", passive: true, 
            desc: "+2 –∫ –ø–æ—Ä–æ–≥—É —Ä–∞–Ω.", 
            links: ["down"] 
        },
        { 
            id: "shien_2_2", row: 2, col: 2, cost: 10, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down"] 
        },
        { 
            id: "shien_2_3", row: 2, col: 3, cost: 10, 
            name: "Shien Technique", passive: true, 
            desc: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –°–º–µ–∫–∞–ª–∫—É (Cunning) –≤–º–µ—Å—Ç–æ –°–∏–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –°–≤–µ—Ç–æ–≤–æ–≥–æ –º–µ—á–∞.", 
            links: ["right", "down"] 
        },
        { 
            id: "shien_2_4", row: 2, col: 4, cost: 10, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 3 (15 XP) ---
        { 
            id: "shien_3_1", row: 3, col: 1, cost: 15, 
            name: "Parry", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ —É–¥–∞—Ä–µ –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down"] 
        },
        { 
            id: "shien_3_2", row: 3, col: 2, cost: 15, 
            name: "Counterstrike", passive: true, 
            desc: "–ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –ø–æ –≤–∞–º: –ø–æ—Ç—Ä–∞—Ç—å—Ç–µ [DE] –∏–ª–∏ 2 [TH], —á—Ç–æ–±—ã —É—Å–∏–ª–∏—Ç—å (Upgrade) –≤–∞—à—É —Å–ª–µ–¥—É—é—â—É—é –∞—Ç–∞–∫—É –ø–æ —Ü–µ–ª–∏.", 
            links: ["left", "down"] 
        },
        { 
            id: "shien_3_3", row: 3, col: 3, cost: 15, 
            name: "Grit", passive: true, 
            desc: "+1 –∫ –ø–æ—Ä–æ–≥—É —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: ["right", "down"] 
        },
        { 
            id: "shien_3_4", row: 3, col: 4, cost: 15, 
            name: "Improved Reflect", passive: true, 
            desc: "–ü—Ä–∏ –æ—Ç—Ä–∞–∂–µ–Ω–∏–∏: –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞ –¥–∞–ª–∞ [DE] –∏–ª–∏ 3 [TH], –Ω–∞–Ω–µ—Å–∏ –æ—Ç–≤–µ—Ç–Ω—ã–π —É–¥–∞—Ä (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω) –ø–æ —Ü–µ–ª–∏.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 4 (20 XP) ---
        { 
            id: "shien_4_1", row: 4, col: 1, cost: 20, 
            name: "Djem So Deflection", passive: false, 
            desc: "–ü–æ—Å–ª–µ Reflect: –ü–æ—Ç—Ä–∞—Ç—å—Ç–µ –û—á–∫–æ –°—É–¥—å–±—ã, —á—Ç–æ–±—ã —Å–±–ª–∏–∑–∏—Ç—å—Å—è —Å –≤—Ä–∞–≥–æ–º (Engage) –∫–∞–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç.", 
            links: ["right", "down"] 
        },
        { 
            id: "shien_4_2", row: 4, col: 2, cost: 20, 
            name: "Defensive Stance", passive: false, 
            desc: "–ú–∞–Ω–µ–≤—Ä: –ü–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å (–º–∞–∫—Å = —Ä–∞–Ω–≥). –ü–æ–≤—ã—Å—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—Ö–æ–¥—è—â–∏—Ö –∞—Ç–∞–∫ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è –Ω–∞ —ç—Ç–æ —á–∏—Å–ª–æ.", 
            links: ["left", "down"] 
        },
        { 
            id: "shien_4_3", row: 4, col: 3, cost: 20, 
            name: "Saber Throw", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º (–°—Ä–µ–¥–Ω—è—è). –î–æ–±–∞–≤—å [FO] –∫ —É—Ä–æ–Ω—É. [LS]: –º–µ—á –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä—É–∫—É.", 
            links: ["right", "down"] 
        },
        { 
            id: "shien_4_4", row: 4, col: 4, cost: 20, 
            name: "Reflect", passive: false, 
            desc: "–†–µ–∞–∫—Ü–∏—è: –ü–æ–ª—É—á–∏ 3 —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è. –£–º–µ–Ω—å—à–∏ —É—Ä–æ–Ω –Ω–∞ 2 + —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", 
            links: ["left", "down"] 
        },

        // --- –†–Ø–î 5 (25 XP) ---
        { 
            id: "shien_5_1", row: 5, col: 1, cost: 25, 
            name: "Falling Avalanche", passive: false, 
            desc: "–ü–æ–ª—É—á–∏—Ç–µ 2 —É—Å—Ç–∞–ª–æ—Å—Ç–∏: –î–æ–±–∞–≤—å—Ç–µ –§–∏–∑. —Å–∏–ª—É (Brawn) –∫ —É—Ä–æ–Ω—É —Å–ª–µ–¥—É—é—â–µ–π –∞—Ç–∞–∫–∏ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º.", 
            links: [] 
        },
        { 
            id: "shien_5_2", row: 5, col: 2, cost: 25, 
            name: "Dedication", passive: true, 
            desc: "+1 –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–µ (–º–∞–∫—Å 6).", 
            links: [] 
        },
        { 
            id: "shien_5_3", row: 5, col: 3, cost: 25, 
            name: "Disruptive Strike", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ê—Ç–∞–∫–∞ –°–≤–µ—Ç–æ–≤—ã–º –º–µ—á–æ–º + [FO]. –ó–∞ 1 [LS] –¥–æ–±–∞–≤—å—Ç–µ [FA] –∫ —Å–ª–µ–¥—É—é—â–µ–π –∞—Ç–∞–∫–µ –≤—Ä–∞–≥–∞ –ø–æ –≤–∞–º.", 
            links: [] 
        },
        { 
            id: "shien_5_4", row: 5, col: 4, cost: 25, 
            name: "Supreme Reflect", passive: true, 
            desc: "–ï—Å–ª–∏ –≤—ã –Ω–µ –∞—Ç–∞–∫–æ–≤–∞–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–º —Ö–æ–¥—É, —Å—Ç–æ–∏–º–æ—Å—Ç—å Reflect —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 1 —É—Å—Ç–∞–ª–æ—Å—Ç–∏.", 
            links: [] 
        },
    ],

};
const FORCE_DB = {
    "move": [
        // --- –†–Ø–î 1 (BASIC) ---
        // width: 4 ‚Äî —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç –Ω–∞ –≤—Å–µ 4 –∫–æ–ª–æ–Ω–∫–∏
        { 
            id: "move_basic", row: 1, col: 1, width: 4, cost: 10, 
            name: "Move Basic Power", passive: false, 
            desc: "–î–µ–π—Å—Ç–≤–∏–µ: –ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO], —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç (–°–∏–ª—É—ç—Ç 0) —Å –∫–æ—Ä–æ—Ç–∫–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é (–ø–æ —É–º–æ–ª—á. –∫–æ—Ä–æ—Ç–∫–∞—è).", 
            links: ["down"] 
        },

        // --- –†–Ø–î 2 ---
        { id: "move_2_1", row: 2, col: 1, cost: 5, name: "Magnitude", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 —Ü–µ–ª—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_2_2", row: 2, col: 2, cost: 10, name: "Strength", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –°–∏–ª—É—ç—Ç—É —Ü–µ–ª–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_2_3", row: 2, col: 3, cost: 5, name: "Range", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_2_4", row: 2, col: 4, cost: 5, name: "Range", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },

        // --- –†–Ø–î 3 ---
        { id: "move_3_1", row: 3, col: 1, cost: 5, name: "Magnitude", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 —Ü–µ–ª—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_3_2", row: 3, col: 2, cost: 10, name: "Strength", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –°–∏–ª—É—ç—Ç—É —Ü–µ–ª–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        
        // CONTROL (width: 2) ‚Äî –∑–∞–Ω–∏–º–∞–µ—Ç 3 –∏ 4 –∫–æ–ª–æ–Ω–∫—É
        { 
            id: "move_3_3", row: 3, col: 3, width: 2, cost: 10, 
            name: "Control", passive: true, 
            desc: "–ê—Ç–∞–∫–∞ –°–∏–ª–æ–π Move (–î–∞–ª—å–Ω—è—è). –£—Ä–æ–Ω 10 * –°–∏–ª—É—ç—Ç (–°–∏–ª—É—ç—Ç 0 = 5 —É—Ä–æ–Ω–∞). –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ Auto-fire.", 
            links: ["down"] 
        },

        // --- –†–Ø–î 4 ---
        { id: "move_4_1", row: 4, col: 1, cost: 10, name: "Magnitude", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 —Ü–µ–ª—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_4_2", row: 4, col: 2, cost: 15, name: "Strength", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –°–∏–ª—É—ç—Ç—É —Ü–µ–ª–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },
        { id: "move_4_3", row: 4, col: 3, cost: 5, name: "Control", passive: true, desc: "–í—ã –º–æ–∂–µ—Ç–µ –≤—ã—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ —Ä—É–∫ –∏–ª–∏ –∫—Ä–µ–ø–ª–µ–Ω–∏–π –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–≤.", links: ["down"] },
        { id: "move_4_4", row: 4, col: 4, cost: 15, name: "Range", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: ["down"] },

        // --- –†–Ø–î 5 ---
        { id: "move_5_1", row: 5, col: 1, cost: 10, name: "Magnitude", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 —Ü–µ–ª—å –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        { id: "move_5_2", row: 5, col: 2, cost: 20, name: "Strength", passive: false, desc: "–ü–æ—Ç—Ä–∞—Ç—å—Ç–µ [FO]: +1 –∫ –°–∏–ª—É—ç—Ç—É —Ü–µ–ª–∏ –∑–∞ —Ä–∞–Ω–≥ —Ç–∞–ª–∞–Ω—Ç–∞.", links: [] },
        // –≠—Ç–æ—Ç Control –æ–±—ã—á–Ω—ã–π (–Ω–µ —à–∏—Ä–æ–∫–∏–π)
        { id: "move_5_3", row: 5, col: 3, cost: 15, name: "Control", passive: true, desc: "–¢–æ–Ω–∫–∏–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (–∫–∞–∫ —Ä—É–∫–∞–º–∏).", links: [] },
    ]
};

// –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏–ª –¥–ª—è –≤—ã–±–æ—Ä–∞
const FORCE_LIST = [
    { id: "none", name: "‚Äî –ù–µ—Ç ‚Äî" },
    { id: "move", name: "–î–≤–∏–∂–µ–Ω–∏–µ (Move)" },
    // –°—é–¥–∞ –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ (Bind, Foresee, Influence...)
];

// –•—Ä–∞–Ω–∏—Ç ID –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–∞–ª–∞–Ω—Ç–æ–≤
        const COMBAT_SKILLS_LIST = ["–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–î—Ä–∞–∫–∞", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"];
        const ALL_SKILLS = [
            { name: "–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", char: "intellect" }, { name: "–ê—Ç–ª–µ—Ç–∏–∫–∞", char: "brawn" }, 
            { name: "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", char: "cunning" }, { name: "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", char: "cunning" }, 
            { name: "–í—ã–∂–∏–≤–∞–Ω–∏–µ", char: "cunning" }, { name: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", char: "willpower" }, { name: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", char: "willpower" }, 
            { name: "–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", char: "willpower" }, { name: "–ó–Ω–∞–Ω–∏–µ (–í—Å–µ–ª–µ–Ω–Ω–∞—è)", char: "intellect" }, 
            { name: "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –∫–æ–ª—å—Ü–æ)", char: "intellect" }, { name: "–ó–Ω–∞–Ω–∏–µ (–í–æ–π–Ω–∞)", char: "intellect" }, 
            { name: "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)", char: "intellect" }, { name: "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", char: "intellect" }, 
            { name: "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", char: "agility" }, { name: "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", char: "presence" }, 
            { name: "–ú–µ–¥–∏—Ü–∏–Ω–∞", char: "intellect" }, { name: "–ú–µ—Ö–∞–Ω–∏–∫–∞", char: "intellect" }, 
            { name: "–û–±–∞—è–Ω–∏–µ", char: "presence" }, { name: "–û–±–º–∞–Ω", char: "cunning" }, 
            { name: "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", char: "presence" }, { name: "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", char: "agility" }, 
            { name: "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", char: "agility" }, { name: "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å", char: "agility" }, 
            { name: "–°—Ç–æ–π–∫–æ—Å—Ç—å", char: "brawn" }, { name: "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë", char: "cunning" }, 
            { name: "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", char: "presence" }, 
            { name: "–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", char: "agility" }, { name: "–î—Ä–∞–∫–∞", char: "brawn" }, 
            { name: "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", char: "agility" }, { name: "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", char: "agility" }, 
            { name: "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", char: "brawn" }, { name: "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", char: "brawn" } 
        ].sort((a,b) => a.name.localeCompare(b.name));

        const STAT_CONFIG = {
            brawn: { t: "–§–∏–∑. —Å–∏–ª–∞", color: "text-red-500", border: "border-red-900/50", bg: "bg-red-950/10" },
            agility: { t: "–õ–æ–≤–∫–æ—Å—Ç—å", color: "text-green-500", border: "border-green-900/50", bg: "bg-green-950/10" },
            intellect: { t: "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç", color: "text-blue-500", border: "border-blue-900/50", bg: "bg-blue-950/10" },
            cunning: { t: "–°–º–µ–∫–∞–ª–∫–∞", color: "text-yellow-500", border: "border-yellow-900/50", bg: "bg-yellow-950/10" },
            willpower: { t: "–í–æ–ª—è", color: "text-purple-500", border: "border-purple-900/50", bg: "bg-purple-950/10" },
            presence: { t: "–•–∞—Ä–∏–∑–º–∞", color: "text-orange-500", border: "border-orange-900/50", bg: "bg-orange-950/10" }
        };
// === –°–õ–û–í–ê–†–¨ –ò–ö–û–ù–û–ö ===
const ICONS = {
    // –ö—É–±–∏–∫–∏
    "\\[BO\\]": "boost.svg",      // [BO]ost
    "\\[SE\\]": "setback.svg",    // [SE]tback
    "\\[AB\\]": "ability.svg",    // [AB]ility
    "\\[DI\\]": "difficulty.svg", // [DI]fficulty
    "\\[PR\\]": "prof.svg",       // [PR]oficiency
    "\\[CH\\]": "challenge.svg",  // [CH]allenge
    "\\[FO\\]": "force.svg",      // [FO]rce die
    
    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
    "\\[SU\\]": "success.svg",    // [SU]ccess
    "\\[AD\\]": "advantage.svg",  // [AD]vantage
    "\\[TR\\]": "triumph.svg",    // [TR]iumph
    "\\[FA\\]": "failure.svg",    // [FA]ilure
    "\\[TH\\]": "threat.svg",     // [TH]reat
    "\\[DE\\]": "despair.svg",    // [DE]spair
    "\\[LS\\]": "light.svg",      // [L]ight [S]ide
    "\\[DS\\]": "dark.svg"        // [D]ark [S]ide
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–º–µ–Ω—ã –∫–æ–¥–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏
function formatDesc(text) {
    if (!text) return "";
    let formatted = text;
    
    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ —Å–ª–æ–≤–∞—Ä—é –∏ –∑–∞–º–µ–Ω—è–µ–º –≤—Å–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    for (const [key, filename] of Object.entries(ICONS)) {
        // –°–æ–∑–¥–∞–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∑–∞–º–µ–Ω—ã
        const regex = new RegExp(key, "g");
        const imgTag = `<img src="icons/${filename}" class="dice-icon" alt="${key}">`;
        formatted = formatted.replace(regex, imgTag);
    }
    return formatted;
}
        const DEFAULT_DB = {
            races: [
                { id: "bothan", name: "–ë–æ—Ç–∞–Ω", stats: { brawn: 1, agility: 2, intellect: 2, cunning: 3, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 11, startXP: 100, special: "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë +1 —Ä–∞–Ω–≥" },
                { id: "wookiee", name: "–í—É–∫–∏", stats: { brawn: 3, agility: 2, intellect: 2, cunning: 2, willpower: 1, presence: 2 }, baseWounds: 14, baseStrain: 8, startXP: 90, special: "–Ø—Ä–æ—Å—Ç—å –≤—É–∫–∏ (+—É—Ä–æ–Ω)" },
                { id: "gand", name: "–ì–∞–Ω–¥—ã", stats: { brawn: 2, agility: 2, intellect: 2, cunning: 2, willpower: 3, presence: 1 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "" },
                { id: "gran", name: "–ì—Ä–∞–Ω", stats: { brawn: 2, agility: 2, intellect: 2, cunning: 1, willpower: 2, presence: 3 }, baseWounds: 10, baseStrain: 9, startXP: 100, special: "" },
                { id: "droid", name: "–î—Ä–æ–∏–¥—ã", stats: { brawn: 1, agility: 1, intellect: 1, cunning: 1, willpower: 1, presence: 1 }, baseWounds: 10, baseStrain: 10, startXP: 175, special: "–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–µ —Ç–µ–ª–æ, –Ω–µ –Ω—É–∂–µ–Ω –≤–æ–∑–¥—É—Ö" },
                { id: "duros", name: "–î—É—Ä–æ—Å", stats: { brawn: 1, agility: 2, intellect: 3, cunning: 2, willpower: 2, presence: 2 }, baseWounds: 11, baseStrain: 10, startXP: 100, special: "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ +1 —Ä–∞–Ω–≥" },
                { id: "zabrak", name: "–ó–∞–±—Ä–∞–∫", stats: { brawn: 2, agility: 2, intellect: 2, cunning: 2, willpower: 3, presence: 1 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "–í—ã–∂–∏–≤–∞–Ω–∏–µ +1 —Ä–∞–Ω–≥" },
                { id: "ithorian", name: "–ò—Ç–æ—Ä–∏–∞–Ω–µ—Ü", stats: { brawn: 2, agility: 1, intellect: 2, cunning: 2, willpower: 3, presence: 2 }, baseWounds: 9, baseStrain: 12, startXP: 90, special: "–ó–≤—É–∫–æ–≤–æ–π —É–¥–∞—Ä" },
                { id: "keldor", name: "–ö–µ–ª-–¥–æ—Ä", stats: { brawn: 1, agility: 2, intellect: 2, cunning: 2, willpower: 3, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "–í–∏–¥–∏—Ç –≤ —Ç–µ–º–Ω–æ—Ç–µ, –Ω—É–∂–Ω–∞ –º–∞—Å–∫–∞" },
                { id: "human", name: "–ß–µ–ª–æ–≤–µ–∫", stats: { brawn: 2, agility: 2, intellect: 2, cunning: 2, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 110, special: "+1 —Ä–∞–Ω–≥ –≤ 2 –ª—é–±—ã—Ö –Ω–∞–≤—ã–∫–∞—Ö" },
                { id: "mirialan", name: "–ú–∏—Ä–∏–∞–ª–∞–Ω", stats: { brawn: 2, agility: 3, intellect: 2, cunning: 1, willpower: 2, presence: 2 }, baseWounds: 11, baseStrain: 10, startXP: 100, special: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ +1 —Ä–∞–Ω–≥" },
                { id: "moncalamari", name: "–ú–æ–Ω –ö–∞–ª–∞–º–∞—Ä–∏", stats: { brawn: 2, agility: 2, intellect: 3, cunning: 1, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "–î—ã—à–∏—Ç –ø–æ–¥ –≤–æ–¥–æ–π" },
                { id: "nautolan", name: "–ù–∞—É—Ç–æ–ª–∞–Ω", stats: { brawn: 3, agility: 2, intellect: 2, cunning: 2, willpower: 1, presence: 2 }, baseWounds: 11, baseStrain: 9, startXP: 100, special: "–î—ã—à–∏—Ç –ø–æ–¥ –≤–æ–¥–æ–π" },
                { id: "rodian", name: "–†–æ–¥–∏–∞–Ω", stats: { brawn: 2, agility: 3, intellect: 2, cunning: 2, willpower: 1, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "–í—ã–∂–∏–≤–∞–Ω–∏–µ +1 —Ä–∞–Ω–≥" },
                { id: "sullustan", name: "–°—É–ª—É—Å—Ç–∞–Ω", stats: { brawn: 2, agility: 3, intellect: 2, cunning: 1, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "" },
                { id: "togruta", name: "–¢–æ–≥—Ä—É—Ç–∞", stats: { brawn: 1, agility: 2, intellect: 2, cunning: 3, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 10, startXP: 100, special: "–°—Ç–∞–π–Ω–∞—è —Ç–∞–∫—Ç–∏–∫–∞" },
                { id: "twilek", name: "–¢–≤–∏'–ª–µ–∫", stats: { brawn: 1, agility: 2, intellect: 2, cunning: 2, willpower: 2, presence: 3 }, baseWounds: 10, baseStrain: 11, startXP: 100, special: "–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∂–∞—Ä–µ, –û–±–∞—è–Ω–∏–µ +1" },
                { id: "trandoshan", name: "–¢—Ä–∞–Ω–¥–æ—à–∞–Ω", stats: { brawn: 3, agility: 1, intellect: 2, cunning: 2, willpower: 2, presence: 2 }, baseWounds: 12, baseStrain: 9, startXP: 90, special: "–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è" },
                { id: "cerean", name: "–¶–µ—Ä–µ–∞–Ω–µ", stats: { brawn: 2, agility: 1, intellect: 3, cunning: 2, willpower: 2, presence: 2 }, baseWounds: 10, baseStrain: 13, startXP: 90, special: "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ +1 —Ä–∞–Ω–≥" }
            ],
            careers: [
    // === –ö–û–ù–°–£–õ (FaD) ===
    { 
        id: "consular", 
        name: "–ö–æ–Ω—Å—É–ª", 
        careerSkills: ["–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"], 
        specializations: [
            { id: "healer", name: "–õ–µ–∫–∞—Ä—å", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–ú–µ–¥–∏—Ü–∏–Ω–∞"] },
            { id: "niman", name: "–£—á–µ–Ω–∏–∫ –ù–∏–º–∞–Ω–∞", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"] },
            { id: "sage", name: "–ú—É–¥—Ä–µ—Ü", bonusSkills: ["–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–û–±–∞—è–Ω–∏–µ", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)"] }
        ] 
    },

    // === –ó–ê–©–ò–¢–ù–ò–ö (FaD) ===
    { 
        id: "guardian", 
        name: "–ó–∞—â–∏—Ç–Ω–∏–∫", 
        careerSkills: ["–î—Ä–∞–∫–∞", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å"], 
        specializations: [
            { id: "peacekeeper", name: "–ú–∏—Ä–æ—Ç–≤–æ—Ä–µ—Ü", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)"] },
            { id: "protector", name: "–¢–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–ú–µ–¥–∏—Ü–∏–Ω–∞", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–°—Ç–æ–π–∫–æ—Å—Ç—å"] },
            { id: "soresu", name: "–°–æ—Ä–µ—Å—É-–∑–∞—â–∏—Ç–Ω–∏–∫", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ë–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç"] } // *–ù–∞–≤—ã–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, —Ç.–∫. –≤ PDF –ø—Ä–æ–ø—É—Å–∫
        ] 
    },

    // === –ú–ò–°–¢–ò–ö (FaD) ===
    { 
        id: "mystic", 
        name: "–ú–∏—Å—Ç–∏–∫", 
        careerSkills: ["–û–±–∞—è–Ω–∏–µ", "–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å"], 
        specializations: [
            { id: "advisor", name: "–°–æ–≤–µ—Ç–Ω–∏–∫", bonusSkills: ["–û–±–∞—è–Ω–∏–µ", "–û–±–º–∞–Ω", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë"] },
            { id: "makashi", name: "–î—É—ç–ª–∏—Å—Ç –ú–∞–∫–∞—à–∏", bonusSkills: ["–û–±–∞—è–Ω–∏–µ", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á"] },
            { id: "seer", name: "–ü—Ä–æ–≤–∏–¥–µ—Ü", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å"] }
        ] 
    },

    // === –ò–©–ï–ô–ö–ê (FaD) ===
    { 
        id: "seeker", 
        name: "–ò—â–µ–π–∫–∞", 
        careerSkills: ["–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å"], 
        specializations: [
            { id: "ataru", name: "–ë–æ–µ—Ü –ê—Ç–∞—Ä–∏", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"] },
            { id: "hunter", name: "–û—Ö–æ—Ç–Ω–∏–∫", bonusSkills: ["–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å"] },
            { id: "pathfinder", name: "–°–ª–µ–¥–æ–ø—ã—Ç", bonusSkills: ["–ú–µ–¥–∏—Ü–∏–Ω–∞", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–í—ã–∂–∏–≤–∞–Ω–∏–µ"] }
        ] 
    },

    // === –°–¢–†–ê–ñ (FaD) ===
    { 
        id: "sentinel", 
        name: "–°—Ç—Ä–∞–∂", 
        careerSkills: ["–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–û–±–º–∞–Ω", "–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å"], 
        specializations: [
            { id: "artisan", name: "–†–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫", bonusSkills: ["–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è"] },
            { id: "shadow", name: "–¢–µ–Ω—å", bonusSkills: ["–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë"] },
            { id: "shien", name: "–≠–∫—Å–ø–µ—Ä—Ç –®–∏–µ–Ω", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ"] }
        ] 
    },

    // === –í–û–ò–ù (FaD) ===
    { 
        id: "warrior", 
        name: "–í–æ–∏–Ω", 
        careerSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–î—Ä–∞–∫–∞", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–í—ã–∂–∏–≤–∞–Ω–∏–µ"], 
        specializations: [
            { id: "aggressor", name: "–ê–≥—Ä–µ—Å—Å–æ—Ä", bonusSkills: ["–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–í–æ–µ–Ω–Ω–æ–µ –¥–µ–ª–æ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë"] },
            { id: "shicho", name: "–†—ã—Ü–∞—Ä—å –®–∏-–ß–æ", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–°–≤–µ—Ç–æ–≤–æ–π –º–µ—á", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ"] },
            { id: "starfighter", name: "–ü–∏–ª–æ—Ç –ê—Å", bonusSkills: ["–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)"] }
        ] 
    },

    // === –ò–°–°–õ–ï–î–û–í–ê–¢–ï–õ–¨ (EotE) ===
    {
        id: "explorer",
        name: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å",
        careerSkills: ["–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"],
        specializations: [
            { id: "archaeologist", name: "–ê—Ä—Ö–µ–æ–ª–æ–≥", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)"] },
            { id: "driver", name: "–í–æ–¥–∏—Ç–µ–ª—å", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"] },
            { id: "fringer", name: "–õ–æ–≤—á–∏–π", bonusSkills: ["–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"] },
            { id: "scout", name: "–†–∞–∑–≤–µ–¥—á–∏–∫", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ú–µ–¥–∏—Ü–∏–Ω–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)"] },
            { id: "trader", name: "–¢–æ—Ä–≥–æ–≤–µ—Ü", bonusSkills: ["–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–û–±–º–∞–Ω", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"] }
        ]
    },

    // === –ö–û–õ–û–ù–ò–°–¢ (EotE) ===
    {
        id: "colonist",
        name: "–ö–æ–ª–æ–Ω–∏—Å—Ç",
        careerSkills: ["–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–û–±–º–∞–Ω", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–û–±–∞—è–Ω–∏–µ"],
        specializations: [
            { id: "performer", name: "–ê–∫—Ç—ë—Ä", bonusSkills: ["–î—Ä–∞–∫–∞", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–û–±–º–∞–Ω", "–û–±–∞—è–Ω–∏–µ"] },
            { id: "doctor", name: "–í—Ä–∞—á", bonusSkills: ["–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ú–µ–¥–∏—Ü–∏–Ω–∞", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"] },
            { id: "entrepreneur", name: "–î–µ–ª–µ—Ü", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"] },
            { id: "marshal", name: "–ú–∞—Ä—à–∞–ª", bonusSkills: ["–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)"] },
            { id: "politico", name: "–ü–æ–ª–∏—Ç–∏–∫", bonusSkills: ["–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–û–±–º–∞–Ω", "–û–±–∞—è–Ω–∏–µ"] },
            { id: "scholar", name: "–£—á—ë–Ω—ã–π", bonusSkills: ["–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)"] }
        ]
    },

    // === –ö–û–ù–¢–†–ê–ë–ê–ù–î–ò–°–¢ (EotE) ===
    {
        id: "smuggler",
        name: "–ö–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç",
        careerSkills: ["–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë", "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–û–±–º–∞–Ω", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ"],
        specializations: [
            { id: "thief", name: "–í–æ—Ä", bonusSkills: ["–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å"] },
            { id: "gambler", name: "–ò–≥—Ä–æ–∫", bonusSkills: ["–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–û–±–º–∞–Ω", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"] },
            { id: "scoundrel", name: "–ú–æ—à–µ–Ω–Ω–∏–∫", bonusSkills: ["–û–±–º–∞–Ω", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–û–±–∞—è–Ω–∏–µ"] },
            { id: "charmer", name: "–û–±–æ–ª—å—Å—Ç–∏—Ç–µ–ª—å", bonusSkills: ["–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–û–±–∞—è–Ω–∏–µ"] },
            { id: "smuggler_pilot", name: "–ü–∏–ª–æ—Ç (–ö–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∏—Å—Ç)", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)"] },
            { id: "gunslinger", name: "–°—Ç—Ä–µ–ª–æ–∫", bonusSkills: ["–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"] }
        ]
    },

    // === –ù–ê–Å–ú–ù–ò–ö (EotE) ===
    {
        id: "hired_gun",
        name: "–ù–∞—ë–º–Ω–∏–∫",
        careerSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–î—Ä–∞–∫–∞", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)"],
        specializations: [
            { id: "mercenary", name: "–ë–æ–µ–≤–∏–∫", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"] },
            { id: "enforcer", name: "–ì–æ–ª–æ–≤–æ—Ä–µ–∑", bonusSkills: ["–î—Ä–∞–∫–∞", "–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë"] },
            { id: "heavy", name: "–ì—Ä–æ–º–∏–ª–∞", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"] }
        ]
    },

    // === –ê–° (AoR) ===
    {
        id: "ace",
        name: "–ê—Å",
        careerSkills: ["–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)"],
        specializations: [
            { id: "rigger", name: "–ê–≤–∏–∞–º–µ—Ö–∞–Ω–∏–∫", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–°—Ç–æ–π–∫–æ—Å—Ç—å"] },
            { id: "ace_gunner", name: "–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—Å—Ç", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"] },
            { id: "beast_rider", name: "–ù–∞–µ–∑–¥–Ω–∏–∫", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)"] },
            { id: "ace_pilot", name: "–ü–∏–ª–æ—Ç (–ê—Å)", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)"] },
            { id: "hotshot", name: "–°–æ—Ä–≤–∏–≥–æ–ª–æ–≤–∞", bonusSkills: ["–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ"] }
        ]
    },

    // === –î–ò–ü–õ–û–ú–ê–¢ (AoR) ===
    {
        id: "diplomat",
        name: "–î–∏–ø–ª–æ–º–∞—Ç",
        careerSkills: ["–û–±–∞—è–Ω–∏–µ", "–û–±–º–∞–Ω", "–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"],
        specializations: [
            { id: "agitator", name: "–ê–≥–∏—Ç–∞—Ç–æ—Ä", bonusSkills: ["–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–ó–Ω–∞–Ω–∏–µ (–ü—Ä–µ—Å—Ç—É–ø–Ω—ã–π –º–∏—Ä)", "–£–ª–∏—á–Ω–æ–µ —á—É—Ç—å—ë", "–û–±–º–∞–Ω"] },
            { id: "advocate", name: "–ê–¥–≤–æ–∫–∞—Ç", bonusSkills: ["–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–û–±–º–∞–Ω", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã"] },
            { id: "analyst", name: "–ê–Ω–∞–ª–∏—Ç–∏–∫", bonusSkills: ["–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–í–æ–µ–Ω–Ω–æ–µ –¥–µ–ª–æ)", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã"] },
            { id: "quartermaster", name: "–ò–Ω—Ç–µ–Ω–¥–∞–Ω—Ç", bonusSkills: ["–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ"] },
            { id: "ambassador", name: "–ü–æ—Å–æ–ª", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –º–∏—Ä—ã)", "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–û–±–∞—è–Ω–∏–µ"] },
            { id: "propagandist", name: "–ü—Ä–æ–ø–∞–≥–∞–Ω–¥–∏—Å—Ç", bonusSkills: ["–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–í–æ–µ–Ω–Ω–æ–µ –¥–µ–ª–æ)", "–û–±–º–∞–Ω", "–û–±–∞—è–Ω–∏–µ"] }
        ]
    },

    // === –ò–ù–ñ–ï–ù–ï–† (AoR) ===
    {
        id: "engineer",
        name: "–ò–Ω–∂–µ–Ω–µ—Ä",
        careerSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)"],
        specializations: [
            { id: "saboteur", name: "–î–∏–≤–µ—Ä—Å–∞–Ω—Ç", bonusSkills: ["–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ", "–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å"] },
            { id: "mechanic", name: "–ú–µ—Ö–∞–Ω–∏–∫", bonusSkills: ["–î—Ä–∞–∫–∞", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–í–æ—Ä–æ–≤—Å—Ç–≤–æ"] },
            { id: "scientist", name: "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫", bonusSkills: ["–ó–Ω–∞–Ω–∏–µ (–ú–∏—Ñ—ã –∏ –ª–µ–≥–µ–Ω–¥—ã)", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–ú–µ–¥–∏—Ü–∏–Ω–∞"] }
        ]
    },

    // === –ö–û–ú–ê–ù–î–ò–† (AoR) ===
    {
        id: "commander",
        name: "–ö–æ–º–∞–Ω–¥–∏—Ä",
        careerSkills: ["–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–í–æ–µ–Ω–Ω–æ–µ –¥–µ–ª–æ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)"],
        specializations: [
            { id: "commodore", name: "–ö–æ–º–∞–Ω–¥–æ—Ä", bonusSkills: ["–ê—Å—Ç—Ä–æ–Ω–∞–≤–∏–≥–∞—Ü–∏—è", "–ö–æ–º–ø—å—é—Ç–µ—Ä—ã", "–ó–Ω–∞–Ω–∏–µ (–í–Ω–µ—à–Ω–µ–µ –ö–æ–ª—å—Ü–æ)", "–ó–Ω–∞–Ω–∏–µ (–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)"] },
            { id: "squadron_leader", name: "–õ–∏–¥–µ—Ä —ç—Å–∫–∞–¥—Ä–∏–ª—å–∏", bonusSkills: ["–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è", "–ú–µ—Ö–∞–Ω–∏–∫–∞", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–æ—Å–º–æ—Å)", "–ü–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ)"] },
            { id: "tactician", name: "–¢–∞–∫—Ç–∏–∫", bonusSkills: ["–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞", "–î—Ä–∞–∫–∞", "–õ–∏–¥–µ—Ä—Å—Ç–≤–æ", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)"] }
        ]
    },

    // === –°–û–õ–î–ê–¢ (AoR) ===
    {
        id: "soldier",
        name: "–°–æ–ª–¥–∞—Ç",
        careerSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–î—Ä–∞–∫–∞", "–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ú–µ–¥–∏—Ü–∏–Ω–∞", "–ó–Ω–∞–Ω–∏–µ (–í–æ–µ–Ω–Ω–æ–µ –¥–µ–ª–æ)"],
        specializations: [
            { id: "commando", name: "–ö–æ–º–º–∞–Ω–¥–æ—Å", bonusSkills: ["–•–æ–ª–æ–¥–Ω–æ–µ –æ—Ä—É–∂–∏–µ", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–î—Ä–∞–∫–∞", "–°—Ç–æ–π–∫–æ—Å—Ç—å"] },
            { id: "medic", name: "–ú–µ–¥–∏–∫", bonusSkills: ["–ú–µ–¥–∏—Ü–∏–Ω–∞", "–°—Ç–æ–π–∫–æ—Å—Ç—å", "–ó–Ω–∞–Ω–∏–µ (–ö—Å–µ–Ω–æ–ª–æ–≥–∏—è)", "–í—ã–∂–∏–≤–∞–Ω–∏–µ"] }, // *–ú–µ–¥–∏–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –≤ —Ç–∞–±–ª–∏—Ü–µ, –Ω–æ –æ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–ª—è –°–æ–ª–¥–∞—Ç–∞, –¥–æ–±–∞–≤–∏–ª –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            { id: "sharpshooter", name: "–°–Ω–∞–π–ø–µ—Ä", bonusSkills: ["–•–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–∏–µ", "–°—Ç—Ä–µ–ª—å–±–∞ (–õ—ë–≥–∫–æ–µ)", "–°—Ç—Ä–µ–ª—å–±–∞ (–¢—è–∂—ë–ª–æ–µ)", "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"] } // *–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ
        ]
    },
    
    // === –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô ===
    {
        id: "universal",
        name: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π",
        careerSkills: [], // –ù–µ—Ç –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤
        specializations: [
            { id: "recruit", name: "–†–µ–∫—Ä—É—Ç", bonusSkills: ["–ê—Ç–ª–µ—Ç–∏–∫–∞", "–í—ã–∂–∏–≤–∞–Ω–∏–µ", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å", "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞"] }
        ]
    }
],
        };

        let db = JSON.parse(JSON.stringify(DEFAULT_DB));
        let editorMode = "races";
        let currentEditItem = null;
        let statMods = { brawn: 0, agility: 0, intellect: 0, cunning: 0, willpower: 0, presence: 0 };
        let thresholdMods = { wounds: 0, strain: 0 };
        let currentStatus = { wounds: 0, strain: 0 };
        let xpData = { earned: 0, spent: 0 }; 
        let xpHistory = []; 
        let xpLog = []; 
        let skillRanks = {}; 
        let morality = 50;
let currentTreeMode = 'spec'; 

        window.onload = function() { loadDatabase(); initGenerator(); switchTab('generator'); updateMorality(50); };

        function switchTab(tab) {
    // 1. –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    const tabGen = document.getElementById('tab-generator');
    if (tabGen) tabGen.classList.add('hidden');
    
    const tabEdit = document.getElementById('tab-editor');
    if (tabEdit) tabEdit.classList.add('hidden');
    
    const tabTalents = document.getElementById('tab-talents');
    if (tabTalents) tabTalents.classList.add('hidden');

    // 2. –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫
    ['btn-generator', 'btn-editor', 'btn-talents'].forEach(id => {
        const btn = document.getElementById(id);
        if(btn) btn.className = "px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-bold transition-all hover:bg-slate-700 text-slate-400";
    });

    // 3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
    const activeTab = document.getElementById('tab-' + tab);
    if(activeTab) activeTab.classList.remove('hidden');
    
    const activeBtn = document.getElementById('btn-' + tab);
    if(activeBtn) activeBtn.className = "px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-bold transition-all bg-slate-700 text-white shadow";

    // 4. –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    if(tab === 'talents') initTalentTree();
    if(tab === 'generator') updateGeneratorUI();
    if(tab === 'editor') setEditorMode('races');
}

        function loadDatabase() { const saved = localStorage.getItem('swrpg_db_v3'); if (saved) { try { db = JSON.parse(saved); } catch(e) { db = JSON.parse(JSON.stringify(DEFAULT_DB)); } } }
        function saveDatabase() { localStorage.setItem('swrpg_db_v3', JSON.stringify(db)); }
        function resetDatabase() { if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã?")) { localStorage.removeItem('swrpg_db_v3'); db = JSON.parse(JSON.stringify(DEFAULT_DB)); setEditorMode(editorMode); initGenerator(); alert("–°–±—Ä–æ—Å!"); } }
        function exportData() { const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(db)); const a = document.createElement('a'); a.href = dataStr; a.download = "swrpg_db.json"; document.body.appendChild(a); a.click(); a.remove(); }
        function importData(input) { const file = input.files[0]; if(!file) return; const reader = new FileReader(); reader.onload = (e) => { try { db = JSON.parse(e.target.result); saveDatabase(); setEditorMode(editorMode); alert("–ó–∞–≥—Ä—É–∂–µ–Ω–æ!"); } catch(err) { alert("–û—à–∏–±–∫–∞!"); } }; reader.readAsText(file); }

        function initGenerator() {
            const raceSel = document.getElementById('gen-race');
            const careerSel = document.getElementById('gen-career');
            const prevRace = raceSel.value; const prevCareer = careerSel.value;
            raceSel.innerHTML = ""; careerSel.innerHTML = "";
            db.races.forEach(r => { const opt = document.createElement('option'); opt.value = r.id; opt.textContent = r.name; raceSel.appendChild(opt); });
            db.careers.forEach(c => { const opt = document.createElement('option'); opt.value = c.id; opt.textContent = c.name; careerSel.appendChild(opt); });
            if(prevRace && db.races.find(r=>r.id===prevRace)) raceSel.value = prevRace;
            if(prevCareer && db.careers.find(c=>c.id===prevCareer)) careerSel.value = prevCareer;
            raceSel.onchange = () => { resetStatMods(); updateGeneratorUI(); };
            careerSel.onchange = updateSpecsAndUI;
            document.getElementById('gen-spec').onchange = updateGeneratorUI;
            document.getElementById('val-armor').oninput = updateGeneratorUI;
            updateSpecsAndUI();
// –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–∫–∏ –°–∏–ª—ã
    const f1 = document.getElementById('force-p1');
    const f2 = document.getElementById('force-p2');
    f1.innerHTML = ""; f2.innerHTML = "";
    
    FORCE_LIST.forEach(p => {
        f1.add(new Option(p.name, p.id));
        f2.add(new Option(p.name, p.id));
    });
        }

function updateForceTabs() {
            const p1 = document.getElementById('force-p1').value;
            const p2 = document.getElementById('force-p2').value;
            const btn1 = document.getElementById('btn-tree-f1');
            const btn2 = document.getElementById('btn-tree-f2');

            if (p1 && p1 !== 'none') {
                btn1.classList.remove('hidden');
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ü–µ–ø–æ—á–∫—É (?.) –Ω–∞ —Å–ª—É—á–∞–π –æ—à–∏–±–æ–∫
                const forceItem = FORCE_LIST.find(x => x.id === p1);
                btn1.textContent = forceItem ? forceItem.name : "–°–∏–ª–∞ 1";
            } else {
                btn1.classList.add('hidden');
                if (currentTreeMode === 'force1') switchTreeMode('spec');
            }

            if (p2 && p2 !== 'none') {
                btn2.classList.remove('hidden');
                const forceItem = FORCE_LIST.find(x => x.id === p2);
                btn2.textContent = forceItem ? forceItem.name : "–°–∏–ª–∞ 2";
            } else {
                btn2.classList.add('hidden');
                if (currentTreeMode === 'force2') switchTreeMode('spec');
            }
        }
function switchTreeMode(mode) {
    currentTreeMode = mode;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫
    ['spec', 'force1', 'force2'].forEach(m => {
        const btn = document.getElementById('btn-tree-' + m);
        if (!btn) return;
        if (m === mode) {
            btn.className = "px-4 py-1.5 rounded text-[10px] font-bold uppercase transition bg-yellow-600 text-white shadow-lg border border-yellow-500 transform scale-105";
        } else {
            btn.className = "px-4 py-1.5 rounded text-[10px] font-bold uppercase transition bg-slate-800 text-slate-400 border border-slate-700 hover:bg-slate-700 hover:text-white";
        }
    });

    initTalentTree(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–µ—Ä–µ–≤–æ
}

        function resetStatMods() {
            statMods = { brawn: 0, agility: 0, intellect: 0, cunning: 0, willpower: 0, presence: 0 };
            thresholdMods = { wounds: 0, strain: 0 };
            currentStatus = { wounds: 0, strain: 0 };
            xpData = { earned: 0, spent: 0 }; 
            xpHistory = []; xpLog = [];
            skillRanks = {}; 
            morality = 50; updateMorality(50);
        }

        function updateSpecsAndUI() {
            const careerId = document.getElementById('gen-career').value;
            const career = db.careers.find(c => c.id === careerId);
            const specSel = document.getElementById('gen-spec');
            specSel.innerHTML = "";
            if (career && career.specializations) {
                career.specializations.forEach(s => { const opt = document.createElement('option'); opt.value = s.id; opt.textContent = s.name; specSel.appendChild(opt); });
            }
            updateGeneratorUI();
initTalentTree();
        }

        function modifyStat(statKey, delta) {
            const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
            if (!race) return;
            const newVal = race.stats[statKey] + (statMods[statKey] || 0) + delta;
            if (newVal >= 1 && newVal <= 7) { statMods[statKey] = (statMods[statKey] || 0) + delta; updateGeneratorUI(); }
        }
        function modifyThreshold(type, delta) { thresholdMods[type] += delta; updateGeneratorUI(); }
        function modifyCurrent(type, delta) { currentStatus[type] = Math.max(0, currentStatus[type] + delta); updateGeneratorUI(); }

        // --- MORALITY LOGIC (DUAL COLOR) ---
        function updateMorality(val) {
            // –°—á–∏—Ç–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ –Ω–µ –¥–∞–µ–º –µ–º—É –≤—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã 1-100 –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏
            morality = Math.min(100, Math.max(1, parseInt(val) || 1));
            
            const bar = document.getElementById('morality-bar');
            const input = document.getElementById('morality-val');
            const statusLabel = document.getElementById('morality-status'); 
            
            // !!! –ì–õ–ê–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
            // –ú–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ –º–æ–∂–Ω–æ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –Ω–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.
            // –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç–∏—Ä–∞—Ç—å —Ü–∏—Ñ—Ä—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–µ –±–µ–∑ –ø–æ–º–µ—Ö.
            if (document.activeElement !== input) {
                input.value = morality;
            }

            bar.style.width = morality + '%';
            
            // –õ–æ–≥–∏–∫–∞ —Ç–µ–∫—Å—Ç–∞ (–°–≤–µ—Ç–ª–∞—è/–¢–µ–º–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)
            let status = "–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ";
            let textClass = "text-slate-400";

            if (morality <= 10) {
                status = "–¢—å–º–∞: –≠—Ñ—Ñ–µ–∫—Ç 2";
                textClass = "text-red-500 font-black animate-pulse";
            } else if (morality <= 20) {
                status = "–¢—å–º–∞: –≠—Ñ—Ñ–µ–∫—Ç 1";
                textClass = "text-red-400 font-bold";
            } else if (morality <= 30) {
                status = "–¢—ë–º–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞";
                textClass = "text-red-300";
            } else if (morality >= 90) {
                status = "–°–≤–µ—Ç: –≠—Ñ—Ñ–µ–∫—Ç 2";
                textClass = "text-blue-100 font-black animate-pulse shadow-white";
            } else if (morality >= 80) {
                status = "–°–≤–µ—Ç: –≠—Ñ—Ñ–µ–∫—Ç 1";
                textClass = "text-blue-200 font-bold";
            } else if (morality >= 70) {
                status = "–°–≤–µ—Ç–ª–∞—è —Å—Ç–æ—Ä–æ–Ω–∞";
                textClass = "text-blue-300";
            } else {
                status = "–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ";
                textClass = "text-slate-400";
            }

            if(statusLabel) {
                statusLabel.textContent = status;
                statusLabel.className = `text-[10px] uppercase font-bold ml-2 transition-colors leading-none ${textClass}`;
            }
        }
      
        function undoLastXP() {
            if (xpHistory.length === 0) return;
            const state = xpHistory.pop();
            xpData.earned = state.earned;
            xpData.spent = state.spent;
            xpLog = state.log;
            updateGeneratorUI();
        }

        function renderXPLogDisplay() {
            const list = document.getElementById('xp-log-list');
            list.innerHTML = "";
            if (xpLog.length === 0) {
                list.innerHTML = `<li class="text-xs text-slate-600 italic text-center mt-2">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</li>`;
            } else {
                xpLog.forEach(entry => {
                    list.innerHTML += `<li class="text-xs font-mono flex justify-between border-b border-slate-800/50 pb-0.5 last:border-0">${entry}</li>`;
                });
            }
            
            const tooltip = document.getElementById('undo-tooltip');
            if (xpHistory.length > 0) {
                const lastState = xpHistory[xpHistory.length - 1];
                tooltip.textContent = "–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ";
            }
        }

        function setSkillRank(skillName, rank) {
            const current = skillRanks[skillName] || 0;
            if (current === rank) skillRanks[skillName] = 0; else skillRanks[skillName] = rank;
            updateGeneratorUI();
        }
        function toggleSkillDie(skillName, type) {
            const current = skillRanks[skillName] || 0;
            if(type==='green') skillRanks[skillName] = current + 1;
            else if(type==='yellow') skillRanks[skillName] = Math.max(0, current - 1);
            else if(type==='empty') skillRanks[skillName] = current + 1;
            updateGeneratorUI();
        }

        // === –ó–ê–ú–ï–ù–ò–¢–¨ –§–£–ù–ö–¶–ò–Æ renderSkillRow –¶–ï–õ–ò–ö–û–ú ===
        // === –ó–ê–ú–ï–ù–ò–¢–¨ –§–£–ù–ö–¶–ò–Æ renderSkillRow –¶–ï–õ–ò–ö–û–ú ===
    function renderSkillRow(skill, finalStats, isCareer, isSpec) {
        const charVal = finalStats[skill.char];
        const rank = skillRanks[skill.name] || 0;
        const totalPool = Math.max(charVal, rank);
        const yellow = Math.min(charVal, rank);
        const green = totalPool - yellow;
        
        // --- 1. –ö–†–ê–°–ò–í–´–ï –ó–ù–ê–ß–ö–ò (BADGES) ---
        // –°–æ–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–∫–∏ –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É—é —Å—Ç–æ–ø–∫—É —Å–ª–µ–≤–∞
        let badgesHtml = `<div class="flex flex-col gap-0.5 items-center justify-center w-4 mr-1">`;
        
        if (isCareer) {
            // –ó–µ–ª–µ–Ω—ã–π –∑–Ω–∞—á–æ–∫ [–ö]
            badgesHtml += `<div class="w-3 h-3 flex items-center justify-center rounded-[2px] border border-green-800 bg-green-950 text-[7px] font-black text-green-500 select-none" title="–ö–∞—Ä—å–µ—Ä–Ω—ã–π –Ω–∞–≤—ã–∫">–ö</div>`;
        }
        
        if (isSpec) {
            // –°–∏–Ω–∏–π –∑–Ω–∞—á–æ–∫ [–°]
            badgesHtml += `<div class="w-3 h-3 flex items-center justify-center rounded-[2px] border border-blue-800 bg-blue-950 text-[7px] font-black text-blue-500 select-none" title="–ù–∞–≤—ã–∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏">–°</div>`;
        }
        badgesHtml += `</div>`;

        // --- 2. –õ–û–ì–ò–ö–ê –ß–ï–ö–ë–û–ö–°–ê (–í–´–ë–û–† 3-–•) ---
        let selectionCheckbox = "";
        
        // –ë–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
        let rowClass = "hover:bg-slate-800/50 transition border-l-2 border-transparent"; 

        // –ï—Å–ª–∏ —ç—Ç–æ –∫–∞—Ä—å–µ—Ä–Ω—ã–π –Ω–∞–≤—ã–∫ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º —á–µ–∫–±–æ–∫—Å –¥–ª—è —Å–∫–∏–¥–∫–∏
        if (isCareer) {
            const isSelected = selectedCareerSkills.includes(skill.name);
            const isDisabled = !isSelected && selectedCareerSkills.length >= 3;
            
            // –°—Ç–∏–ª—å —á–µ–∫–±–æ–∫—Å–∞: –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω ‚Äî –ó–æ–ª–æ—Ç–æ–π, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –°–µ—Ä—ã–π
            const checkBorder = isSelected ? "border-yellow-500 bg-yellow-500" : "border-slate-700 bg-slate-900 group-hover/chk:border-slate-500";
            const checkIcon = isSelected ? `<span class="text-[8px] text-black font-bold">‚úì</span>` : "";
            
            selectionCheckbox = `
            <label class="cursor-pointer relative group/chk flex items-center justify-center h-full w-4">
                <input type="checkbox" class="peer sr-only" 
                    onchange="toggleCareerSelection('${skill.name}')" 
                    ${isSelected ? 'checked' : ''} 
                    ${isDisabled ? 'disabled' : ''}>
                
                <div class="w-3 h-3 border ${isDisabled ? 'opacity-20 cursor-not-allowed' : ''} ${checkBorder} rounded-[2px] flex items-center justify-center transition-all shadow-sm">
                    ${checkIcon}
                </div>
            </label>`;
            
            // –ï—Å–ª–∏ –Ω–∞–≤—ã–∫ –í–´–ë–†–ê–ù –ì–ê–õ–û–ß–ö–û–ô ‚Äî –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –∑–æ–ª–æ—Ç—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º
            if (isSelected) {
                 rowClass = "bg-yellow-900/10 border-l-2 border-yellow-500 hover:bg-slate-800/50 transition";
            } 
            // –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –∫–∞—Ä—å–µ—Ä–Ω—ã–π (–Ω–æ –Ω–µ –≤—ã–±—Ä–∞–Ω) ‚Äî –ª–µ–≥–∫–∏–π –∑–µ–ª–µ–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫
            else {
                 rowClass = "bg-green-900/5 border-l-2 border-green-900/20 hover:bg-slate-800/50 transition";
            }
        }
        
        // –ï—Å–ª–∏ —ç—Ç–æ –Ω–∞–≤—ã–∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω –∫–∞–∫ –∫–∞—Ä—å–µ—Ä–Ω—ã–π) ‚Äî –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Å–∏–Ω–∏–º
        if (isSpec && !selectedCareerSkills.includes(skill.name)) {
             rowClass = "bg-blue-900/5 border-l-2 border-blue-500 hover:bg-slate-800/50 transition";
        }

        // --- 3. –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–í–ê–î–†–ê–¢–ò–ö–û–í –†–ê–ù–ì–ê ---
        let rankHtml = '<div class="flex gap-0.5">';
        for(let i=1; i<=5; i++) {
            const filled = i <= rank;
            let bg = "bg-slate-800 border-slate-700";
            let cursor = "cursor-default";
            let clickAction = "";
            let title = `–†–∞–Ω–≥ ${i}`;

            if (filled) {
                bg = "bg-yellow-500 shadow-[0_0_5px_rgba(234,179,8,0.5)] border-yellow-600";
                if (i === rank) {
                    cursor = "cursor-pointer hover:bg-red-500 hover:border-red-600 transition-colors";
                    clickAction = `onclick="refundSkillRank('${skill.name}', ${i})"`;
                    title = "–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ XP";
                }
            } else {
                if (i === rank + 1) {
                    cursor = "cursor-pointer hover:bg-slate-600";
                    clickAction = `onclick="buySkillRank('${skill.name}', ${i}, ${isCareer}, ${isSpec})"`;
                    title = "–ö—É–ø–∏—Ç—å —Ä–∞–Ω–≥";
                }
            }
            rankHtml += `<div ${clickAction} class="rank-box w-2 h-3 rounded-[1px] border ${bg} ${cursor}" title="${title}"></div>`;
        }
        rankHtml += '</div>';

        // --- 4. –ü–£–õ –ö–£–ë–ò–ö–û–í ---
        let poolHtml = '<div class="flex gap-0.5 items-center justify-end h-full">';
        for(let i=0; i<yellow; i++) poolHtml += `<div class="shape-hex w-3 h-3 bg-yellow-400 border border-yellow-600"></div>`;
        for(let i=0; i<green; i++) poolHtml += `<div class="shape-rhombus w-3 h-3 bg-green-500 border border-green-600" style="transform: scale(1.15);"></div>`;
        poolHtml += '</div>';

        return `
            <tr class="${rowClass}">
                <td class="p-2 w-10 flex-shrink-0 flex items-center justify-start">
                    ${badgesHtml}
                    ${selectionCheckbox}
                </td>
                
                <td class="p-2 text-xs font-medium text-slate-300 flex-grow">
                    <div class="flex flex-col leading-none">
                        <span>${skill.name}</span>
                        <span class="text-[8px] text-slate-500 mt-0.5 uppercase">${STAT_CONFIG[skill.char].t} (${charVal})</span>
                    </div>
                </td>
                
                <td class="p-2 w-20 flex-shrink-0">${rankHtml}</td>
                
                <td class="p-2 w-24 text-right flex-shrink-0 pr-4">${poolHtml}</td>
            </tr>
        `;
    }

        function updateGeneratorUI() {
            const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
            const career = db.careers.find(c => c.id === document.getElementById('gen-career').value);
            const spec = career ? career.specializations.find(s => s.id === document.getElementById('gen-spec').value) : null;
            const armor = parseInt(document.getElementById('val-armor').value) || 0;
            if (!race) return;

            document.getElementById('gen-race-info').textContent = `XP: ${race.startXP} | ${race.special}`;

            const finalStats = {};
            const statsDiv = document.getElementById('gen-stats-grid');
            statsDiv.innerHTML = '';

            Object.keys(race.stats).forEach(key => {
                finalStats[key] = race.stats[key] + (statMods[key] || 0);
                const val = finalStats[key];
                const conf = STAT_CONFIG[key];
                const isModified = (statMods[key] || 0) > 0;
                const valueColor = isModified ? "text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]" : "text-white";
                const borderClass = isModified ? "border-yellow-500/60 shadow-[0_0_10px_rgba(234,179,8,0.1)]" : conf.border;

                // –ö–Ω–æ–ø–∫–∞ "-" –ø—Ä–æ—Å—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç (—Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/–æ—à–∏–±–∫–∏)
                // –ö–Ω–æ–ø–∫–∞ "+" –≤—ã–∑—ã–≤–∞–µ—Ç –ü–û–ö–£–ü–ö–£ (tryBuyStat)
                statsDiv.innerHTML += `
                    <div class="stat-card relative flex flex-col items-center p-2 rounded border bg-slate-900 ${borderClass} overflow-hidden group">
                        <span class="text-[9px] uppercase font-black opacity-90 mb-0 leading-none ${conf.color}">${conf.t}</span>
                        <div class="flex items-center gap-2 z-20 mt-1">
                            <button onclick="tryRefundStat('${key}')" class="w-4 h-4 rounded bg-slate-800 hover:bg-red-600 text-slate-400 hover:text-white flex items-center justify-center font-bold text-[10px] shadow border border-slate-700 transition" title="–í–µ—Ä–Ω—É—Ç—å XP">-</button>
                            <span class="text-4xl font-black ${valueColor} z-10 w-8 text-center leading-none tracking-tighter transition-colors">${val}</span>
                            <button onclick="tryBuyStat('${key}')" class="w-4 h-4 rounded bg-slate-800 hover:bg-green-600 text-slate-400 hover:text-white flex items-center justify-center font-bold text-[10px] shadow border border-slate-700 transition" title="–ö—É–ø–∏—Ç—å">+</button>
                        </div>
                        <div class="absolute -bottom-2 -right-1 text-6xl opacity-5 font-black pointer-events-none ${conf.color}">${val}</div>
                    </div>`;
            });

            const totalXP = race.startXP + xpData.earned;
            const availXP = totalXP - xpData.spent;
            document.getElementById('xp-total-display').textContent = totalXP;
            document.getElementById('xp-avail-display').textContent = availXP;
            
            const undoBtn = document.getElementById('btn-xp-undo');
            undoBtn.disabled = xpHistory.length === 0;
            undoBtn.style.opacity = xpHistory.length === 0 ? '0.2' : '1';
            
            renderXPLogDisplay();

            const maxWounds = race.baseWounds + finalStats.brawn + thresholdMods.wounds;
            const maxStrain = race.baseStrain + finalStats.willpower + thresholdMods.strain;
            const woundPct = Math.min(100, (currentStatus.wounds / maxWounds) * 100);
            const strainPct = Math.min(100, (currentStatus.strain / maxStrain) * 100);

            document.getElementById('card-wounds').innerHTML = `
                <div class="flex justify-between items-start mb-1"><div class="flex items-center gap-1.5"><div class="p-1 bg-red-500/10 rounded-full text-red-500"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><div class="text-xs uppercase font-bold text-slate-400 tracking-wider">–†–∞–Ω—ã</div></div><div class="flex items-center gap-1 text-xs font-mono text-slate-400">MAX <button onclick="modifyThreshold('wounds', -1)" class="mini-btn">-</button><span class="text-white font-bold w-3 text-center">${maxWounds}</span><button onclick="modifyThreshold('wounds', 1)" class="mini-btn">+</button></div></div>
                <div class="flex items-center justify-between gap-2 mb-2 flex-grow"><button onclick="modifyCurrent('wounds', -1)" class="w-8 h-8 rounded bg-slate-950 border border-slate-700 hover:border-green-500 text-slate-400 hover:text-green-500 font-bold text-lg transition flex items-center justify-center">-</button><div class="text-4xl font-black text-white">${currentStatus.wounds}</div><button onclick="modifyCurrent('wounds', 1)" class="w-8 h-8 rounded bg-slate-950 border border-slate-700 hover:border-red-500 text-slate-400 hover:text-red-500 font-bold text-lg transition flex items-center justify-center">+</button></div>
                <div class="w-full bg-slate-950 h-1.5 rounded-full overflow-hidden border border-slate-800"><div class="bg-red-600 h-full transition-all duration-300" style="width: ${woundPct}%"></div></div>`;

            document.getElementById('card-strain').innerHTML = `
                <div class="flex justify-between items-start mb-1"><div class="flex items-center gap-1.5"><div class="p-1 bg-blue-500/10 rounded-full text-blue-500"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div><div class="text-xs uppercase font-bold text-slate-400 tracking-wider">–£—Å—Ç–∞–ª–æ—Å—Ç—å</div></div><div class="flex items-center gap-1 text-xs font-mono text-slate-400">MAX <button onclick="modifyThreshold('strain', -1)" class="mini-btn">-</button><span class="text-white font-bold w-3 text-center">${maxStrain}</span><button onclick="modifyThreshold('strain', 1)" class="mini-btn">+</button></div></div>
                <div class="flex items-center justify-between gap-2 mb-2 flex-grow"><button onclick="modifyCurrent('strain', -1)" class="w-8 h-8 rounded bg-slate-950 border border-slate-700 hover:border-green-500 text-slate-400 hover:text-green-500 font-bold text-lg transition flex items-center justify-center">-</button><div class="text-4xl font-black text-white">${currentStatus.strain}</div><button onclick="modifyCurrent('strain', 1)" class="w-8 h-8 rounded bg-slate-950 border border-slate-700 hover:border-blue-500 text-slate-400 hover:text-blue-500 font-bold text-lg transition flex items-center justify-center">+</button></div>
                <div class="w-full bg-slate-950 h-1.5 rounded-full overflow-hidden border border-slate-800"><div class="bg-blue-500 h-full transition-all duration-300" style="width: ${strainPct}%"></div></div>`;

            document.getElementById('val-soak').textContent = finalStats.brawn + armor;

            const generalTbody = document.getElementById('gen-skills-general-body');
            const combatTbody = document.getElementById('gen-skills-combat-body');
            generalTbody.innerHTML = ''; combatTbody.innerHTML = '';
            const careerSkills = new Set(career ? career.careerSkills : []);
            const specSkills = new Set(spec ? spec.bonusSkills : []);

            ALL_SKILLS.forEach(skill => {
                const isCombat = COMBAT_SKILLS_LIST.includes(skill.name);
                const html = renderSkillRow(skill, finalStats, careerSkills.has(skill.name), specSkills.has(skill.name));
                if(isCombat) combatTbody.innerHTML += html; else generalTbody.innerHTML += html;
            });

            // ADDED: Calculate Total Ranks
            const totalRanks = Object.values(skillRanks).reduce((a, b) => a + b, 0);
            const ranksDisplay = document.getElementById('total-ranks-display');
            if(ranksDisplay) ranksDisplay.textContent = totalRanks;
        }

        // ... Editor functions preserved ...
        function setEditorMode(mode) { editorMode = mode; renderEditorList(); hideEditorForm(); }
        function renderEditorList() { const list = document.getElementById('editor-list'); list.innerHTML = ""; (editorMode === 'races' ? db.races : db.careers).forEach(item => { list.innerHTML += `<div onclick="loadItemToForm('${item.id}')" class="p-2 bg-slate-800 hover:bg-slate-700 rounded cursor-pointer border border-transparent hover:border-slate-500 mb-1 flex justify-between"><span class="font-bold text-xs text-slate-300">${item.name}</span></div>`; }); }
        function hideEditorForm() { document.getElementById('editor-form').classList.add('hidden'); document.getElementById('editor-form-placeholder').classList.remove('hidden'); }
        function addNewItem() { const id = "c_"+Date.now(); if(editorMode==='races') db.races.push({id, name:"New Race", stats:{brawn:2,agility:2,intellect:2,cunning:2,willpower:2,presence:2},baseWounds:10,baseStrain:10,startXP:100,special:""}); else db.careers.push({id, name:"New Career", careerSkills:[], specializations:[{id:id+"_s", name:"Spec 1", bonusSkills:[]}]}); saveDatabase(); renderEditorList(); loadItemToForm(id); }
        function loadItemToForm(id) { 
            const items = editorMode === 'races' ? db.races : db.careers; 
            currentEditItem = items.find(i=>i.id===id); 
            if(!currentEditItem) return; 
            document.getElementById('editor-form-placeholder').classList.add('hidden');
            document.getElementById('editor-form').classList.remove('hidden');
            document.getElementById('edit-id').value = id; 
            document.getElementById('edit-name').value = currentEditItem.name;
            if(editorMode==='races') { 
                document.getElementById('form-race-fields').classList.remove('hidden'); document.getElementById('form-career-fields').classList.add('hidden'); 
                ['brawn','agility','intellect','cunning','willpower','presence'].forEach(k => document.getElementById('edit-'+k).value = currentEditItem.stats[k]);
                document.getElementById('edit-baseWounds').value = currentEditItem.baseWounds;
                document.getElementById('edit-baseStrain').value = currentEditItem.baseStrain;
                document.getElementById('edit-startXP').value = currentEditItem.startXP;
                document.getElementById('edit-special').value = currentEditItem.special;
            } else {
                document.getElementById('form-race-fields').classList.add('hidden'); document.getElementById('form-career-fields').classList.remove('hidden');
                const grid = document.getElementById('edit-career-skills-grid'); grid.innerHTML = ALL_SKILLS.map(s => `<label class="flex gap-1 items-center hover:bg-slate-800 p-0.5 rounded cursor-pointer"><input type="checkbox" class="career-skill-cb accent-yellow-600" value="${s.name}" ${currentEditItem.careerSkills.includes(s.name)?'checked':''}> <span class="text-slate-300">${s.name}</span></label>`).join('');
                document.getElementById('specs-container').innerHTML = currentEditItem.specializations.map((s,i) => `<div class="bg-slate-900 p-1.5 rounded border border-slate-700 flex gap-2 items-center"><input class="bg-slate-950 border border-slate-700 rounded px-1 w-full text-xs text-slate-300" value="${s.name}" onchange="currentEditItem.specializations[${i}].name=this.value;saveDatabase()"><button type="button" onclick="currentEditItem.specializations.splice(${i},1);saveDatabase();loadItemToForm('${id}')" class="text-red-500 hover:text-red-400 text-[10px]">Del</button></div>`).join('');
            }
        }
        function addSpecialization() { if(currentEditItem) { currentEditItem.specializations.push({id:Date.now(), name:"New Spec", bonusSkills:[]}); saveDatabase(); loadItemToForm(currentEditItem.id); } }
        function deleteCurrentItem() { if(currentEditItem && confirm("Delete?")) { if(editorMode==='races') db.races = db.races.filter(i=>i.id!==currentEditItem.id); else db.careers = db.careers.filter(i=>i.id!==currentEditItem.id); saveDatabase(); renderEditorList(); hideEditorForm(); } }
        function saveCurrentItem() { 
            if(!currentEditItem) return; 
            currentEditItem.name = document.getElementById('edit-name').value;
            if(editorMode==='races') {
                ['brawn','agility','intellect','cunning','willpower','presence'].forEach(k => currentEditItem.stats[k] = parseInt(document.getElementById('edit-'+k).value));
                currentEditItem.baseWounds = parseInt(document.getElementById('edit-baseWounds').value);
                currentEditItem.baseStrain = parseInt(document.getElementById('edit-baseStrain').value);
                currentEditItem.startXP = parseInt(document.getElementById('edit-startXP').value);
                currentEditItem.special = document.getElementById('edit-special').value;
            } else {
                currentEditItem.careerSkills = Array.from(document.querySelectorAll('.career-skill-cb:checked')).map(cb=>cb.value);
            }
            saveDatabase(); renderEditorList(); alert("Saved");
        }
    </script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js');
    });
  }

// ===========================================
// === –ì–õ–ê–í–ù–´–ô –°–ö–†–ò–ü–¢ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô) ===
// ===========================================

    let isSaveReady = false; 
    let charAvatar = ""; 
    let forceRating = 1;
    let criticalInjuries = []; 
    let purchasedTalents = [];
    let selectedCareerSkills = []; // –ü–µ—Ä–µ–Ω–µ—Å–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–µ—Ä—Ö

    // ============================================================
    // === –ü–û–õ–ù–´–ô –ë–õ–û–ö –õ–û–ì–ò–ö–ò –ù–ê–í–´–ö–û–í ===
    // ============================================================

    // 1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≥–∞–ª–æ—á–∫–∏ (–≤—ã–±–æ—Ä 3-—Ö –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤)
    function toggleCareerSelection(skillName) {
        const index = selectedCareerSkills.indexOf(skillName);
        if (index > -1) {
            // –ï—Å–ª–∏ —É–∂–µ –≤—ã–±—Ä–∞–Ω - —É–±–∏—Ä–∞–µ–º
            selectedCareerSkills.splice(index, 1);
        } else {
            // –ï—Å–ª–∏ –≤—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤—ã–π
            if (selectedCareerSkills.length >= 3) {
                alert("–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ 3 –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –Ω–∞–≤—ã–∫–∞ –¥–ª—è —Å–∫–∏–¥–∫–∏!");
                // (–ß–µ–∫–±–æ–∫—Å –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ updateGeneratorUI)
            } else {
                selectedCareerSkills.push(skillName);
            }
        }
        updateGeneratorUI();
        saveSession();
    }

    // 2. –ü–û–ö–£–ü–ö–ê —Ä–∞–Ω–≥–∞ (Buy)
    function buySkillRank(skillName, targetRank, isCareerBase, isSpec) {
        const currentRank = skillRanks[skillName] || 0;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏
        if (targetRank !== currentRank + 1) {
            alert(`–ù—É–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å —Ä–∞–Ω–≥–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏! –°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏—Ç–µ —Ä–∞–Ω–≥ ${currentRank + 1}.`);
            return;
        }

        // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
        const isCheap = selectedCareerSkills.includes(skillName);
        let cost = 0;
        if (isCheap) {
            cost = targetRank * 5;     // –ö–∞—Ä—å–µ—Ä–Ω—ã–π (—Å –≥–∞–ª–æ—á–∫–æ–π)
        } else {
            cost = (targetRank * 5) + 5; // –û–±—ã—á–Ω—ã–π
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ XP
        const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
        const totalXP = (race ? race.startXP : 0) + xpData.earned;
        const availXP = totalXP - xpData.spent;

        if (availXP < cost) {
            alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ XP! –ù—É–∂–Ω–æ ${cost}, —É –≤–∞—Å ${availXP}.`);
            return;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        if (confirm(`–£–ª—É—á—à–∏—Ç—å –Ω–∞–≤—ã–∫ "${skillName}" –¥–æ —Ä–∞–Ω–≥–∞ ${targetRank} –∑–∞ ${cost} XP?`)) {
            skillRanks[skillName] = targetRank;
            applyXP('buy_skill', cost, `–ù–∞–≤—ã–∫ ${skillName} ${targetRank}`);
        }
    }

    // 3. –í–û–ó–í–†–ê–¢ —Ä–∞–Ω–≥–∞ (Refund)
    function refundSkillRank(skillName, rankToRefund) {
        const currentRank = skillRanks[skillName] || 0;
        
        // –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –ü–û–°–õ–ï–î–ù–ò–ô –∫—É–ø–ª–µ–Ω–Ω—ã–π —Ä–∞–Ω–≥
        if (rankToRefund !== currentRank) {
            return; 
        }

        // –†–∞—Å—á–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ (—Ç–∞ –∂–µ —Ñ–æ—Ä–º—É–ª–∞)
        const isCheap = selectedCareerSkills.includes(skillName);
        let refundAmount = 0;
        if (isCheap) {
            refundAmount = rankToRefund * 5;
        } else {
            refundAmount = (rankToRefund * 5) + 5;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        if (confirm(`–í–µ—Ä–Ω—É—Ç—å —Ä–∞–Ω–≥ ${rankToRefund} –Ω–∞–≤—ã–∫–∞ "${skillName}" –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–∞–¥ ${refundAmount} XP?`)) {
            skillRanks[skillName] = currentRank - 1;
            if (skillRanks[skillName] === 0) delete skillRanks[skillName]; // –ï—Å–ª–∏ 0, —É–¥–∞–ª—è–µ–º –∏–∑ –±–∞–∑—ã
            
            applyXP('refund_skill', refundAmount, `–ù–∞–≤—ã–∫ ${skillName} ${rankToRefund}`);
        }
    }
function tryBuyStat(statKey) {
        const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
        if (!race) return;
        
        const currentVal = race.stats[statKey] + (statMods[statKey] || 0);
        const nextVal = currentVal + 1;
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ (–æ–±—ã—á–Ω–æ 6)
        if (nextVal > 6) {
            alert("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ‚Äî 6.");
            return; 
        }

        // –§–æ—Ä–º—É–ª–∞: –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ * 10
        const cost = nextVal * 10;
        const totalXP = race.startXP + xpData.earned;
        const availXP = totalXP - xpData.spent;

        if (availXP < cost) {
            alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ XP! –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –¥–æ ${nextVal} –Ω—É–∂–Ω–æ ${cost} XP.`);
            return;
        }

        if (confirm(`–ü–æ–≤—ã—Å–∏—Ç—å ${STAT_CONFIG[statKey].t} –¥–æ ${nextVal} –∑–∞ ${cost} XP?`)) {
            statMods[statKey] = (statMods[statKey] || 0) + 1;
            applyXP('buy_stat', cost, `${STAT_CONFIG[statKey].t} ${nextVal}`);
        }
    }
// === –í–û–ó–í–†–ê–¢ –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò (–ü–†–û–î–ê–ñ–ê) ===
    function tryRefundStat(statKey) {
        const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
        if (!race) return;

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∫—É–ø–ª–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
        const currentMod = statMods[statKey] || 0;
        if (currentMod <= 0) {
            alert("–ù–µ–ª—å–∑—è —É–º–µ–Ω—å—à–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –Ω–∏–∂–µ –±–∞–∑–æ–≤–æ–π —Ä–∞—Å–æ–≤–æ–π!");
            return;
        }

        // –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ –º—ã "–ø—Ä–æ–¥–∞–µ–º")
        const currentVal = race.stats[statKey] + currentMod;
        
        // –§–æ—Ä–º—É–ª–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞: –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ * 10
        // (–ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫–∞—Ç —Å 3 –Ω–∞ 2 –≤–µ—Ä–Ω–µ—Ç 30 XP)
        const refundAmount = currentVal * 10;

        if (confirm(`–ü–æ–Ω–∏–∑–∏—Ç—å ${STAT_CONFIG[statKey].t} –¥–æ ${currentVal - 1} –∏ –≤–µ—Ä–Ω—É—Ç—å ${refundAmount} XP?`)) {
            statMods[statKey]--;
            if (statMods[statKey] === 0) delete statMods[statKey]; // –ß–∏—Å—Ç–∏–º –æ–±—ä–µ–∫—Ç
            
            applyXP('refund_stat', refundAmount, `${STAT_CONFIG[statKey].t} ${currentVal}`);
        }
    }
    // ============================================================
    
    // --- –ö–û–ù–ï–¶ –õ–û–ì–ò–ö–ò –ü–†–û–ö–ê–ß–ö–ò ---


    function toggleMobileSkills(tab) {
        const viewGen = document.getElementById('view-skills-gen');
        const viewCom = document.getElementById('view-skills-com');
        const btnGen = document.getElementById('tab-btn-gen');
        const btnCom = document.getElementById('tab-btn-com');
        const activeClass = "bg-slate-700 text-white shadow";
        const inactiveClass = "hover:bg-slate-800 text-slate-400";
        if (tab === 'gen') {
            viewGen.classList.remove('hidden'); viewCom.classList.add('hidden');
            if(btnGen) btnGen.className = "flex-1 py-1.5 text-[10px] font-bold uppercase rounded transition " + activeClass;
            if(btnCom) btnCom.className = "flex-1 py-1.5 text-[10px] font-bold uppercase rounded transition " + inactiveClass;
        } else {
            viewGen.classList.add('hidden'); viewCom.classList.remove('hidden');
            if(btnGen) btnGen.className = "flex-1 py-1.5 text-[10px] font-bold uppercase rounded transition " + inactiveClass;
            if(btnCom) btnCom.className = "flex-1 py-1.5 text-[10px] font-bold uppercase rounded transition " + activeClass;
        }
    }

    // –õ–û–ì–ò–ö–ê –î–ï–†–ï–í–ê –¢–ê–õ–ê–ù–¢–û–í
    function initTalentTree() {
            const container = document.getElementById('talent-tree-container');
            const title = document.getElementById('talent-tree-title');
            let currentData = []; let headerText = "";

            if (currentTreeMode === 'spec') {
                const specId = document.getElementById('gen-spec').value;
                if(specId && TALENTS_DB[specId]) {
                    currentData = TALENTS_DB[specId];
                    const cId = document.getElementById('gen-career').value;
                    const career = db.careers.find(c => c.id === cId);
                    const spec = career ? career.specializations.find(s => s.id === specId) : null;
                    headerText = spec ? `${career.name}: ${spec.name}` : "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è";
                }
            } else if (currentTreeMode === 'force1' || currentTreeMode === 'force2') {
                const fId = document.getElementById(currentTreeMode === 'force1' ? 'force-p1' : 'force-p2').value;
                if(fId && fId !== 'none' && FORCE_DB[fId]) {
                    currentData = FORCE_DB[fId];
                    const fName = FORCE_LIST.find(f => f.id === fId).name;
                    headerText = `–°–∏–ª–∞: ${fName}`;
                }
            }

            if(title) title.innerHTML = headerText || "<span class='text-slate-400'>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ—Ä–µ–≤–æ</span>";
            container.innerHTML = '';

            if (!currentData || currentData.length === 0) {
                container.innerHTML = `<div class="col-span-4 text-center text-slate-400 py-10 opacity-50">–î–µ—Ä–µ–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>`;
                updateTalentStats([]); return;
            }

            const incomingLinks = {}; 
            currentData.forEach(t => {
                if(t.links) {
                    t.links.forEach(dir => {
                        if(dir === 'down') {
                            const targetRow = t.row + 1; const width = t.width || 1;
                            for(let i = 0; i < width; i++) {
                                const targetId = `${targetRow}_${t.col + i}`;
                                if(!incomingLinks[targetId]) incomingLinks[targetId] = [];
                                incomingLinks[targetId].push(t.id);
                            }
                        } else {
                            let targetC = t.col;
                            if(dir === 'right') targetC += (t.width || 1);
                            if(dir === 'left') targetC--;
                            const targetId = `${t.row}_${targetC}`;
                            if(!incomingLinks[targetId]) incomingLinks[targetId] = [];
                            incomingLinks[targetId].push(t.id);
                        }
                    });
                }
            });

            currentData.forEach(t => {
                if(t.invisible) return;
                const isBought = purchasedTalents.includes(t.id);
                let isAvailable = isBought;
                if (!isBought) {
                    const myCoordKey = `${t.row}_${t.col}`;
                    const parents = incomingLinks[myCoordKey] || [];
                    const isRoot = (t.row === 1 && parents.length === 0);
                    const hasActiveParent = parents.some(pid => purchasedTalents.includes(pid));
                    if (isRoot || hasActiveParent) isAvailable = true;
                }

                let opacityClass = isAvailable ? "opacity-100" : "opacity-40 grayscale cursor-not-allowed";
                let borderClass = isBought ? "border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.2)] bg-green-950/40" : "border-slate-800 bg-slate-900";
                if(isAvailable && !isBought) borderClass += " hover:border-slate-500 hover:bg-slate-800";
                let nameColor = isBought ? "text-white" : (t.passive ? "text-slate-300" : "text-red-400");
                let costColor = isBought ? "text-green-400 font-bold" : "text-slate-600";

                let linksHtml = '';
                if (t.links) {
                    t.links.forEach(dir => {
                        let linkColor = isBought ? "bg-slate-600" : "bg-slate-800";
                        const w = t.width || 1;
                        if (dir === 'right') linksHtml += `<div class="absolute top-1/2 -right-6 w-8 h-1 ${linkColor} -z-10 transform -translate-y-1/2 border-t border-b border-slate-900"></div>`;
                        if (dir === 'left') linksHtml += `<div class="absolute top-1/2 -left-6 w-8 h-1 ${linkColor} -z-10 transform -translate-y-1/2 border-t border-b border-slate-900"></div>`;
                        if (dir === 'down') {
                            if (w > 1) {
                                linksHtml += `<div class="absolute -bottom-3 left-2 right-2 h-1 ${linkColor} -z-10"></div>`;
                                for(let i=0; i<w; i++) {
                                    const centerPct = ((i + 0.5) / w) * 100; 
                                    linksHtml += `<div class="absolute -bottom-6 w-1 h-4 ${linkColor} -z-10 border-l border-r border-slate-900" style="left: ${centerPct}%; transform: translateX(-50%);"></div>`;
                                }
                            } else {
                                linksHtml += `<div class="absolute -bottom-6 left-1/2 w-1 h-8 ${linkColor} -z-10 transform -translate-x-1/2 border-l border-r border-slate-900"></div>`;
                            }
                        }
                    });
                }

                const div = document.createElement('div');
                div.style.gridRow = t.row; div.style.gridColumn = `${t.col} / span ${t.width || 1}`;
                div.className = `relative p-2 rounded border transition-all duration-200 cursor-pointer group flex flex-col justify-between min-h-[120px] select-none ${borderClass} ${opacityClass}`;
                div.onclick = () => toggleTalent(t.id, currentData, isAvailable);
                div.innerHTML = `${linksHtml}<div class="flex justify-between items-start mb-1 gap-2"><span class="text-[10px] uppercase font-black leading-tight tracking-tight ${nameColor}">${t.name}</span><span class="text-xs font-mono whitespace-nowrap ${costColor}">${t.cost} XP</span></div><div class="text-xs leading-3 overflow-hidden text-slate-400 flex-grow">${formatDesc(t.desc)}</div><div class="mt-1 pt-1 border-t border-slate-800/50 text-[10px] uppercase tracking-wider font-bold text-slate-700 flex justify-between items-center"><span>${t.passive ? '–ü–∞—Å—Å–∏–≤–Ω—ã–π' : '–î–µ–π—Å—Ç–≤–∏–µ'}</span>${isBought ? '<span class="text-green-500">‚óè</span>' : (isAvailable ? '' : 'üîí')}</div>`;
                container.appendChild(div);
            });
            updateTalentStats(currentData);
        }

        function toggleTalent(id, dataArray, isAvailable) {
            const talent = dataArray.find(t => t.id === id); if (!talent) return;
            const race = db.races.find(r => r.id === document.getElementById('gen-race').value);
            const totalXP = (race ? race.startXP : 0) + xpData.earned;
            const availXP = totalXP - xpData.spent;

            if (purchasedTalents.includes(id)) {
                // –í–æ–∑–≤—Ä–∞—Ç
                const incomingMap = {};
                dataArray.forEach(t => {
                    if(t.links) t.links.forEach(dir => {
                        if(dir === 'down') {
                            const tr = t.row + 1; const w = t.width || 1;
                            for(let i=0; i<w; i++) { const tid=`${tr}_${t.col+i}`; if(!incomingMap[tid]) incomingMap[tid]=[]; incomingMap[tid].push(t.id); }
                        } else {
                            let tc = t.col; if(dir === 'right') tc += (t.width||1); if(dir === 'left') tc--;
                            const tid=`${t.row}_${tc}`; if(!incomingMap[tid]) incomingMap[tid]=[]; incomingMap[tid].push(t.id);
                        }
                    });
                });

                const children = [];
                if (talent.links) {
                    talent.links.forEach(dir => {
                        if(dir === 'down') {
                            const tr = talent.row + 1; const w = talent.width || 1;
                            for(let i=0; i<w; i++) {
                                const child = dataArray.find(x => x.row === tr && x.col === (talent.col + i));
                                if(child && purchasedTalents.includes(child.id)) children.push(child);
                            }
                        } else {
                            let tc = talent.col; if(dir === 'right') tc += (talent.width||1); if(dir === 'left') tc--;
                            const child = dataArray.find(x => x.row === talent.row && x.col === tc);
                            if(child && purchasedTalents.includes(child.id)) children.push(child);
                        }
                    });
                }

                let wouldBreakChain = false;
                for (let child of children) {
                    const parents = incomingMap[`${child.row}_${child.col}`] || [];
                    const otherActiveParents = parents.filter(pid => pid !== id && purchasedTalents.includes(pid));
                    if (otherActiveParents.length === 0) { wouldBreakChain = true; break; }
                }

                if (wouldBreakChain) { alert("–ù–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å: —Ç–∞–ª–∞–Ω—Ç –Ω—É–∂–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ª–µ–¥—É—é—â–∏–º!"); return; }
                if (confirm(`–í–µ—Ä–Ω—É—Ç—å "${talent.name}" –∏ –ø–æ–ª—É—á–∏—Ç—å ${talent.cost} XP?`)) {
                    purchasedTalents = purchasedTalents.filter(tid => tid !== id);
                    applyXP('refund_talent', talent.cost);
                }
            } else {
                // –ü–æ–∫—É–ø–∫–∞
                if (!isAvailable) return;
                if (availXP >= talent.cost) {
                    purchasedTalents.push(id);
                    applyXP('buy_talent', talent.cost);
                } else {
                    alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ XP! –ù—É–∂–Ω–æ ${talent.cost}, —É –≤–∞—Å ${availXP}.`);
                }
            }
            initTalentTree(); saveSession();
        }

        function updateTalentStats(currentData) {
            if (!currentData) return;
            const totalSpent = currentData.filter(t => purchasedTalents.includes(t.id)).reduce((sum, t) => sum + t.cost, 0);
            const el = document.getElementById('talent-xp-spent'); if (el) el.textContent = totalSpent;
        }

    function applyXP(action, amountOverride = null, desc = "") {
        const input = document.getElementById('xp-amount-input');
        const val = amountOverride !== null ? amountOverride : (parseInt(input.value) || 0);

        if (val !== 0) {
            xpHistory.push({ earned: xpData.earned, spent: xpData.spent, log: [...xpLog] });
            if (xpHistory.length > 10) xpHistory.shift();
            let logEntry = "";

            if (action === 'add') { xpData.earned += val; logEntry = `+${val} –ù–∞–≥—Ä–∞–¥–∞`; }
            else if (action === 'spend') { xpData.spent += val; logEntry = `-${val} –¢—Ä–∞—Ç–∞`; } 
            else if (action === 'buy_talent') { xpData.spent += val; logEntry = `<span class="text-yellow-500">-${val} –¢–∞–ª–∞–Ω—Ç</span>`; }
            else if (action === 'refund_talent') { xpData.spent -= val; logEntry = `<span class="text-blue-400">+${val} –û—Ç–º–µ–Ω–∞</span>`; }
            else if (action === 'buy_skill') { xpData.spent += val; logEntry = `<span class="text-slate-300">-${val} ${desc || '–ù–∞–≤—ã–∫'}</span>`; }
            else if (action === 'buy_stat') { xpData.spent += val; logEntry = `<span class="text-red-400">-${val} ${desc || '–°—Ç–∞—Ç'}</span>`; }
else if (action === 'refund_skill') { xpData.spent -= val; logEntry = `<span class="text-green-400">+${val} –û—Ç–º–µ–Ω–∞</span>`; }
else if (action === 'refund_stat') { xpData.spent -= val; logEntry = `<span class="text-green-400">+${val} –û—Ç–º–µ–Ω–∞</span>`; }

            if (amountOverride === null && input) input.value = '';
            xpLog.unshift(logEntry); if (xpLog.length > 5) xpLog.pop();
            updateGeneratorUI(); saveSession();
        }
    }
    function undoLastXP() {
        if (xpHistory.length === 0) return;
        const state = xpHistory.pop();
        xpData.earned = state.earned; xpData.spent = state.spent; xpLog = state.log;
        updateGeneratorUI(); saveSession();
    }
    function renderXPLogDisplay() {
        const list = document.getElementById('xp-log-list');
        if (list) {
            list.innerHTML = "";
            if (xpLog.length === 0) list.innerHTML = `<li class="text-[10px] text-slate-600 italic text-center">–ü—É—Å—Ç–æ</li>`;
            else xpLog.forEach(e => list.innerHTML += `<li class="text-[10px] font-mono flex justify-between border-b border-slate-800/50 pb-0.5 last:border-0">${e}</li>`);
        }
        const btn = document.getElementById('btn-xp-undo');
        if(btn) { btn.disabled = xpHistory.length === 0; btn.style.opacity = xpHistory.length === 0 ? '0.2' : '1'; }
    }

    // –õ–æ–≥–∏–∫–∞ –°–∏–ª—ã –∏ –†–∞–Ω
    function updateForce(val) { forceRating = Math.max(0, parseInt(val) || 0); const el = document.getElementById('force-rating'); if(el) el.value = forceRating; saveSession(); }
    function renderCrits() {
        const list = document.getElementById('crit-list'); const emptyMsg = document.getElementById('crit-empty');
        if (!list) return;
        list.innerHTML = "";
        if (criticalInjuries.length === 0) { if(emptyMsg) emptyMsg.classList.remove('hidden'); }
        else {
            if(emptyMsg) emptyMsg.classList.add('hidden');
            criticalInjuries.forEach((crit, index) => {
                const row = document.createElement('div'); row.className = "flex items-center gap-1 animate-fade-in";
                row.innerHTML = `<input type="text" class="w-full bg-slate-950 border border-slate-700 rounded px-1.5 py-0.5 text-[10px] text-red-300 placeholder-slate-700 focus:border-red-500 outline-none" value="${crit}" onchange="updateCrit(${index}, this.value)" placeholder="d100 —ç—Ñ—Ñ–µ–∫—Ç..."><button class="text-slate-600 hover:text-red-500 font-bold px-1" onclick="removeCrit(${index})">√ó</button>`;
                list.appendChild(row);
            });
        }
    }
    function addCrit() { if (criticalInjuries.length >= 4) { alert("–ú–∞–∫—Å–∏–º—É–º 4!"); return; } criticalInjuries.push(""); renderCrits(); saveSession(); }
    function updateCrit(i, t) { criticalInjuries[i] = t; saveSession(); }
    function removeCrit(i) { if(confirm("–ò—Å—Ü–µ–ª–∏—Ç—å?")) { criticalInjuries.splice(i, 1); renderCrits(); saveSession(); } }

    // –ê–≤–∞—Ç–∞—Ä
    function handleAvatarClick(e) { e.stopPropagation(); const m = document.getElementById('avatar-menu'); if (!charAvatar) { document.getElementById('avatar-input').click(); m.classList.add('hidden'); } else m.classList.toggle('hidden'); }
    function actionReplace() { document.getElementById('avatar-menu').classList.add('hidden'); document.getElementById('avatar-input').click(); }
    function actionDelete() { document.getElementById('avatar-menu').classList.add('hidden'); if(confirm("–£–¥–∞–ª–∏—Ç—å?")) { charAvatar = ""; document.getElementById('avatar-input').value = ""; updateAvatarUI(); saveSession(); } }
    
    function uploadAvatar(input) {
        if (input.files && input.files[0]) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas'); const ctx = canvas.getContext('2d');
                    const maxSize = 150; 
                    let width = img.width; let height = img.height;
                    if (width > height) { if (width > maxSize) { height *= maxSize / width; width = maxSize; } } 
                    else { if (height > maxSize) { width *= maxSize / height; height = maxSize; } }
                    canvas.width = width; canvas.height = height;
                    ctx.drawImage(img, 0, 0, width, height);
                    charAvatar = canvas.toDataURL('image/jpeg', 0.7);
                    updateAvatarUI(); saveSession();
                    document.getElementById('avatar-menu').classList.add('hidden'); input.value = ''; 
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    }

    function updateAvatarUI() {
        const el = document.getElementById('avatar-display'); const placeholder = document.getElementById('avatar-placeholder');
        if (charAvatar) { el.style.backgroundImage = `url(${charAvatar})`; if(placeholder) placeholder.classList.add('hidden'); } 
        else { el.style.backgroundImage = ''; if(placeholder) placeholder.classList.remove('hidden'); }
    }
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    function saveSession() {
        if (!isSaveReady) return; 
        const session = {
            charName: document.getElementById('char-name').value,
            raceVal: document.getElementById('gen-race').value,
            careerVal: document.getElementById('gen-career').value,
            specVal: document.getElementById('gen-spec').value,
            armorVal: document.getElementById('val-armor').value,
            forceP1: document.getElementById('force-p1').value,
            forceP2: document.getElementById('force-p2').value,
            charAvatar: charAvatar, forceRating: forceRating, criticalInjuries: criticalInjuries,
            statMods: statMods, thresholdMods: thresholdMods, currentStatus: currentStatus,
            purchasedTalents: purchasedTalents,
            xpData: xpData, xpHistory: xpHistory, xpLog: xpLog, skillRanks: skillRanks, morality: morality, 
            selectedCareerSkills: selectedCareerSkills // –¢–µ–ø–µ—Ä—å —Å –∑–∞–ø—è—Ç–æ–π –ø–µ—Ä–µ–¥ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π!
        };
        localStorage.setItem('swrpg_autosave_v1', JSON.stringify(session));
    }

    function loadSession() {
        const saved = localStorage.getItem('swrpg_autosave_v1');
        if (!saved) { isSaveReady = true; return; }
        try {
            const s = JSON.parse(saved);
            document.getElementById('char-name').value = s.charName || "–ò–º—è –ü–µ—Ä—Å–æ–Ω–∞–∂–∞";
            document.getElementById('val-armor').value = s.armorVal || 0;
            if (s.charAvatar) { charAvatar = s.charAvatar; updateAvatarUI(); }
            if (s.forceRating !== undefined) { forceRating = s.forceRating; const el = document.getElementById('force-rating'); if(el) el.value = forceRating; }
            if (s.criticalInjuries) { criticalInjuries = s.criticalInjuries; renderCrits(); }
            if(s.raceVal) document.getElementById('gen-race').value = s.raceVal;
            if(s.careerVal) document.getElementById('gen-career').value = s.careerVal;
            updateSpecsAndUI();
            if(s.specVal) document.getElementById('gen-spec').value = s.specVal;
            if (s.forceP1) document.getElementById('force-p1').value = s.forceP1;
            if (s.forceP2) document.getElementById('force-p2').value = s.forceP2;
            updateForceTabs();
            if(s.statMods) statMods = s.statMods;
            if(s.thresholdMods) thresholdMods = s.thresholdMods;
            if(s.currentStatus) currentStatus = s.currentStatus;
            if(s.xpData) xpData = s.xpData;
            if(s.xpHistory) xpHistory = s.xpHistory;
            if(s.xpLog) xpLog = s.xpLog;
            if(s.skillRanks) skillRanks = s.skillRanks;
            if (s.purchasedTalents) purchasedTalents = s.purchasedTalents;
            if (s.selectedCareerSkills) selectedCareerSkills = s.selectedCareerSkills;
            
            updateMorality(s.morality || 50);
            updateGeneratorUI();
            initTalentTree();
        } catch (e) { console.error("Error loading:", e); } finally { isSaveReady = true; }
    }

    const originalUpdateUI = updateGeneratorUI;
    updateGeneratorUI = function() { renderXPLogDisplay(); originalUpdateUI(); saveSession(); };

    document.getElementById('char-name').addEventListener('input', saveSession);
    document.getElementById('morality-val').addEventListener('input', () => { updateMorality(document.getElementById('morality-val').value); saveSession(); });
    window.addEventListener('click', (e) => { const m = document.getElementById('avatar-menu'); if (m && !m.classList.contains('hidden') && !e.target.closest('#avatar-display')) m.classList.add('hidden'); });
    
    const originalOnLoad = window.onload;
    window.onload = function() { if(originalOnLoad) originalOnLoad(); setTimeout(loadSession, 100); };
</script>
</body>
</html>